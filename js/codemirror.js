(function(b,a){typeof exports==="object"&&typeof module!=="undefined"?module.exports=a():typeof define==="function"&&define.amd?define(a):(b.CodeMirror=a())}(this,(function(){var ek=navigator.userAgent;var ev=navigator.platform;var cE=/gecko\/\d/i.test(ek);var fd=/MSIE \d/.test(ek);var bT=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ek);var cS=/Edge\/(\d+)/.exec(ek);var d1=fd||bT||cS;var l=d1&&(fd?document.documentMode||6:+(cS||bT)[1]);var dg=!cS&&/WebKit\//.test(ek);var d4=dg&&/Qt\/\d+\.\d+/.test(ek);var dv=!cS&&/Chrome\//.test(ek);var em=/Opera\//.test(ek);var aF=/Apple Computer/.test(navigator.vendor);var dn=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(ek);var fY=/PhantomJS/.test(ek);var fw=!cS&&/AppleWebKit/.test(ek)&&/Mobile\/\w+/.test(ek);var aQ=/Android/.test(ek);var eB=fw||aQ||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(ek);var cj=fw||/Mac/.test(ev);var gh=/\bCrOS\b/.test(ek);var aT=/win/i.test(ev);var a3=em&&ek.match(/Version\/(\d*\.\d*)/);if(a3){a3=Number(a3[1])}if(a3&&a3>=15){em=false;dg=true}var b1=cj&&(d4||em&&(a3==null||a3<12.11));var gP=cE||(d1&&l>=9);function U(i){return new RegExp("(^|\\s)"+i+"(?:$|\\s)\\s*")}var h=function(g0,i){var g1=g0.className;var gZ=U(i).exec(g1);if(gZ){var g2=g1.slice(gZ.index+gZ[0].length);g0.className=g1.slice(0,gZ.index)+(g2?gZ[1]+g2:"")}};function el(gZ){for(var i=gZ.childNodes.length;i>0;--i){gZ.removeChild(gZ.firstChild)}return gZ}function b3(i,gZ){return el(i).appendChild(gZ)}function gG(gZ,g3,g2,g1){var g4=document.createElement(gZ);if(g2){g4.className=g2}if(g1){g4.style.cssText=g1}if(typeof g3=="string"){g4.appendChild(document.createTextNode(g3))}else{if(g3){for(var g0=0;g0<g3.length;++g0){g4.appendChild(g3[g0])}}}return g4}function gM(i,g1,g0,gZ){var g2=gG(i,g1,g0,gZ);g2.setAttribute("role","presentation");return g2}var cB;if(document.createRange){cB=function(g1,g2,gZ,i){var g0=document.createRange();g0.setEnd(i||g1,gZ);g0.setStart(g1,g2);return g0}}else{cB=function(g0,g2,i){var gZ=document.body.createTextRange();try{gZ.moveToElementText(g0.parentNode)}catch(g1){return gZ}gZ.collapse(true);gZ.moveEnd("character",i);gZ.moveStart("character",g2);return gZ}}function gQ(i,gZ){if(gZ.nodeType==3){gZ=gZ.parentNode}if(i.contains){return i.contains(gZ)}do{if(gZ.nodeType==11){gZ=gZ.host}if(gZ==i){return true}}while(gZ=gZ.parentNode)}function d5(){var i;try{i=document.activeElement}catch(gZ){i=document.body||null}while(i&&i.shadowRoot&&i.shadowRoot.activeElement){i=i.shadowRoot.activeElement}return i}function f7(gZ,i){var g0=gZ.className;if(!U(i).test(g0)){gZ.className+=(g0?" ":"")+i}}function gw(g1,gZ){var g0=g1.split(" ");for(var g2=0;g2<g0.length;g2++){if(g0[g2]&&!U(g0[g2]).test(gZ)){gZ+=" "+g0[g2]}}return gZ}var d2=function(i){i.select()};if(fw){d2=function(i){i.selectionStart=0;i.selectionEnd=i.value.length}}else{if(d1){d2=function(gZ){try{gZ.select()}catch(i){}}}}function cL(gZ){var i=Array.prototype.slice.call(arguments,1);return function(){return gZ.apply(null,i)}}function aR(g0,gZ,i){if(!gZ){gZ={}}for(var g1 in g0){if(g0.hasOwnProperty(g1)&&(i!==false||!gZ.hasOwnProperty(g1))){gZ[g1]=g0[g1]}}return gZ}function b2(g2,g0,g4,g5,g1){if(g0==null){g0=g2.search(/[^\s\u00a0]/);if(g0==-1){g0=g2.length}}for(var g3=g5||0,g6=g1||0;;){var gZ=g2.indexOf("\t",g3);if(gZ<0||gZ>=g0){return g6+(g0-g3)}g6+=gZ-g3;g6+=g4-(g6%g4);g3=gZ+1}}var gY=function(){this.id=null};gY.prototype.set=function(i,gZ){clearTimeout(this.id);this.id=setTimeout(gZ,i)};function dB(g1,gZ){for(var g0=0;g0<g1.length;++g0){if(g1[g0]==gZ){return g0}}return -1}var d0=30;var co={toString:function(){return"CodeMirror.Pass"}};var ac={scroll:false};var O={origin:"*mouse"};var dc={origin:"+move"};function eN(g2,g1,g3){for(var g4=0,g0=0;;){var gZ=g2.indexOf("\t",g4);if(gZ==-1){gZ=g2.length}var i=gZ-g4;if(gZ==g2.length||g0+i>=g1){return g4+Math.min(i,g1-g0)}g0+=gZ-g4;g0+=g3-(g0%g3);g4=gZ+1;if(g0>=g1){return g4}}}var a4=[""];function cF(i){while(a4.length<=i){a4.push(gd(a4)+" ")}return a4[i]}function gd(i){return i[i.length-1]}function b4(g2,g1){var gZ=[];for(var g0=0;g0<g2.length;g0++){gZ[g0]=g1(g2[g0],g0)}return gZ}function cm(g2,gZ,g0){var g1=0,i=g0(gZ);while(g1<g2.length&&g0(g2[g1])<=i){g1++}g2.splice(g1,0,gZ)}function gx(){}function cz(g0,i){var gZ;if(Object.create){gZ=Object.create(g0)}else{gx.prototype=g0;gZ=new gx()}if(i){aR(i,gZ)}return gZ}var bg=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function ga(i){return/\w/.test(i)||i>"\x80"&&(i.toUpperCase()!=i.toLowerCase()||bg.test(i))}function cQ(i,gZ){if(!gZ){return ga(i)}if(gZ.source.indexOf("\\w")>-1&&ga(i)){return true}return gZ.test(i)}function fp(i){for(var gZ in i){if(i.hasOwnProperty(gZ)&&i[gZ]){return false}}return true}var fc=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function fT(i){return i.charCodeAt(0)>=768&&fc.test(i)}function eF(gZ,g0,i){while((i<0?g0>0:g0<gZ.length)&&fT(gZ.charAt(g0))){g0+=i}return g0}function cC(i,g1,g0){for(;;){if(Math.abs(g1-g0)<=1){return i(g1)?g1:g0}var gZ=Math.floor((g1+g0)/2);if(i(gZ)){g0=gZ}else{g1=gZ}}}function fa(gZ,g1,g0){var g2=this;this.input=g0;g2.scrollbarFiller=gG("div",null,"CodeMirror-scrollbar-filler");g2.scrollbarFiller.setAttribute("cm-not-content","true");g2.gutterFiller=gG("div",null,"CodeMirror-gutter-filler");g2.gutterFiller.setAttribute("cm-not-content","true");g2.lineDiv=gM("div",null,"CodeMirror-code");g2.selectionDiv=gG("div",null,null,"position: relative; z-index: 1");g2.cursorDiv=gG("div",null,"CodeMirror-cursors");g2.measure=gG("div",null,"CodeMirror-measure");g2.lineMeasure=gG("div",null,"CodeMirror-measure");g2.lineSpace=gM("div",[g2.measure,g2.lineMeasure,g2.selectionDiv,g2.cursorDiv,g2.lineDiv],null,"position: relative; outline: none");var i=gM("div",[g2.lineSpace],"CodeMirror-lines");g2.mover=gG("div",[i],null,"position: relative");g2.sizer=gG("div",[g2.mover],"CodeMirror-sizer");g2.sizerWidth=null;g2.heightForcer=gG("div",null,null,"position: absolute; height: "+d0+"px; width: 1px;");g2.gutters=gG("div",null,"CodeMirror-gutters");g2.lineGutter=null;g2.scroller=gG("div",[g2.sizer,g2.heightForcer,g2.gutters],"CodeMirror-scroll");g2.scroller.setAttribute("tabIndex","-1");g2.wrapper=gG("div",[g2.scrollbarFiller,g2.gutterFiller,g2.scroller],"CodeMirror");if(d1&&l<8){g2.gutters.style.zIndex=-1;g2.scroller.style.paddingRight=0}if(!dg&&!(cE&&eB)){g2.scroller.draggable=true}if(gZ){if(gZ.appendChild){gZ.appendChild(g2.wrapper)}else{gZ(g2.wrapper)}}g2.viewFrom=g2.viewTo=g1.first;g2.reportedViewFrom=g2.reportedViewTo=g1.first;g2.view=[];g2.renderedView=null;g2.externalMeasured=null;g2.viewOffset=0;g2.lastWrapHeight=g2.lastWrapWidth=0;g2.updateLineNumbers=null;g2.nativeBarWidth=g2.barHeight=g2.barWidth=0;g2.scrollbarsClipped=false;g2.lineNumWidth=g2.lineNumInnerWidth=g2.lineNumChars=null;g2.alignWidgets=false;g2.cachedCharWidth=g2.cachedTextHeight=g2.cachedPaddingH=null;g2.maxLine=null;g2.maxLineLength=0;g2.maxLineChanged=false;g2.wheelDX=g2.wheelDY=g2.wheelStartX=g2.wheelStartY=null;g2.shift=false;g2.selForContextMenu=null;g2.activeTouch=null;g0.init(g2)}function fK(g2,g4){g4-=g2.first;if(g4<0||g4>=g2.size){throw new Error("There is no line "+(g4+g2.first)+" in the document.")}var gZ=g2;while(!gZ.lines){for(var g0=0;;++g0){var g3=gZ.children[g0],g1=g3.chunkSize();if(g4<g1){gZ=g3;break}g4-=g1}}return gZ.lines[g4]}function gI(g0,g2,i){var gZ=[],g1=g2.line;g0.iter(g2.line,i.line+1,function(g3){var g4=g3.text;if(g1==i.line){g4=g4.slice(0,i.ch)}if(g1==g2.line){g4=g4.slice(g2.ch)}gZ.push(g4);++g1});return gZ}function a6(gZ,g1,g0){var i=[];gZ.iter(g1,g0,function(g2){i.push(g2.text)});return i}function gL(gZ,i){var g0=i-gZ.height;if(g0){for(var g1=gZ;g1;g1=g1.parent){g1.height+=g0}}}function bX(gZ){if(gZ.parent==null){return null}var g3=gZ.parent,g2=dB(g3.lines,gZ);for(var g0=g3.parent;g0;g3=g0,g0=g0.parent){for(var g1=0;;++g1){if(g0.children[g1]==g3){break}g2+=g0.children[g1].chunkSize()}}return g2+g3.first}function bR(g5,g4){var g2=g5.first;outer:do{for(var g1=0;g1<g5.children.length;++g1){var g0=g5.children[g1],gZ=g0.height;if(g4<gZ){g5=g0;continue outer}g4-=gZ;g2+=g0.chunkSize()}return g2}while(!g5.lines);var g3=0;for(;g3<g5.lines.length;++g3){var g7=g5.lines[g3],g6=g7.height;if(g4<g6){break}g4-=g6}return g2+g3}function cl(gZ,i){return i>=gZ.first&&i<gZ.first+gZ.size}function eQ(gZ,g0){return String(gZ.lineNumberFormatter(g0+gZ.firstLineNumber))}function Y(i,gZ,g0){if(g0===void 0){g0=null}if(!(this instanceof Y)){return new Y(i,gZ,g0)}this.line=i;this.ch=gZ;this.sticky=g0}function ct(gZ,i){return gZ.line-i.line||gZ.ch-i.ch}function Z(gZ,i){return gZ.sticky==i.sticky&&ct(gZ,i)==0}function cw(i){return Y(i.line,i.ch)}function bH(gZ,i){return ct(gZ,i)<0?i:gZ}function au(gZ,i){return ct(gZ,i)<0?gZ:i}function dl(i,gZ){return Math.max(i.first,Math.min(gZ,i.first+i.size-1))}function gi(gZ,g0){if(g0.line<gZ.first){return Y(gZ.first,0)}var i=gZ.first+gZ.size-1;if(g0.line>i){return Y(i,fK(gZ,i).text.length)}return fW(g0,fK(gZ,g0.line).text.length)}function fW(g0,gZ){var i=g0.ch;if(i==null||i>gZ){return Y(g0.line,gZ)}else{if(i<0){return Y(g0.line,0)}else{return g0}}}function ej(g1,g2){var gZ=[];for(var g0=0;g0<g2.length;g0++){gZ[g0]=gi(g1,g2[g0])}return gZ}var gT=false;var bb=false;function f5(){gT=true}function bG(){bb=true}function eE(i,g0,gZ){this.marker=i;this.from=g0;this.to=gZ}function fF(g1,gZ){if(g1){for(var g0=0;g0<g1.length;++g0){var g2=g1[g0];if(g2.marker==gZ){return g2}}}}function e9(g0,g1){var g2;for(var gZ=0;gZ<g0.length;++gZ){if(g0[gZ]!=g1){(g2||(g2=[])).push(g0[gZ])}}return g2}function cr(i,gZ){i.markedSpans=i.markedSpans?i.markedSpans.concat([gZ]):[gZ];gZ.marker.attachLine(i)}function aU(g0,g1,g5){var g6;if(g0){for(var g3=0;g3<g0.length;++g3){var g7=g0[g3],g4=g7.marker;var gZ=g7.from==null||(g4.inclusiveLeft?g7.from<=g1:g7.from<g1);if(gZ||g7.from==g1&&g4.type=="bookmark"&&(!g5||!g7.marker.insertLeft)){var g2=g7.to==null||(g4.inclusiveRight?g7.to>=g1:g7.to>g1);(g6||(g6=[])).push(new eE(g4,g7.from,g2?null:g7.to))}}}return g6}function aE(g0,g2,g5){var g6;if(g0){for(var g3=0;g3<g0.length;++g3){var g7=g0[g3],g4=g7.marker;var g1=g7.to==null||(g4.inclusiveRight?g7.to>=g2:g7.to>g2);if(g1||g7.from==g2&&g4.type=="bookmark"&&(!g5||g7.marker.insertLeft)){var gZ=g7.from==null||(g4.inclusiveLeft?g7.from<=g2:g7.from<g2);(g6||(g6=[])).push(new eE(g4,gZ?null:g7.from-g2,g7.to==null?null:g7.to-g2))}}}return g6}function eG(hk,ha){if(ha.full){return null}var g1=cl(hk,ha.from.line)&&fK(hk,ha.from.line).markedSpans;var g8=cl(hk,ha.to.line)&&fK(hk,ha.to.line).markedSpans;if(!g1&&!g8){return null}var g7=ha.from.ch,hf=ha.to.ch,hc=ct(ha.from,ha.to)==0;var g6=aU(g1,g7,hc);var g9=aE(g8,hf,hc);var hd=ha.text.length==1,g4=gd(ha.text).length+(hd?g7:0);if(g6){for(var hi=0;hi<g6.length;++hi){var hh=g6[hi];if(hh.to==null){var hb=fF(g9,hh.marker);if(!hb){hh.to=g7}else{if(hd){hh.to=hb.to==null?null:hb.to+g4}}}}}if(g9){for(var g5=0;g5<g9.length;++g5){var hg=g9[g5];if(hg.to!=null){hg.to+=g4}if(hg.from==null){var g0=fF(g6,hg.marker);if(!g0){hg.from=g4;if(hd){(g6||(g6=[])).push(hg)}}}else{hg.from+=g4;if(hd){(g6||(g6=[])).push(hg)}}}}if(g6){g6=r(g6)}if(g9&&g9!=g6){g9=r(g9)}var hj=[g6];if(!hd){var he=ha.text.length-2,gZ;if(he>0&&g6){for(var g3=0;g3<g6.length;++g3){if(g6[g3].to==null){(gZ||(gZ=[])).push(new eE(g6[g3].marker,null,null))}}}for(var g2=0;g2<he;++g2){hj.push(gZ)}hj.push(g9)}return hj}function r(g0){for(var gZ=0;gZ<g0.length;++gZ){var g1=g0[gZ];if(g1.from!=null&&g1.from==g1.to&&g1.marker.clearWhenEmpty!==false){g0.splice(gZ--,1)}}if(!g0.length){return null}return g0}function cZ(hb,g9,ha){var g3=null;hb.iter(g9.line,ha.line+1,function(hc){if(hc.markedSpans){for(var hd=0;hd<hc.markedSpans.length;++hd){var he=hc.markedSpans[hd].marker;if(he.readOnly&&(!g3||dB(g3,he)==-1)){(g3||(g3=[])).push(he)}}}});if(!g3){return null}var g4=[{from:g9,to:ha}];for(var g5=0;g5<g3.length;++g5){var g6=g3[g5],g1=g6.find(0);for(var g2=0;g2<g4.length;++g2){var g0=g4[g2];if(ct(g0.to,g1.from)<0||ct(g0.from,g1.to)>0){continue}var g8=[g2,1],gZ=ct(g0.from,g1.from),g7=ct(g0.to,g1.to);if(gZ<0||!g6.inclusiveLeft&&!gZ){g8.push({from:g0.from,to:g1.from})}if(g7>0||!g6.inclusiveRight&&!g7){g8.push({from:g1.to,to:g0.to})}g4.splice.apply(g4,g8);g2+=g8.length-3}}return g4}function gO(gZ){var g1=gZ.markedSpans;if(!g1){return}for(var g0=0;g0<g1.length;++g0){g1[g0].marker.detachLine(gZ)}gZ.markedSpans=null}function dj(gZ,g1){if(!g1){return}for(var g0=0;g0<g1.length;++g0){g1[g0].marker.attachLine(gZ)}gZ.markedSpans=g1}function v(i){return i.inclusiveLeft?-1:0}function b7(i){return i.inclusiveRight?1:0}function d9(g1,gZ){var g3=g1.lines.length-gZ.lines.length;if(g3!=0){return g3}var g0=g1.find(),g4=gZ.find();var i=ct(g0.from,g4.from)||v(g1)-v(gZ);if(i){return -i}var g2=ct(g0.to,g4.to)||b7(g1)-b7(gZ);if(g2){return g2}return gZ.id-g1.id}function ba(g0,g4){var gZ=bb&&g0.markedSpans,g3;if(gZ){for(var g2=(void 0),g1=0;g1<gZ.length;++g1){g2=gZ[g1];if(g2.marker.collapsed&&(g4?g2.from:g2.to)==null&&(!g3||d9(g3,g2.marker)<0)){g3=g2.marker}}}return g3}function fj(i){return ba(i,true)}function eU(i){return ba(i,false)}function z(g7,g1,g5,g6,g3){var ha=fK(g7,g1);var gZ=bb&&ha.markedSpans;if(gZ){for(var g2=0;g2<gZ.length;++g2){var g0=gZ[g2];if(!g0.marker.collapsed){continue}var g9=g0.marker.find(0);var g8=ct(g9.from,g5)||v(g0.marker)-v(g3);var g4=ct(g9.to,g6)||b7(g0.marker)-b7(g3);if(g8>=0&&g4<=0||g8<=0&&g4>=0){continue}if(g8<=0&&(g0.marker.inclusiveRight&&g3.inclusiveLeft?ct(g9.to,g5)>=0:ct(g9.to,g5)>0)||g8>=0&&(g0.marker.inclusiveRight&&g3.inclusiveLeft?ct(g9.from,g6)<=0:ct(g9.from,g6)<0)){return true}}}}function y(gZ){var i;while(i=fj(gZ)){gZ=i.find(-1,true).line}return gZ}function cy(gZ){var i;while(i=eU(gZ)){gZ=i.find(1,true).line}return gZ}function g(g0){var i,gZ;while(i=eU(g0)){g0=i.find(1,true).line;(gZ||(gZ=[])).push(g0)}return gZ}function a0(g1,gZ){var i=fK(g1,gZ),g0=y(i);if(i==g0){return gZ}return bX(g0)}function en(g1,g0){if(g0>g1.lastLine()){return g0}var gZ=fK(g1,g0),i;if(!f0(g1,gZ)){return g0}while(i=eU(gZ)){gZ=i.find(1,true).line}return bX(gZ)+1}function f0(g3,g0){var gZ=bb&&g0.markedSpans;if(gZ){for(var g2=(void 0),g1=0;g1<gZ.length;++g1){g2=gZ[g1];if(!g2.marker.collapsed){continue}if(g2.from==null){return true}if(g2.marker.widgetNode){continue}if(g2.from==0&&g2.marker.inclusiveLeft&&V(g3,g0,g2)){return true}}}}function V(g4,g0,g2){if(g2.to==null){var gZ=g2.marker.find(1,true);return V(g4,gZ.line,fF(gZ.line.markedSpans,g2.marker))}if(g2.marker.inclusiveRight&&g2.to==g0.text.length){return true}for(var g3=(void 0),g1=0;g1<g0.markedSpans.length;++g1){g3=g0.markedSpans[g1];if(g3.marker.collapsed&&!g3.marker.widgetNode&&g3.from==g2.to&&(g3.to==null||g3.to!=g2.from)&&(g3.marker.inclusiveLeft||g2.marker.inclusiveRight)&&V(g4,g0,g3)){return true}}}function bW(g1){g1=y(g1);var g3=0,g0=g1.parent;for(var g2=0;g2<g0.lines.length;++g2){var gZ=g0.lines[g2];if(gZ==g1){break}else{g3+=gZ.height}}for(var g4=g0.parent;g4;g0=g4,g4=g0.parent){for(var g6=0;g6<g4.children.length;++g6){var g5=g4.children[g6];if(g5==g0){break}else{g3+=g5.height}}}return g3}function eJ(g0){if(g0.height==0){return 0}var gZ=g0.text.length,i,g3=g0;while(i=fj(g3)){var g1=i.find(0,true);g3=g1.from.line;gZ+=g1.from.ch-g1.to.ch}g3=g0;while(i=eU(g3)){var g2=i.find(0,true);gZ-=g3.text.length-g2.from.ch;g3=g2.to.line;gZ+=g3.text.length-g2.to.ch}return gZ}function f(i){var g0=i.display,gZ=i.doc;g0.maxLine=fK(gZ,gZ.first);g0.maxLineLength=eJ(g0.maxLine);g0.maxLineChanged=true;gZ.iter(function(g2){var g1=eJ(g2);if(g1>g0.maxLineLength){g0.maxLineLength=g1;g0.maxLine=g2}})}function eo(gZ,g5,g4,g3){if(!gZ){return g3(g5,g4,"ltr")}var g2=false;for(var g1=0;g1<gZ.length;++g1){var g0=gZ[g1];if(g0.from<g4&&g0.to>g5||g5==g4&&g0.to==g5){g3(Math.max(g0.from,g5),Math.min(g0.to,g4),g0.level==1?"rtl":"ltr");g2=true}}if(!g2){g3(g5,g4,"ltr")}}var fy=null;function aK(gZ,g1,g3){var g2;fy=null;for(var g0=0;g0<gZ.length;++g0){var g4=gZ[g0];if(g4.from<g1&&g4.to>g1){return g0}if(g4.to==g1){if(g4.from!=g4.to&&g3=="before"){g2=g0}else{fy=g0}}if(g4.from==g1){if(g4.from!=g4.to&&g3!="before"){g2=g0}else{fy=g0}}}return g2!=null?g2:fy}var bm=(function(){var g4="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN";var g2="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function g1(g7){if(g7<=247){return g4.charAt(g7)}else{if(1424<=g7&&g7<=1524){return"R"}else{if(1536<=g7&&g7<=1785){return g2.charAt(g7-1536)}else{if(1774<=g7&&g7<=2220){return"r"}else{if(8192<=g7&&g7<=8203){return"w"}else{if(g7==8204){return"b"}else{return"L"}}}}}}}var i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;var g6=/[stwN]/,g0=/[LRr]/,gZ=/[Lb1n]/,g3=/[1n]/;function g5(g9,g8,g7){this.level=g9;this.from=g8;this.to=g7}return function(hu,ha){var hj=ha=="ltr"?"L":"R";if(hu.length==0||ha=="ltr"&&!i.test(hu)){return false}var hd=hu.length,hD=[];for(var hG=0;hG<hd;++hG){hD.push(g1(hu.charCodeAt(hG)))}for(var hr=0,hq=hj;hr<hd;++hr){var hH=hD[hr];if(hH=="m"){hD[hr]=hq}else{hq=hH}}for(var hp=0,g9=hj;hp<hd;++hp){var hC=hD[hp];if(hC=="1"&&g9=="r"){hD[hp]="n"}else{if(g0.test(hC)){g9=hC;if(hC=="r"){hD[hp]="R"}}}}for(var ho=1,g8=hD[0];ho<hd-1;++ho){var hB=hD[ho];if(hB=="+"&&g8=="1"&&hD[ho+1]=="1"){hD[ho]="1"}else{if(hB==","&&g8==hD[ho+1]&&(g8=="1"||g8=="n")){hD[ho]=g8}}g8=hB}for(var hn=0;hn<hd;++hn){var hA=hD[hn];if(hA==","){hD[hn]="N"}else{if(hA=="%"){var hc=(void 0);for(hc=hn+1;hc<hd&&hD[hc]=="%";++hc){}var hh=(hn&&hD[hn-1]=="!")||(hc<hd&&hD[hc]=="1")?"1":"N";for(var hF=hn;hF<hc;++hF){hD[hF]=hh}hn=hc-1}}}for(var hm=0,hg=hj;hm<hd;++hm){var hy=hD[hm];if(hg=="L"&&hy=="1"){hD[hm]="L"}else{if(g0.test(hy)){hg=hy}}}for(var hl=0;hl<hd;++hl){if(g6.test(hD[hl])){var hv=(void 0);for(hv=hl+1;hv<hd&&g6.test(hD[hv]);++hv){}var hx=(hl?hD[hl-1]:hj)=="L";var hz=(hv<hd?hD[hv]:hj)=="L";var ht=hx==hz?(hx?"L":"R"):hj;for(var hf=hl;hf<hv;++hf){hD[hf]=ht}hl=hv-1}}var hw=[],hE;for(var hk=0;hk<hd;){if(gZ.test(hD[hk])){var hi=hk;for(++hk;hk<hd&&gZ.test(hD[hk]);++hk){}hw.push(new g5(0,hi,hk))}else{var hs=hk,g7=hw.length;for(++hk;hk<hd&&hD[hk]!="L";++hk){}for(var he=hs;he<hk;){if(g3.test(hD[he])){if(hs<he){hw.splice(g7,0,new g5(1,hs,he))}var hb=he;for(++he;he<hk&&g3.test(hD[he]);++he){}hw.splice(g7,0,new g5(2,hb,he));hs=he}else{++he}}if(hs<hk){hw.splice(g7,0,new g5(1,hs,hk))}}}if(hw[0].level==1&&(hE=hu.match(/^\s+/))){hw[0].from=hE[0].length;hw.unshift(new g5(0,0,hE[0].length))}if(gd(hw).level==1&&(hE=hu.match(/\s+$/))){gd(hw).to-=hE[0].length;hw.push(new g5(0,hd-hE[0].length,hd))}return ha=="rtl"?hw.reverse():hw}})();function a(gZ,g0){var i=gZ.order;if(i==null){i=gZ.order=bm(gZ.text,g0)}return i}function by(i,g0,gZ){var g1=eF(i.text,g0+gZ,gZ);return g1<0||g1>i.text.length?null:g1}function al(i,g1,gZ){var g0=by(i,g1.ch,gZ);return g0==null?null:new Y(g1.line,g0,gZ<0?"after":"before")}function eZ(gZ,g7,g4,g3,g1){if(gZ){var g2=a(g4,g7.doc.direction);if(g2){var g0=g1<0?gd(g2):g2[0];var g9=(g1<0)==(g0.level==1);var g6=g9?"after":"before";var i;if(g0.level>0){var g5=a9(g7,g4);i=g1<0?g4.text.length-1:0;var g8=E(g7,g5,i).top;i=cC(function(ha){return E(g7,g5,ha).top==g8},(g1<0)==(g0.level==1)?g0.from:g0.to-1,i);if(g6=="before"){i=by(g4,i,1,true)}}else{i=g1<0?g0.to:g0.from}return new Y(g3,i,g6)}}return new Y(g3,g1<0?g4.text.length:0,g1<0?"before":"after")}function u(g9,he,g2,g5){var hb=a(he,g9.doc.direction);if(!hb){return al(he,g2,g5)}if(g2.ch>=he.text.length){g2.ch=he.text.length;g2.sticky="before"}else{if(g2.ch<=0){g2.ch=0;g2.sticky="after"}}var g1=aK(hb,g2.ch,g2.sticky),g3=hb[g1];if(g9.doc.direction=="ltr"&&g3.level%2==0&&(g5>0?g3.to>g2.ch:g3.from<g2.ch)){return al(he,g2,g5)}var hc=function(hg,hf){return by(he,hg instanceof Y?hg.ch:hg,hf)};var g6;var ha=function(hf){if(!g9.options.lineWrapping){return{begin:0,end:he.text.length}}g6=g6||a9(g9,he);return bs(g9,he,g6,hf)};var g4=ha(g2.sticky=="before"?hc(g2,-1):g2.ch);if(g9.doc.direction=="rtl"||g3.level==1){var hd=(g3.level==1)==(g5<0);var gZ=hc(g2,hd?1:-1);if(gZ!=null&&(!hd?gZ>=g3.from&&gZ>=g4.begin:gZ<=g3.to&&gZ<=g4.end)){var g8=hd?"before":"after";return new Y(g2.line,gZ,g8)}}var g0=function(hf,hi,hl){var hh=function(hn,hm){return hm?new Y(g2.line,hc(hn,1),"before"):new Y(g2.line,hn,"after")};for(;hf>=0&&hf<hb.length;hf+=hi){var hg=hb[hf];var hj=(hi>0)==(hg.level!=1);var hk=hj?hl.begin:hc(hl.end,-1);if(hg.from<=hk&&hk<hg.to){return hh(hk,hj)}hk=hj?hg.from:hc(hg.to,-1);if(hl.begin<=hk&&hk<hl.end){return hh(hk,hj)}}};var g7=g0(g1+g5,g5,g4);if(g7){return g7}var i=g5>0?g4.end:hc(g4.begin,-1);if(i!=null&&!(g5>0&&i==he.text.length)){g7=g0(g5>0?0:hb.length-1,g5,ha(i));if(g7){return g7}}return null}var fB=[];var b8=function(g0,i,gZ){if(g0.addEventListener){g0.addEventListener(i,gZ,false)}else{if(g0.attachEvent){g0.attachEvent("on"+i,gZ)}else{var g1=g0._handlers||(g0._handlers={});g1[i]=(g1[i]||fB).concat(gZ)}}};function eH(gZ,i){return gZ._handlers&&gZ._handlers[i]||fB}function eA(g2,g0,g1){if(g2.removeEventListener){g2.removeEventListener(g0,g1,false)}else{if(g2.detachEvent){g2.detachEvent("on"+g0,g1)}else{var g3=g2._handlers,i=g3&&g3[g0];if(i){var gZ=dB(i,g1);if(gZ>-1){g3[g0]=i.slice(0,gZ).concat(i.slice(gZ+1))}}}}}function aH(g3,g2){var gZ=eH(g3,g2);if(!gZ.length){return}var g0=Array.prototype.slice.call(arguments,2);for(var g1=0;g1<gZ.length;++g1){gZ[g1].apply(null,g0)}}function aV(i,g0,gZ){if(typeof g0=="string"){g0={type:g0,preventDefault:function(){this.defaultPrevented=true}}}aH(i,gZ||g0.type,i,g0);return bV(g0)||g0.codemirrorIgnore}function X(g0){var gZ=g0._handlers&&g0._handlers.cursorActivity;if(!gZ){return}var g2=g0.curOp.cursorActivityHandlers||(g0.curOp.cursorActivityHandlers=[]);for(var g1=0;g1<gZ.length;++g1){if(dB(g2,gZ[g1])==-1){g2.push(gZ[g1])}}}function fP(gZ,i){return eH(gZ,i).length>0}function bJ(i){i.prototype.on=function(gZ,g0){b8(this,gZ,g0)};i.prototype.off=function(gZ,g0){eA(this,gZ,g0)}}function cW(i){if(i.preventDefault){i.preventDefault()}else{i.returnValue=false}}function dI(i){if(i.stopPropagation){i.stopPropagation()}else{i.cancelBubble=true}}function bV(i){return i.defaultPrevented!=null?i.defaultPrevented:i.returnValue==false}function eO(i){cW(i);dI(i)}function N(i){return i.target||i.srcElement}function gn(gZ){var i=gZ.which;if(i==null){if(gZ.button&1){i=1}else{if(gZ.button&2){i=3}else{if(gZ.button&4){i=2}}}}if(cj&&gZ.ctrlKey&&i==1){i=3}return i}var fe=function(){if(d1&&l<9){return false}var i=gG("div");return"draggable" in i||"dragDrop" in i}();var gl;function bv(i){if(gl==null){var g0=gG("span","\u200b");b3(i,gG("span",[g0,document.createTextNode("x")]));if(i.firstChild.offsetHeight!=0){gl=g0.offsetWidth<=1&&g0.offsetHeight>2&&!(d1&&l<8)}}var gZ=gl?gG("span","\u200b"):gG("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px");gZ.setAttribute("cm-text","");return gZ}var gm;function bY(g1){if(gm!=null){return gm}var i=b3(g1,document.createTextNode("A\u062eA"));var g0=cB(i,0,1).getBoundingClientRect();var gZ=cB(i,1,2).getBoundingClientRect();el(g1);if(!g0||g0.left==g0.right){return false}return gm=(gZ.right-g0.right<3)}var gs="\n\nb".split(/\n/).length!=3?function(g3){var g4=0,i=[],g2=g3.length;while(g4<=g2){var g1=g3.indexOf("\n",g4);if(g1==-1){g1=g3.length}var g0=g3.slice(g4,g3.charAt(g1-1)=="\r"?g1-1:g1);var gZ=g0.indexOf("\r");if(gZ!=-1){i.push(g0.slice(0,gZ));g4+=gZ+1}else{i.push(g0);g4=g1+1}}return i}:function(i){return i.split(/\r\n?|\n/)};var bB=window.getSelection?function(gZ){try{return gZ.selectionStart!=gZ.selectionEnd}catch(i){return false}}:function(g0){var i;try{i=g0.ownerDocument.selection.createRange()}catch(gZ){}if(!i||i.parentElement()!=g0){return false}return i.compareEndPoints("StartToEnd",i)!=0};var ds=(function(){var i=gG("div");if("oncopy" in i){return true}i.setAttribute("oncopy","return;");return typeof i.oncopy=="function"})();var fC=null;function aO(gZ){if(fC!=null){return fC}var g0=b3(gZ,gG("span","x"));var g1=g0.getBoundingClientRect();var i=cB(g0,0,1).getBoundingClientRect();return fC=Math.abs(g1.left-i.left)>1}var dK={};var aW={};function eR(i,gZ){if(arguments.length>2){gZ.dependencies=Array.prototype.slice.call(arguments,2)}dK[i]=gZ}function bu(gZ,i){aW[gZ]=i}function gR(i){if(typeof i=="string"&&aW.hasOwnProperty(i)){i=aW[i]}else{if(i&&typeof i.name=="string"&&aW.hasOwnProperty(i.name)){var gZ=aW[i.name];if(typeof gZ=="string"){gZ={name:gZ}}i=cz(gZ,i);i.name=gZ.name}else{if(typeof i=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(i)){return gR("application/xml")}else{if(typeof i=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(i)){return gR("application/json")}}}}if(typeof i=="string"){return{name:i}}else{return i||{name:"null"}}}function f6(g0,gZ){gZ=gR(gZ);var g2=dK[gZ.name];if(!g2){return f6(g0,"text/plain")}var g3=g2(g0,gZ);if(dH.hasOwnProperty(gZ.name)){var g1=dH[gZ.name];for(var g4 in g1){if(!g1.hasOwnProperty(g4)){continue}if(g3.hasOwnProperty(g4)){g3["_"+g4]=g3[g4]}g3[g4]=g1[g4]}}g3.name=gZ.name;if(gZ.helperType){g3.helperType=gZ.helperType}if(gZ.modeProps){for(var i in gZ.modeProps){g3[i]=gZ.modeProps[i]}}return g3}var dH={};function e4(g0,gZ){var i=dH.hasOwnProperty(g0)?dH[g0]:(dH[g0]={});aR(gZ,i)}function cf(g1,i){if(i===true){return i}if(g1.copyState){return g1.copyState(i)}var g0={};for(var g2 in i){var gZ=i[g2];if(gZ instanceof Array){gZ=gZ.concat([])}g0[g2]=gZ}return g0}function gN(g0,i){var gZ;while(g0.innerMode){gZ=g0.innerMode(i);if(!gZ||gZ.mode==g0){break}i=gZ.state;g0=gZ.mode}return gZ||{mode:g0,state:i}}function cc(g0,gZ,i){return g0.startState?g0.startState(gZ,i):true}var fo=function(i,gZ){this.pos=this.start=0;this.string=i;this.tabSize=gZ||8;this.lastColumnPos=this.lastColumnValue=0;this.lineStart=0};fo.prototype.eol=function(){return this.pos>=this.string.length};fo.prototype.sol=function(){return this.pos==this.lineStart};fo.prototype.peek=function(){return this.string.charAt(this.pos)||undefined};fo.prototype.next=function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++)}};fo.prototype.eat=function(i){var g0=this.string.charAt(this.pos);var gZ;if(typeof i=="string"){gZ=g0==i}else{gZ=g0&&(i.test?i.test(g0):i(g0))}if(gZ){++this.pos;return g0}};fo.prototype.eatWhile=function(i){var gZ=this.pos;while(this.eat(i)){}return this.pos>gZ};fo.prototype.eatSpace=function(){var gZ=this;var i=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos))){++gZ.pos}return this.pos>i};fo.prototype.skipToEnd=function(){this.pos=this.string.length};fo.prototype.skipTo=function(i){var gZ=this.string.indexOf(i,this.pos);if(gZ>-1){this.pos=gZ;return true}};fo.prototype.backUp=function(i){this.pos-=i};fo.prototype.column=function(){if(this.lastColumnPos<this.start){this.lastColumnValue=b2(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue);this.lastColumnPos=this.start}return this.lastColumnValue-(this.lineStart?b2(this.string,this.lineStart,this.tabSize):0)};fo.prototype.indentation=function(){return b2(this.string,null,this.tabSize)-(this.lineStart?b2(this.string,this.lineStart,this.tabSize):0)};fo.prototype.match=function(g2,gZ,i){if(typeof g2=="string"){var g3=function(g4){return i?g4.toLowerCase():g4};var g1=this.string.substr(this.pos,g2.length);if(g3(g1)==g3(g2)){if(gZ!==false){this.pos+=g2.length}return true}}else{var g0=this.string.slice(this.pos).match(g2);if(g0&&g0.index>0){return null}if(g0&&gZ!==false){this.pos+=g0[0].length}return g0}};fo.prototype.current=function(){return this.string.slice(this.start,this.pos)};fo.prototype.hideFirstChars=function(gZ,i){this.lineStart+=gZ;try{return i()}finally{this.lineStart-=gZ}};function f4(i,g0,g4,g3){var g2=[i.state.modeGen],g1={};w(i,g0.text,i.doc.mode,g4,function(g6,g7){return g2.push(g6,g7)},g1,g3);var gZ=function(g9){var g7=i.state.overlays[g9],g8=1,g6=0;w(i,g0.text,g7.mode,true,function(ha,hc){var he=g8;while(g6<ha){var hb=g2[g8];if(hb>ha){g2.splice(g8,1,ha,g2[g8+1],hb)}g8+=2;g6=Math.min(ha,hb)}if(!hc){return}if(g7.opaque){g2.splice(he,g8-he,ha,"overlay "+hc);g8=he+2}else{for(;he<g8;he+=2){var hd=g2[he+1];g2[he+1]=(hd?hd+" ":"")+"overlay "+hc}}},g1)};for(var g5=0;g5<i.state.overlays.length;++g5){gZ(g5)}return{styles:g2,classes:g1.bgClass||g1.textClass?g1:null}}function dp(gZ,g0,g2){if(!g0.styles||g0.styles[0]!=gZ.state.modeGen){var g1=dT(gZ,bX(g0));var i=f4(gZ,g0,g0.text.length>gZ.options.maxHighlightLength?cf(gZ.doc.mode,g1):g1);g0.stateAfter=g1;g0.styles=i.styles;if(i.classes){g0.styleClasses=i.classes}else{if(g0.styleClasses){g0.styleClasses=null}}if(g2===gZ.doc.frontier){gZ.doc.frontier++}}return g0.styles}function dT(i,g4,gZ){var g2=i.doc,g1=i.display;if(!g2.mode.startState){return true}var g3=cO(i,g4,gZ),g0=g3>g2.first&&fK(g2,g3-1).stateAfter;if(!g0){g0=cc(g2.mode)}else{g0=cf(g2.mode,g0)}g2.iter(g3,g4,function(g5){dP(i,g5.text,g0);var g6=g3==g4-1||g3%5==0||g3>=g1.viewFrom&&g3<g1.viewTo;g5.stateAfter=g6?cf(g2.mode,g0):null;++g3});if(gZ){g2.frontier=g3}return g0}function dP(i,g3,g0,gZ){var g2=i.doc.mode;var g1=new fo(g3,i.options.tabSize);g1.start=g1.pos=gZ||0;if(g3==""){fU(g2,g0)}while(!g1.eol()){e2(g2,g1,g0);g1.start=g1.pos}}function fU(g0,gZ){if(g0.blankLine){return g0.blankLine(gZ)}if(!g0.innerMode){return}var i=gN(g0,gZ);if(i.mode.blankLine){return i.mode.blankLine(i.state)}}function e2(g4,g3,g2,gZ){for(var g0=0;g0<10;g0++){if(gZ){gZ[0]=gN(g4,g2).mode}var g1=g4.token(g3,g2);if(g3.pos>g3.start){return g1}}throw new Error("Mode "+g4.name+" failed to advance stream.")}function cG(g7,g5,g2,g1){var i=function(ha){return({start:g8.start,end:g8.pos,string:g8.current(),type:g0||null,state:ha?cf(g6.mode,gZ):gZ})};var g6=g7.doc,g3=g6.mode,g0;g5=gi(g6,g5);var g9=fK(g6,g5.line),gZ=dT(g7,g5.line,g2);var g8=new fo(g9.text,g7.options.tabSize),g4;if(g1){g4=[]}while((g1||g8.pos<g5.ch)&&!g8.eol()){g8.start=g8.pos;g0=e2(g3,g8,gZ);if(g1){g4.push(i(true))}}return g1?g4:i()}function dC(g0,gZ){if(g0){for(;;){var i=g0.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!i){break}g0=g0.slice(0,i.index)+g0.slice(i.index+i[0].length);var g1=i[1]?"bgClass":"textClass";if(gZ[g1]==null){gZ[g1]=i[2]}else{if(!(new RegExp("(?:^|s)"+i[2]+"(?:$|s)")).test(gZ[g1])){gZ[g1]+=" "+i[2]}}}}return g0}function w(g8,ha,g3,gZ,g4,g1,g2){var g0=g3.flattenSpans;if(g0==null){g0=g8.options.flattenSpans}var g6=0,g5=null;var g9=new fo(ha,g8.options.tabSize),i;var hc=g8.options.addModeClass&&[null];if(ha==""){dC(fU(g3,gZ),g1)}while(!g9.eol()){if(g9.pos>g8.options.maxHighlightLength){g0=false;if(g2){dP(g8,ha,gZ,g9.pos)}g9.pos=ha.length;i=null}else{i=dC(e2(g3,g9,gZ,hc),g1)}if(hc){var hb=hc[0].name;if(hb){i="m-"+(i?hb+" "+i:hb)}}if(!g0||g5!=i){while(g6<g9.start){g6=Math.min(g9.start,g6+5000);g4(g6,g5)}g5=i}g9.start=g9.pos}while(g6<g9.pos){var g7=Math.min(g9.pos,g6+5000);g4(g7,g5);g6=g7}}function cO(g4,i,g1){var gZ,g2,g3=g4.doc;var g0=g1?-1:i-(g4.doc.mode.innerMode?1000:100);for(var g7=i;g7>g0;--g7){if(g7<=g3.first){return g3.first}var g6=fK(g3,g7-1);if(g6.stateAfter&&(!g1||g7<=g3.frontier)){return g7}var g5=b2(g6.text,null,g4.options.tabSize);if(g2==null||gZ>g5){g2=g7-1;gZ=g5}}return g2}var gK=function(g0,gZ,i){this.text=g0;dj(this,gZ);this.height=i?i(this):1};gK.prototype.lineNo=function(){return bX(this)};bJ(gK);function eK(gZ,g2,g0,i){gZ.text=g2;if(gZ.stateAfter){gZ.stateAfter=null}if(gZ.styles){gZ.styles=null}if(gZ.order!=null){gZ.order=null}gO(gZ);dj(gZ,g0);var g1=i?i(gZ):1;if(g1!=gZ.height){gL(gZ,g1)}}function bL(i){i.parent=null;gO(i)}var ee={};var ce={};function fr(g0,gZ){if(!g0||/^\s*$/.test(g0)){return null}var i=gZ.addModeClass?ce:ee;return i[g0]||(i[g0]=g0.replace(/\S+/g,"cm-$&"))}function fm(g5,g4){var g3=gM("span",null,null,dg?"padding-right: .1px":null);var g2={pre:gM("pre",[g3],"CodeMirror-line"),content:g3,col:0,pos:0,cm:g5,trailingSpace:false,splitSpaces:(d1||dg)&&g5.getOption("lineWrapping")};g4.measure={};for(var g1=0;g1<=(g4.rest?g4.rest.length:0);g1++){var g7=g1?g4.rest[g1-1]:g4.line,g0=(void 0);g2.pos=0;g2.addToken=t;if(bY(g5.display.measure)&&(g0=a(g7,g5.doc.direction))){g2.addToken=W(g2.addToken,g0)}g2.map=[];var gZ=g4!=g5.display.externalMeasured&&bX(g7);bw(g7,g2,dp(g5,g7,gZ));if(g7.styleClasses){if(g7.styleClasses.bgClass){g2.bgClass=gw(g7.styleClasses.bgClass,g2.bgClass||"")}if(g7.styleClasses.textClass){g2.textClass=gw(g7.styleClasses.textClass,g2.textClass||"")}}if(g2.map.length==0){g2.map.push(0,0,g2.content.appendChild(bv(g5.display.measure)))}if(g1==0){g4.measure.map=g2.map;g4.measure.cache={}}else{(g4.measure.maps||(g4.measure.maps=[])).push(g2.map);(g4.measure.caches||(g4.measure.caches=[])).push({})}}if(dg){var g6=g2.content.lastChild;if(/\bcm-tab\b/.test(g6.className)||(g6.querySelector&&g6.querySelector(".cm-tab"))){g2.content.className="cm-tab-wrap-hack"}}aH(g5,"renderLine",g5,g4.line,g2.pre);if(g2.pre.className){g2.textClass=gw(g2.pre.className,g2.textClass||"")}return g2}function fJ(gZ){var i=gG("span","\u2022","cm-invalidchar");i.title="\\u"+gZ.charCodeAt(0).toString(16);i.setAttribute("aria-label",i.title);return i}function t(g9,g4,he,hb,g7,hh,g3){if(!g4){return}var hd=g9.splitSpaces?cV(g4,g9.trailingSpace):g4;var i=g9.cm.state.specialChars,gZ=false;var hc;if(!i.test(g4)){g9.col+=g4.length;hc=document.createTextNode(hd);g9.map.push(g9.pos,g9.pos+g4.length,hc);if(d1&&l<9){gZ=true}g9.pos+=g4.length}else{hc=document.createDocumentFragment();var g1=0;while(true){i.lastIndex=g1;var ha=i.exec(g4);var hg=ha?ha.index-g1:g4.length-g1;if(hg){var g6=document.createTextNode(hd.slice(g1,g1+hg));if(d1&&l<9){hc.appendChild(gG("span",[g6]))}else{hc.appendChild(g6)}g9.map.push(g9.pos,g9.pos+hg,g6);g9.col+=hg;g9.pos+=hg}if(!ha){break}g1+=hg+1;var hf=(void 0);if(ha[0]=="\t"){var g8=g9.cm.options.tabSize,g5=g8-g9.col%g8;hf=hc.appendChild(gG("span",cF(g5),"cm-tab"));hf.setAttribute("role","presentation");hf.setAttribute("cm-text","\t");g9.col+=g5}else{if(ha[0]=="\r"||ha[0]=="\n"){hf=hc.appendChild(gG("span",ha[0]=="\r"?"\u240d":"\u2424","cm-invalidchar"));hf.setAttribute("cm-text",ha[0]);g9.col+=1}else{hf=g9.cm.options.specialCharPlaceholder(ha[0]);hf.setAttribute("cm-text",ha[0]);if(d1&&l<9){hc.appendChild(gG("span",[hf]))}else{hc.appendChild(hf)}g9.col+=1}}g9.map.push(g9.pos,g9.pos+1,hf);g9.pos++}}g9.trailingSpace=hd.charCodeAt(g4.length-1)==32;if(he||hb||g7||gZ||g3){var g0=he||"";if(hb){g0+=hb}if(g7){g0+=g7}var g2=gG("span",[hc],g0,g3);if(hh){g2.title=hh}return g9.content.appendChild(g2)}g9.content.appendChild(hc)}function cV(g4,g3){if(g4.length>1&&!/  /.test(g4)){return g4}var g0=g3,gZ="";for(var g1=0;g1<g4.length;g1++){var g2=g4.charAt(g1);if(g2==" "&&g0&&(g1==g4.length-1||g4.charCodeAt(g1+1)==32)){g2="\u00a0"}gZ+=g2;g0=g2==" "}return gZ}function W(gZ,i){return function(g7,g9,g0,g4,ha,g8,g6){g0=g0?g0+" cm-force-border":"cm-force-border";var g1=g7.pos,g3=g1+g9.length;for(;;){var g2=(void 0);for(var g5=0;g5<i.length;g5++){g2=i[g5];if(g2.to>g1&&g2.from<=g1){break}}if(g2.to>=g3){return gZ(g7,g9,g0,g4,ha,g8,g6)}gZ(g7,g9.slice(0,g2.to-g1),g0,g4,null,g8,g6);g4=null;g9=g9.slice(g2.to-g1);g1=g2.to}}}function ag(gZ,g1,i,g0){var g2=!g0&&i.widgetNode;if(g2){gZ.map.push(gZ.pos,gZ.pos+g1,g2)}if(!g0&&gZ.cm.display.input.needsContentAttribute){if(!g2){g2=gZ.content.appendChild(document.createElement("span"))}g2.setAttribute("cm-marker",i.id)}if(g2){gZ.cm.display.input.setUneditable(g2);gZ.content.appendChild(g2)}gZ.pos+=g1;gZ.trailingSpace=false}function bw(ha,hh,g9){var g4=ha.markedSpans,g7=ha.text,hf=0;if(!g4){for(var g5=1;g5<g9.length;g5+=2){hh.addToken(hh,g7.slice(hf,hf=g9[g5]),fr(g9[g5+1],hh.cm.options))}return}var hl=g7.length,g3=0,hk=1,hd="",hm,hb;var hq=0,gZ,hp,he,hr,g1;for(;;){if(hq==g3){gZ=hp=he=hr=hb="";g1=null;hq=Infinity;var g6=[],g8=(void 0);for(var hi=0;hi<g4.length;++hi){var hj=g4[hi],hg=hj.marker;if(hg.type=="bookmark"&&hj.from==g3&&hg.widgetNode){g6.push(hg)}else{if(hj.from<=g3&&(hj.to==null||hj.to>g3||hg.collapsed&&hj.to==g3&&hj.from==g3)){if(hj.to!=null&&hj.to!=g3&&hq>hj.to){hq=hj.to;hp=""}if(hg.className){gZ+=" "+hg.className}if(hg.css){hb=(hb?hb+";":"")+hg.css}if(hg.startStyle&&hj.from==g3){he+=" "+hg.startStyle}if(hg.endStyle&&hj.to==hq){(g8||(g8=[])).push(hg.endStyle,hj.to)}if(hg.title&&!hr){hr=hg.title}if(hg.collapsed&&(!g1||d9(g1.marker,hg)<0)){g1=hj}}else{if(hj.from>g3&&hq>hj.from){hq=hj.from}}}}if(g8){for(var ho=0;ho<g8.length;ho+=2){if(g8[ho+1]==hq){hp+=" "+g8[ho]}}}if(!g1||g1.from==g3){for(var hn=0;hn<g6.length;++hn){ag(hh,0,g6[hn])}}if(g1&&(g1.from||0)==g3){ag(hh,(g1.to==null?hl+1:g1.to)-g3,g1.marker,g1.from==null);if(g1.to==null){return}if(g1.to==g3){g1=false}}}if(g3>=hl){break}var hc=Math.min(hl,hq);while(true){if(hd){var g0=g3+hd.length;if(!g1){var g2=g0>hc?hd.slice(0,hc-g3):hd;hh.addToken(hh,g2,hm?hm+gZ:gZ,he,g3+g2.length==hq?hp:"",hr,hb)}if(g0>=hc){hd=hd.slice(hc-g3);g3=hc;break}g3=g0;he=""}hd=g7.slice(hf,hf=g9[hk++]);hm=fr(g9[hk++],hh.cm.options)}}}function bE(g0,i,gZ){this.line=i;this.rest=g(i);this.size=this.rest?bX(gd(this.rest))-gZ+1:1;this.node=this.text=null;this.hidden=f0(g0,i)}function fq(i,g4,g3){var g2=[],g0;for(var g1=g4;g1<g3;g1=g0){var gZ=new bE(i.doc,fK(i.doc,g1),g1);g0=g1+gZ.size;g2.push(gZ)}return g2}var bx=null;function eX(i){if(bx){bx.ops.push(i)}else{i.ownsGroup=bx={ops:[i],delayedCallbacks:[]}}}function da(g2){var g1=g2.delayedCallbacks,g0=0;do{for(;g0<g1.length;g0++){g1[g0].call(null)}for(var gZ=0;gZ<g2.ops.length;gZ++){var g3=g2.ops[gZ];if(g3.cursorActivityHandlers){while(g3.cursorActivityCalled<g3.cursorActivityHandlers.length){g3.cursorActivityHandlers[g3.cursorActivityCalled++].call(null,g3.cm)}}}}while(g0<g1.length)}function b9(g0,gZ){var i=g0.ownsGroup;if(!i){return}try{da(i)}finally{bx=null;gZ(i)}}var bI=null;function ah(g5,g3){var gZ=eH(g5,g3);if(!gZ.length){return}var g1=Array.prototype.slice.call(arguments,2),g4;if(bx){g4=bx.delayedCallbacks}else{if(bI){g4=bI}else{g4=bI=[];setTimeout(aP,0)}}var g0=function(g6){g4.push(function(){return gZ[g6].apply(null,g1)})};for(var g2=0;g2<gZ.length;++g2){g0(g2)}}function aP(){var gZ=bI;bI=null;for(var g0=0;g0<gZ.length;++g0){gZ[g0]()}}function ae(i,g0,g2,g3){for(var gZ=0;gZ<g0.changes.length;gZ++){var g1=g0.changes[gZ];if(g1=="text"){fQ(i,g0)}else{if(g1=="gutter"){dy(i,g0,g2,g3)}else{if(g1=="class"){dX(i,g0)}else{if(g1=="widget"){aq(i,g0,g3)}}}}}g0.changes=null}function gf(i){if(i.node==i.text){i.node=gG("div",null,null,"position: relative");if(i.text.parentNode){i.text.parentNode.replaceChild(i.node,i.text)}i.node.appendChild(i.text);if(d1&&l<8){i.node.style.zIndex=2}}return i.node}function eT(i,g0){var gZ=g0.bgClass?g0.bgClass+" "+(g0.line.bgClass||""):g0.line.bgClass;if(gZ){gZ+=" CodeMirror-linebackground"}if(g0.background){if(gZ){g0.background.className=gZ}else{g0.background.parentNode.removeChild(g0.background);g0.background=null}}else{if(gZ){var g1=gf(g0);g0.background=g1.insertBefore(gG("div",null,gZ),g1.firstChild);i.display.input.setUneditable(g0.background)}}}function ed(i,gZ){var g0=i.display.externalMeasured;if(g0&&g0.line==gZ.line){i.display.externalMeasured=null;gZ.measure=g0.measure;return g0.built}return fm(i,gZ)}function fQ(i,g1){var gZ=g1.text.className;var g0=ed(i,g1);if(g1.text==g1.node){g1.node=g0.pre}g1.text.parentNode.replaceChild(g0.pre,g1.text);g1.text=g0.pre;if(g0.bgClass!=g1.bgClass||g0.textClass!=g1.textClass){g1.bgClass=g0.bgClass;g1.textClass=g0.textClass;dX(i,g1)}else{if(gZ){g1.text.className=gZ}}}function dX(gZ,g0){eT(gZ,g0);if(g0.line.wrapClass){gf(g0).className=g0.line.wrapClass}else{if(g0.node!=g0.text){g0.node.className=""}}var i=g0.textClass?g0.textClass+" "+(g0.line.textClass||""):g0.line.textClass;g0.text.className=i||""}function dy(g6,g4,g3,g5){if(g4.gutter){g4.node.removeChild(g4.gutter);g4.gutter=null}if(g4.gutterBackground){g4.node.removeChild(g4.gutterBackground);g4.gutterBackground=null}if(g4.line.gutterClass){var gZ=gf(g4);g4.gutterBackground=gG("div",null,"CodeMirror-gutter-background "+g4.line.gutterClass,("left: "+(g6.options.fixedGutter?g5.fixedPos:-g5.gutterTotalWidth)+"px; width: "+(g5.gutterTotalWidth)+"px"));g6.display.input.setUneditable(g4.gutterBackground);gZ.insertBefore(g4.gutterBackground,g4.text)}var g1=g4.line.gutterMarkers;if(g6.options.lineNumbers||g1){var g7=gf(g4);var g2=g4.gutter=gG("div",null,"CodeMirror-gutter-wrapper",("left: "+(g6.options.fixedGutter?g5.fixedPos:-g5.gutterTotalWidth)+"px"));g6.display.input.setUneditable(g2);g7.insertBefore(g2,g4.text);if(g4.line.gutterClass){g2.className+=" "+g4.line.gutterClass}if(g6.options.lineNumbers&&(!g1||!g1["CodeMirror-linenumbers"])){g4.lineNumber=g2.appendChild(gG("div",eQ(g6.options,g3),"CodeMirror-linenumber CodeMirror-gutter-elt",("left: "+(g5.gutterLeft["CodeMirror-linenumbers"])+"px; width: "+(g6.display.lineNumInnerWidth)+"px")))}if(g1){for(var g0=0;g0<g6.options.gutters.length;++g0){var i=g6.options.gutters[g0],g8=g1.hasOwnProperty(i)&&g1[i];if(g8){g2.appendChild(gG("div",[g8],"CodeMirror-gutter-elt",("left: "+(g5.gutterLeft[i])+"px; width: "+(g5.gutterWidth[i])+"px")))}}}}}function aq(i,gZ,g2){if(gZ.alignable){gZ.alignable=null}for(var g1=gZ.node.firstChild,g0=(void 0);g1;g1=g0){g0=g1.nextSibling;if(g1.className=="CodeMirror-linewidget"){gZ.node.removeChild(g1)}}fX(i,gZ,g2)}function aI(i,g0,g1,g2){var gZ=ed(i,g0);g0.text=g0.node=gZ.pre;if(gZ.bgClass){g0.bgClass=gZ.bgClass}if(gZ.textClass){g0.textClass=gZ.textClass}dX(i,g0);dy(i,g0,g1,g2);fX(i,g0,g2);return g0.node}function fX(gZ,g1,g2){gJ(gZ,g1.line,g1,g2,true);if(g1.rest){for(var g0=0;g0<g1.rest.length;g0++){gJ(gZ,g1.rest[g0],g1,g2,false)}}}function gJ(g7,g8,g4,g6,g2){if(!g8.widgets){return}var gZ=gf(g4);for(var g1=0,g5=g8.widgets;g1<g5.length;++g1){var g3=g5[g1],g0=gG("div",[g3.node],"CodeMirror-linewidget");if(!g3.handleMouseEvents){g0.setAttribute("cm-ignore-events","true")}bP(g3,g0,g4,g6);g7.display.input.setUneditable(g0);if(g2&&g3.above){gZ.insertBefore(g0,g4.gutter||g4.text)}else{gZ.appendChild(g0)}ah(g3,"redraw")}}function bP(g1,g0,i,g2){if(g1.noHScroll){(i.alignable||(i.alignable=[])).push(g0);var gZ=g2.wrapperWidth;g0.style.left=g2.fixedPos+"px";if(!g1.coverGutter){gZ-=g2.gutterTotalWidth;g0.style.paddingLeft=g2.gutterTotalWidth+"px"}g0.style.width=gZ+"px"}if(g1.coverGutter){g0.style.zIndex=5;g0.style.position="relative";if(!g1.noHScroll){g0.style.marginLeft=-g2.gutterTotalWidth+"px"}}}function de(g0){if(g0.height!=null){return g0.height}var i=g0.doc.cm;if(!i){return 0}if(!gQ(document.body,g0.node)){var gZ="position: relative;";if(g0.coverGutter){gZ+="margin-left: -"+i.display.gutters.offsetWidth+"px;"}if(g0.noHScroll){gZ+="width: "+i.display.wrapper.clientWidth+"px;"}b3(i.display.measure,gG("div",[g0.node],null,gZ))}return g0.height=g0.node.parentNode.offsetHeight}function bf(gZ,i){for(var g0=N(i);g0!=gZ.wrapper;g0=g0.parentNode){if(!g0||(g0.nodeType==1&&g0.getAttribute("cm-ignore-events")=="true")||(g0.parentNode==gZ.sizer&&g0!=gZ.mover)){return true}}}function fE(i){return i.lineSpace.offsetTop}function bS(i){return i.mover.offsetHeight-i.lineSpace.offsetHeight}function fA(g1){if(g1.cachedPaddingH){return g1.cachedPaddingH}var g0=b3(g1.measure,gG("pre","x"));var i=window.getComputedStyle?window.getComputedStyle(g0):g0.currentStyle;var gZ={left:parseInt(i.paddingLeft),right:parseInt(i.paddingRight)};if(!isNaN(gZ.left)&&!isNaN(gZ.right)){g1.cachedPaddingH=gZ}return gZ}function c9(i){return d0-i.display.nativeBarWidth}function dE(i){return i.display.scroller.clientWidth-c9(i)-i.display.barWidth}function db(i){return i.display.scroller.clientHeight-c9(i)-i.display.barHeight}function cv(g6,g2,g5){var g1=g6.options.lineWrapping;var g3=g1&&dE(g6);if(!g2.measure.heights||g1&&g2.measure.width!=g3){var g4=g2.measure.heights=[];if(g1){g2.measure.width=g3;var g8=g2.text.firstChild.getClientRects();for(var gZ=0;gZ<g8.length-1;gZ++){var g7=g8[gZ],g0=g8[gZ+1];if(Math.abs(g7.bottom-g0.bottom)>2){g4.push((g7.bottom+g0.top)/2-g5.top)}}}g4.push(g5.bottom-g5.top)}}function cJ(g1,gZ,g2){if(g1.line==gZ){return{map:g1.measure.map,cache:g1.measure.cache}}for(var g0=0;g0<g1.rest.length;g0++){if(g1.rest[g0]==gZ){return{map:g1.measure.maps[g0],cache:g1.measure.caches[g0]}}}for(var g3=0;g3<g1.rest.length;g3++){if(bX(g1.rest[g3])>g2){return{map:g1.measure.maps[g3],cache:g1.measure.caches[g3],before:true}}}}function di(i,g0){g0=y(g0);var g2=bX(g0);var gZ=i.display.externalMeasured=new bE(i.doc,g0,g2);gZ.lineN=g2;var g1=gZ.built=fm(i,gZ);gZ.text=g1.pre;b3(i.display.lineMeasure,g1.pre);return gZ}function eC(i,gZ,g1,g0){return E(i,a9(i,gZ),g1,g0)}function fH(i,g0){if(g0>=i.display.viewFrom&&g0<i.display.viewTo){return i.display.view[dJ(i,g0)]}var gZ=i.display.externalMeasured;if(gZ&&g0>=gZ.lineN&&g0<gZ.lineN+gZ.size){return gZ}}function a9(i,g0){var g1=bX(g0);var gZ=fH(i,g1);if(gZ&&!gZ.text){gZ=null}else{if(gZ&&gZ.changes){ae(i,gZ,g1,fI(i));i.curOp.forceUpdate=true}}if(!gZ){gZ=di(i,g0)}var g2=cJ(gZ,g0,g1);return{line:g0,view:gZ,rect:null,map:g2.map,cache:g2.cache,before:g2.before,hasHeights:false}}function E(i,g4,g2,gZ,g1){if(g4.before){g2=-1}var g0=g2+(gZ||""),g3;if(g4.cache.hasOwnProperty(g0)){g3=g4.cache[g0]}else{if(!g4.rect){g4.rect=g4.view.text.getBoundingClientRect()}if(!g4.hasHeights){cv(i,g4.view,g4.rect);g4.hasHeights=true}g3=k(i,g4,g2,gZ);if(!g3.bogus){g4.cache[g0]=g3}}return{left:g3.left,right:g3.right,top:g1?g3.rtop:g3.top,bottom:g1?g3.rbottom:g3.bottom}}var e1={left:0,right:0,top:0,bottom:0};function aN(g0,gZ,g6){var g2,g1,g4,g7,g3,g8;for(var g5=0;g5<g0.length;g5+=3){g3=g0[g5];g8=g0[g5+1];if(gZ<g3){g1=0;g4=1;g7="left"}else{if(gZ<g8){g1=gZ-g3;g4=g1+1}else{if(g5==g0.length-3||gZ==g8&&g0[g5+3]>gZ){g4=g8-g3;g1=g4-1;if(gZ>=g8){g7="right"}}}}if(g1!=null){g2=g0[g5+2];if(g3==g8&&g6==(g2.insertLeft?"left":"right")){g7=g6}if(g6=="left"&&g1==0){while(g5&&g0[g5-2]==g0[g5-3]&&g0[g5-1].insertLeft){g2=g0[(g5-=3)+2];g7="left"}}if(g6=="right"&&g1==g8-g3){while(g5<g0.length-3&&g0[g5+3]==g0[g5+4]&&!g0[g5+5].insertLeft){g2=g0[(g5+=3)+2];g7="right"}}break}}return{node:g2,start:g1,end:g4,collapse:g7,coverStart:g3,coverEnd:g8}}function fn(g0,gZ){var g2=e1;if(gZ=="left"){for(var g1=0;g1<g0.length;g1++){if((g2=g0[g1]).left!=g2.right){break}}}else{for(var g3=g0.length-1;g3>=0;g3--){if((g2=g0[g3]).left!=g2.right){break}}}return g2}function k(g7,hh,ha,g4){var g8=aN(hh.map,ha,g4);var hf=g8.node,g3=g8.start,g2=g8.end,gZ=g8.collapse;var g0;if(hf.nodeType==3){for(var g5=0;g5<4;g5++){while(g3&&fT(hh.line.text.charAt(g8.coverStart+g3))){--g3}while(g8.coverStart+g2<g8.coverEnd&&fT(hh.line.text.charAt(g8.coverStart+g2))){++g2}if(d1&&l<9&&g3==0&&g2==g8.coverEnd-g8.coverStart){g0=hf.parentNode.getBoundingClientRect()}else{g0=fn(cB(hf,g3,g2).getClientRects(),g4)}if(g0.left||g0.right||g3==0){break}g2=g3;g3=g3-1;gZ="right"}if(d1&&l<11){g0=fh(g7.display.measure,g0)}}else{if(g3>0){gZ=g4="right"}var g1;if(g7.options.lineWrapping&&(g1=hf.getClientRects()).length>1){g0=g1[g4=="right"?g1.length-1:0]}else{g0=hf.getBoundingClientRect()}}if(d1&&l<9&&!g3&&(!g0||!g0.left&&!g0.right)){var g6=hf.parentNode.getClientRects()[0];if(g6){g0={left:g6.left,right:g6.left+dU(g7.display),top:g6.top,bottom:g6.bottom}}else{g0=e1}}var hd=g0.top-hh.rect.top,hb=g0.bottom-hh.rect.top;var hj=(hd+hb)/2;var hi=hh.view.measure.heights;var hg=0;for(;hg<hi.length-1;hg++){if(hj<hi[hg]){break}}var he=hg?hi[hg-1]:0,hc=hi[hg];var g9={left:(gZ=="right"?g0.right:g0.left)-hh.rect.left,right:(gZ=="left"?g0.left:g0.right)-hh.rect.left,top:he,bottom:hc};if(!g0.left&&!g0.right){g9.bogus=true}if(!g7.options.singleCursorHeightPerLine){g9.rtop=hd;g9.rbottom=hb}return g9}function fh(g0,g1){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!aO(g0)){return g1}var gZ=screen.logicalXDPI/screen.deviceXDPI;var i=screen.logicalYDPI/screen.deviceYDPI;return{left:g1.left*gZ,right:g1.right*gZ,top:g1.top*i,bottom:g1.bottom*i}}function ax(g0){if(g0.measure){g0.measure.cache={};g0.measure.heights=null;if(g0.rest){for(var gZ=0;gZ<g0.rest.length;gZ++){g0.measure.caches[gZ]={}}}}}function aS(gZ){gZ.display.externalMeasure=null;el(gZ.display.lineMeasure);for(var g0=0;g0<gZ.display.view.length;g0++){ax(gZ.display.view[g0])}}function am(i){aS(i);i.display.cachedCharWidth=i.display.cachedTextHeight=i.display.cachedPaddingH=null;if(!i.options.lineWrapping){i.display.maxLineChanged=true}i.display.lineNumChars=null}function cK(){if(dv&&aQ){return -(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft))}return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function cI(){if(dv&&aQ){return -(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop))}return window.pageYOffset||(document.documentElement||document.body).scrollTop}function fk(g6,g3,g5,g0,g2){if(!g2&&g3.widgets){for(var g1=0;g1<g3.widgets.length;++g1){if(g3.widgets[g1].above){var g8=de(g3.widgets[g1]);g5.top+=g8;g5.bottom+=g8}}}if(g0=="line"){return g5}if(!g0){g0="local"}var g4=bW(g3);if(g0=="local"){g4+=fE(g6.display)}else{g4-=g6.display.viewOffset}if(g0=="page"||g0=="window"){var gZ=g6.display.lineSpace.getBoundingClientRect();g4+=gZ.top+(g0=="window"?0:cI());var g7=gZ.left+(g0=="window"?0:cK());g5.left+=g7;g5.right+=g7}g5.top+=g4;g5.bottom+=g4;return g5}function gU(gZ,g2,g0){if(g0=="div"){return g2}var g4=g2.left,g3=g2.top;if(g0=="page"){g4-=cK();g3-=cI()}else{if(g0=="local"||!g0){var g1=gZ.display.sizer.getBoundingClientRect();g4+=g1.left;g3+=g1.top}}var i=gZ.display.lineSpace.getBoundingClientRect();return{left:g4-i.left,top:g3-i.top}}function c1(i,g2,g1,g0,gZ){if(!g0){g0=fK(i.doc,g2.line)}return fk(i,g0,eC(i,g0,g2.ch,gZ),g1)}function ec(g9,g7,g0,g4,hb,g5){g4=g4||fK(g9.doc,g7.line);if(!hb){hb=a9(g9,g4)}function g2(he,hd){var hc=E(g9,hb,he,hd?"right":"left",g5);if(hd){hc.left=hc.right}else{hc.right=hc.left}return fk(g9,g4,hc,g0)}var g3=a(g4,g9.doc.direction),i=g7.ch,g8=g7.sticky;if(i>=g4.text.length){i=g4.text.length;g8="before"}else{if(i<=0){i=0;g8="after"}}if(!g3){return g2(g8=="before"?i-1:i,g8=="before")}function ha(hf,hc,hg){var hd=g3[hc],he=(hd.level%2)!=0;return g2(hg?hf-1:hf,he!=hg)}var gZ=aK(g3,i,g8);var g6=fy;var g1=ha(i,gZ,g8=="before");if(g6!=null){g1.other=ha(i,g6,g8!="before")}return g1}function dY(i,g2){var g1=0;g2=gi(i.doc,g2);if(!i.options.lineWrapping){g1=dU(i.display)*g2.ch}var gZ=fK(i.doc,g2.line);var g0=bW(gZ)+fE(i.display);return{left:g1,right:g1,top:g0,bottom:g0+gZ.height}}function gE(i,gZ,g1,g0,g3){var g2=Y(i,gZ,g1);g2.xRel=g3;if(g0){g2.outside=true}return g2}function gp(g5,g2,g1){var g4=g5.doc;g1+=g5.display.viewOffset;if(g1<0){return gE(g4.first,0,null,true,-1)}var g0=bR(g4,g1),g6=g4.first+g4.size-1;if(g0>g6){return gE(g4.first+g4.size-1,fK(g4,g6).text.length,null,true,1)}if(g2<0){g2=0}var gZ=fK(g4,g0);for(;;){var g7=df(g5,gZ,g0,g2,g1);var g3=eU(gZ);var i=g3&&g3.find(0,true);if(g3&&(g7.ch>i.from.ch||g7.ch==i.from.ch&&g7.xRel>0)){g0=bX(gZ=i.to.line)}else{return g7}}}function bt(i,g0,g3,g4){var g2=function(g5){return fk(i,g0,E(i,g3,g5),"line")};var gZ=g0.text.length;var g1=cC(function(g5){return g2(g5-1).bottom<=g4},gZ,0);gZ=cC(function(g5){return g2(g5).top>g4},g1,gZ);return{begin:g1,end:gZ}}function bs(i,gZ,g1,g2){var g0=fk(i,gZ,E(i,g1,g2),"line").top;return bt(i,gZ,g1,g0)}function df(g2,i,g5,g4,g3){g3-=bW(i);var hf=0,gZ=i.text.length;var g8=a9(g2,i);var g1;var hd=a(i,g2.doc.direction);if(hd){if(g2.options.lineWrapping){var hc;((hc=bt(g2,i,g8,g3),hf=hc.begin,gZ=hc.end,hc))}g1=new Y(g5,hf);var ha=ec(g2,g1,"line",i,g8).left;var hb=ha<g4?1:-1;var g6,g9=ha-g4,g0;do{g6=g9;g0=g1;g1=u(g2,i,g1,hb);if(g1==null||g1.ch<hf||gZ<=(g1.sticky=="before"?g1.ch-1:g1.ch)){g1=g0;break}g9=ec(g2,g1,"line",i,g8).left-g4}while((hb<0)!=(g9<0)&&(Math.abs(g9)<=Math.abs(g6)));if(Math.abs(g9)>Math.abs(g6)){if((g9<0)==(g6<0)){throw new Error("Broke out of infinite loop in coordsCharInner")}g1=g0}}else{var g7=cC(function(hg){var hh=fk(g2,i,E(g2,g8,hg),"line");if(hh.top>g3){gZ=Math.min(hg,gZ);return true}else{if(hh.bottom<=g3){return false}else{if(hh.left>g4){return true}else{if(hh.right<g4){return false}else{return(g4-hh.left<hh.right-g4)}}}}},hf,gZ);g7=eF(i.text,g7,1);g1=new Y(g5,g7,g7==gZ?"before":"after")}var he=ec(g2,g1,"line",i,g8);if(g3<he.top||he.bottom<g3){g1.outside=true}g1.xRel=g4<he.left?-1:(g4>he.right?1:0);return g1}var aJ;function a2(g1){if(g1.cachedTextHeight!=null){return g1.cachedTextHeight}if(aJ==null){aJ=gG("pre");for(var g0=0;g0<49;++g0){aJ.appendChild(document.createTextNode("x"));aJ.appendChild(gG("br"))}aJ.appendChild(document.createTextNode("x"))}b3(g1.measure,aJ);var gZ=aJ.offsetHeight/50;if(gZ>3){g1.cachedTextHeight=gZ}el(g1.measure);return gZ||1}function dU(g2){if(g2.cachedCharWidth!=null){return g2.cachedCharWidth}var i=gG("span","xxxxxxxxxx");var g1=gG("pre",[i]);b3(g2.measure,g1);var g0=i.getBoundingClientRect(),gZ=(g0.right-g0.left)/10;if(gZ>2){g2.cachedCharWidth=gZ}return gZ||10}function fI(gZ){var g4=gZ.display,g2={},g1={};var g3=g4.gutters.clientLeft;for(var g5=g4.gutters.firstChild,g0=0;g5;g5=g5.nextSibling,++g0){g2[gZ.options.gutters[g0]]=g5.offsetLeft+g5.clientLeft+g3;g1[gZ.options.gutters[g0]]=g5.clientWidth}return{fixedPos:eg(g4),gutterTotalWidth:g4.gutters.offsetWidth,gutterLeft:g2,gutterWidth:g1,wrapperWidth:g4.wrapper.clientWidth}}function eg(i){return i.scroller.getBoundingClientRect().left-i.sizer.getBoundingClientRect().left}function bi(i){var g0=a2(i.display),gZ=i.options.lineWrapping;var g1=gZ&&Math.max(5,i.display.scroller.clientWidth/dU(i.display)-3);return function(g3){if(f0(i.doc,g3)){return 0}var g2=0;if(g3.widgets){for(var g4=0;g4<g3.widgets.length;g4++){if(g3.widgets[g4].height){g2+=g3.widgets[g4].height}}}if(gZ){return g2+(Math.ceil(g3.text.length/g1)||1)*g0}else{return g2+g0}}}function ab(i){var g0=i.doc,gZ=bi(i);g0.iter(function(g1){var g2=gZ(g1);if(g2!=g1.height){gL(g1,g2)}})}function cD(g7,g2,gZ,g0){var g3=g7.display;if(!gZ&&N(g2).getAttribute("cm-not-content")=="true"){return null}var g6,g4,i=g3.lineSpace.getBoundingClientRect();try{g6=g2.clientX-i.left;g4=g2.clientY-i.top}catch(g2){return null}var g5=gp(g7,g6,g4),g8;if(g0&&g5.xRel==1&&(g8=fK(g7.doc,g5.line).text).length==g5.ch){var g1=b2(g8,g8.length,g7.options.tabSize)-g8.length;g5=Y(g5.line,Math.max(0,Math.round((g6-fA(g7.display).left)/dU(g7.display))-g1))}return g5}function dJ(gZ,g2){if(g2>=gZ.display.viewTo){return null}g2-=gZ.display.viewFrom;if(g2<0){return null}var g0=gZ.display.view;for(var g1=0;g1<g0.length;g1++){g2-=g0[g1].size;if(g2<0){return g1}}}function bM(i){i.display.input.showSelection(i.display.input.prepareSelection())}function gg(g6,gZ){var g5=g6.doc,g7={};var g4=g7.cursors=document.createDocumentFragment();var g0=g7.selection=document.createDocumentFragment();for(var g2=0;g2<g5.sel.ranges.length;g2++){if(gZ===false&&g2==g5.sel.primIndex){continue}var g3=g5.sel.ranges[g2];if(g3.from().line>=g6.display.viewTo||g3.to().line<g6.display.viewFrom){continue}var g1=g3.empty();if(g1||g6.options.showCursorWhenSelecting){B(g6,g3.head,g4)}if(!g1){bN(g6,g3,g0)}}return g7}function B(i,g1,g0){var g3=ec(i,g1,"div",null,null,!i.options.singleCursorHeightPerLine);var g2=g0.appendChild(gG("div","\u00a0","CodeMirror-cursor"));g2.style.left=g3.left+"px";g2.style.top=g3.top+"px";g2.style.height=Math.max(0,g3.bottom-g3.top)*i.options.cursorHeight+"px";if(g3.other){var gZ=g0.appendChild(gG("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor"));gZ.style.display="";gZ.style.left=g3.other.left+"px";gZ.style.top=g3.other.top+"px";gZ.style.height=(g3.other.bottom-g3.other.top)*0.85+"px"}}function bN(g2,g8,g3){var hb=g2.display,hf=g2.doc;var i=document.createDocumentFragment();var g7=fA(g2.display),g1=g7.left;var hc=Math.max(hb.sizerWidth,dE(g2)-hb.sizer.offsetLeft)-g7.right;function g9(hj,hi,hh,hg){if(hi<0){hi=0}hi=Math.round(hi);hg=Math.round(hg);i.appendChild(gG("div",null,"CodeMirror-selected",("position: absolute; left: "+hj+"px;\n                             top: "+hi+"px; width: "+(hh==null?hc-hj:hh)+"px;\n                             height: "+(hg-hi)+"px")))}function gZ(hh,hj,hm){var hi=fK(hf,hh);var hk=hi.text.length;var hn,hg;function hl(hp,ho){return c1(g2,Y(hh,hp),"div",hi,ho)}eo(a(hi,hf.direction),hj||0,hm==null?hk:hm,function(hv,hu,ho){var hr=hl(hv,"left"),hs,ht,hq;if(hv==hu){hs=hr;ht=hq=hr.left}else{hs=hl(hu-1,"right");if(ho=="rtl"){var hp=hr;hr=hs;hs=hp}ht=hr.left;hq=hs.right}if(hj==null&&hv==0){ht=g1}if(hs.top-hr.top>3){g9(ht,hr.top,null,hr.bottom);ht=g1;if(hr.bottom<hs.top){g9(ht,hr.bottom,null,hs.top)}}if(hm==null&&hu==hk){hq=hc}if(!hn||hr.top<hn.top||hr.top==hn.top&&hr.left<hn.left){hn=hr}if(!hg||hs.bottom>hg.bottom||hs.bottom==hg.bottom&&hs.right>hg.right){hg=hs}if(ht<g1+1){ht=g1}g9(ht,hs.top,hq-ht,hs.bottom)});return{start:hn,end:hg}}var he=g8.from(),hd=g8.to();if(he.line==hd.line){gZ(he.line,he.ch,hd.ch)}else{var g0=fK(hf,he.line),g5=fK(hf,hd.line);var g4=y(g0)==y(g5);var g6=gZ(he.line,he.ch,g4?g0.text.length+1:null).end;var ha=gZ(hd.line,g4?0:null,hd.ch).start;if(g4){if(g6.top<ha.top-2){g9(g6.right,g6.top,null,g6.bottom);g9(g1,ha.top,ha.left,ha.bottom)}else{g9(g6.right,g6.top,ha.left-g6.right,g6.bottom)}}if(g6.bottom<ha.top){g9(g1,g6.bottom,null,ha.top)}}g3.appendChild(i)}function p(i){if(!i.state.focused){return}var g0=i.display;clearInterval(g0.blinker);var gZ=true;g0.cursorDiv.style.visibility="";if(i.options.cursorBlinkRate>0){g0.blinker=setInterval(function(){return g0.cursorDiv.style.visibility=(gZ=!gZ)?"":"hidden"},i.options.cursorBlinkRate)}else{if(i.options.cursorBlinkRate<0){g0.cursorDiv.style.visibility="hidden"}}}function s(i){if(!i.state.focused){i.display.input.focus();cR(i)}}function an(i){i.state.delayingBlurEvent=true;setTimeout(function(){if(i.state.delayingBlurEvent){i.state.delayingBlurEvent=false;aZ(i)}},100)}function cR(i,gZ){if(i.state.delayingBlurEvent){i.state.delayingBlurEvent=false}if(i.options.readOnly=="nocursor"){return}if(!i.state.focused){aH(i,"focus",i,gZ);i.state.focused=true;f7(i.display.wrapper,"CodeMirror-focused");if(!i.curOp&&i.display.selForContextMenu!=i.doc.sel){i.display.input.reset();if(dg){setTimeout(function(){return i.display.input.reset(true)},20)}}i.display.input.receivedFocus()}p(i)}function aZ(i,gZ){if(i.state.delayingBlurEvent){return}if(i.state.focused){aH(i,"blur",i,gZ);i.state.focused=false;h(i.display.wrapper,"CodeMirror-focused")}clearInterval(i.display.blinker);setTimeout(function(){if(!i.state.focused){i.display.shift=false}},150)}function bd(g6){var g4=g6.display;var g0=g4.lineDiv.offsetTop;for(var g1=0;g1<g4.view.length;g1++){var g7=g4.view[g1],g8=(void 0);if(g7.hidden){continue}if(d1&&l<8){var g3=g7.node.offsetTop+g7.node.offsetHeight;g8=g3-g0;g0=g3}else{var g2=g7.node.getBoundingClientRect();g8=g2.bottom-g2.top}var g5=g7.line.height-g8;if(g8<2){g8=a2(g4)}if(g5>0.001||g5<-0.001){gL(g7.line,g8);cn(g7.line);if(g7.rest){for(var gZ=0;gZ<g7.rest.length;gZ++){cn(g7.rest[gZ])}}}}}function cn(gZ){if(gZ.widgets){for(var g0=0;g0<gZ.widgets.length;++g0){gZ.widgets[g0].height=gZ.widgets[g0].node.parentNode.offsetHeight}}}function ci(g1,g5,g0){var g2=g0&&g0.top!=null?Math.max(0,g0.top):g1.scroller.scrollTop;g2=Math.floor(g2-fE(g1));var i=g0&&g0.bottom!=null?g0.bottom:g2+g1.wrapper.clientHeight;var g3=bR(g5,g2),g4=bR(g5,i);if(g0&&g0.ensure){var gZ=g0.ensure.from.line,g6=g0.ensure.to.line;if(gZ<g3){g3=gZ;g4=bR(g5,bW(fK(g5,gZ))+g1.wrapper.clientHeight)}else{if(Math.min(g6,g5.lastLine())>=g4){g3=bR(g5,bW(fK(g5,g6))-g1.wrapper.clientHeight);g4=g6}}}return{from:g3,to:Math.max(g4,g3+1)}}function e5(g7){var g5=g7.display,g6=g5.view;if(!g5.alignWidgets&&(!g5.gutters.firstChild||!g7.options.fixedGutter)){return}var g3=eg(g5)-g5.scroller.scrollLeft+g7.doc.scrollLeft;var gZ=g5.gutters.offsetWidth,g0=g3+"px";for(var g2=0;g2<g6.length;g2++){if(!g6[g2].hidden){if(g7.options.fixedGutter){if(g6[g2].gutter){g6[g2].gutter.style.left=g0}if(g6[g2].gutterBackground){g6[g2].gutterBackground.style.left=g0}}var g4=g6[g2].alignable;if(g4){for(var g1=0;g1<g4.length;g1++){g4[g1].style.left=g0}}}}if(g7.options.fixedGutter){g5.gutters.style.left=(g3+gZ)+"px"}}function ep(i){if(!i.options.lineNumbers){return false}var g3=i.doc,gZ=eQ(i.options,g3.first+g3.size-1),g2=i.display;if(gZ.length!=g2.lineNumChars){var g4=g2.measure.appendChild(gG("div",[gG("div",gZ)],"CodeMirror-linenumber CodeMirror-gutter-elt"));var g0=g4.firstChild.offsetWidth,g1=g4.offsetWidth-g0;g2.lineGutter.style.width="";g2.lineNumInnerWidth=Math.max(g0,g2.lineGutter.offsetWidth-g1)+1;g2.lineNumWidth=g2.lineNumInnerWidth+g1;g2.lineNumChars=g2.lineNumInnerWidth?gZ.length:-1;g2.lineGutter.style.width=g2.lineNumWidth+"px";dk(i);return true}return false}function eq(gZ,g1){if(aV(gZ,"scrollCursorIntoView")){return}var g3=gZ.display,g0=g3.sizer.getBoundingClientRect(),i=null;if(g1.top+g0.top<0){i=true}else{if(g1.bottom+g0.top>(window.innerHeight||document.documentElement.clientHeight)){i=false}}if(i!=null&&!fY){var g2=gG("div","\u200b",null,("position: absolute;\n                         top: "+(g1.top-g3.viewOffset-fE(gZ.display))+"px;\n                         height: "+(g1.bottom-g1.top+c9(gZ)+g3.barHeight)+"px;\n                         left: "+(g1.left)+"px; width: "+(Math.max(2,g1.right-g1.left))+"px;"));gZ.display.lineSpace.appendChild(g2);g2.scrollIntoView(i);gZ.display.lineSpace.removeChild(g2)}}function F(g9,g6,g2,g1){if(g1==null){g1=0}var g7;for(var g3=0;g3<5;g3++){var g4=false;var g8=ec(g9,g6);var i=!g2||g2==g6?g8:ec(g9,g2);g7={left:Math.min(g8.left,i.left),top:Math.min(g8.top,i.top)-g1,right:Math.max(g8.left,i.left),bottom:Math.max(g8.bottom,i.bottom)+g1};var g0=J(g9,g7);var g5=g9.doc.scrollTop,gZ=g9.doc.scrollLeft;if(g0.scrollTop!=null){A(g9,g0.scrollTop);if(Math.abs(g9.doc.scrollTop-g5)>1){g4=true}}if(g0.scrollLeft!=null){bO(g9,g0.scrollLeft);if(Math.abs(g9.doc.scrollLeft-gZ)>1){g4=true}}if(!g4){break}}return g7}function G(i,gZ){var g0=J(i,gZ);if(g0.scrollTop!=null){A(i,g0.scrollTop)}if(g0.scrollLeft!=null){bO(i,g0.scrollLeft)}}function J(g7,g6){var g4=g7.display,g2=a2(g7.display);if(g6.top<0){g6.top=0}var g0=g7.curOp&&g7.curOp.scrollTop!=null?g7.curOp.scrollTop:g4.scroller.scrollTop;var g9=db(g7),hb={};if(g6.bottom-g6.top>g9){g6.bottom=g6.top+g9}var gZ=g7.doc.height+bS(g4);var i=g6.top<g2,g3=g6.bottom>gZ-g2;if(g6.top<g0){hb.scrollTop=i?0:g6.top}else{if(g6.bottom>g0+g9){var g5=Math.min(g6.top,(g3?gZ:g6.bottom)-g9);if(g5!=g0){hb.scrollTop=g5}}}var ha=g7.curOp&&g7.curOp.scrollLeft!=null?g7.curOp.scrollLeft:g4.scroller.scrollLeft;var g8=dE(g7)-(g7.options.fixedGutter?g4.gutters.offsetWidth:0);var g1=g6.right-g6.left>g8;if(g1){g6.right=g6.left+g8}if(g6.left<10){hb.scrollLeft=0}else{if(g6.left<ha){hb.scrollLeft=Math.max(0,g6.left-(g1?0:10))}else{if(g6.right>g8+ha-3){hb.scrollLeft=g6.right+(g1?0:10)-g8}}}return hb}function cY(i,gZ){if(gZ==null){return}f9(i);i.curOp.scrollTop=(i.curOp.scrollTop==null?i.doc.scrollTop:i.curOp.scrollTop)+gZ}function gc(i){f9(i);var gZ=i.getCursor(),g1=gZ,g0=gZ;if(!i.options.lineWrapping){g1=gZ.ch?Y(gZ.line,gZ.ch-1):gZ;g0=Y(gZ.line,gZ.ch+1)}i.curOp.scrollToPos={from:g1,to:g0,margin:i.options.cursorScrollMargin}}function ff(gZ,i,g0){if(i!=null||g0!=null){f9(gZ)}if(i!=null){gZ.curOp.scrollLeft=i}if(g0!=null){gZ.curOp.scrollTop=g0}}function cq(i,gZ){f9(i);i.curOp.scrollToPos=gZ}function f9(i){var gZ=i.curOp.scrollToPos;if(gZ){i.curOp.scrollToPos=null;var g1=dY(i,gZ.from),g0=dY(i,gZ.to);b0(i,g1,g0,gZ.margin)}}function b0(i,g2,g1,g0){var gZ=J(i,{left:Math.min(g2.left,g1.left),top:Math.min(g2.top,g1.top)-g0,right:Math.max(g2.right,g1.right),bottom:Math.max(g2.bottom,g1.bottom)+g0});ff(i,gZ.scrollLeft,gZ.scrollTop)}function A(i,gZ){if(Math.abs(i.doc.scrollTop-gZ)<2){return}if(!cE){eb(i,{top:gZ})}Q(i,gZ,true);if(cE){eb(i)}ez(i,100)}function Q(i,g0,gZ){g0=Math.min(i.display.scroller.scrollHeight-i.display.scroller.clientHeight,g0);if(i.display.scroller.scrollTop==g0&&!gZ){return}i.doc.scrollTop=g0;i.display.scrollbars.setScrollTop(g0);if(i.display.scroller.scrollTop!=g0){i.display.scroller.scrollTop=g0}}function bO(i,g1,g0,gZ){g1=Math.min(g1,i.display.scroller.scrollWidth-i.display.scroller.clientWidth);if((g0?g1==i.doc.scrollLeft:Math.abs(i.doc.scrollLeft-g1)<2)&&!gZ){return}i.doc.scrollLeft=g1;e5(i);if(i.display.scroller.scrollLeft!=g1){i.display.scroller.scrollLeft=g1}i.display.scrollbars.setScrollLeft(g1)}function dR(i){var g1=i.display,g0=g1.gutters.offsetWidth;var gZ=Math.round(i.doc.height+bS(i.display));return{clientHeight:g1.scroller.clientHeight,viewHeight:g1.wrapper.clientHeight,scrollWidth:g1.scroller.scrollWidth,clientWidth:g1.scroller.clientWidth,viewWidth:g1.wrapper.clientWidth,barLeft:i.options.fixedGutter?g0:0,docHeight:gZ,scrollHeight:gZ+c9(i)+g1.barHeight,nativeBarWidth:g1.nativeBarWidth,gutterWidth:g0}}var dD=function(g0,gZ,i){this.cm=i;var g1=this.vert=gG("div",[gG("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar");var g2=this.horiz=gG("div",[gG("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");g0(g1);g0(g2);b8(g1,"scroll",function(){if(g1.clientHeight){gZ(g1.scrollTop,"vertical")}});b8(g2,"scroll",function(){if(g2.clientWidth){gZ(g2.scrollLeft,"horizontal")}});this.checkedZeroWidth=false;if(d1&&l<8){this.horiz.style.minHeight=this.vert.style.minWidth="18px"}};dD.prototype.update=function(g1){var g2=g1.scrollWidth>g1.clientWidth+1;var g0=g1.scrollHeight>g1.clientHeight+1;var g3=g1.nativeBarWidth;if(g0){this.vert.style.display="block";this.vert.style.bottom=g2?g3+"px":"0";var gZ=g1.viewHeight-(g2?g3:0);this.vert.firstChild.style.height=Math.max(0,g1.scrollHeight-g1.clientHeight+gZ)+"px"}else{this.vert.style.display="";this.vert.firstChild.style.height="0"}if(g2){this.horiz.style.display="block";this.horiz.style.right=g0?g3+"px":"0";this.horiz.style.left=g1.barLeft+"px";var i=g1.viewWidth-g1.barLeft-(g0?g3:0);this.horiz.firstChild.style.width=Math.max(0,g1.scrollWidth-g1.clientWidth+i)+"px"}else{this.horiz.style.display="";this.horiz.firstChild.style.width="0"}if(!this.checkedZeroWidth&&g1.clientHeight>0){if(g3==0){this.zeroWidthHack()}this.checkedZeroWidth=true}return{right:g0?g3:0,bottom:g2?g3:0}};dD.prototype.setScrollLeft=function(i){if(this.horiz.scrollLeft!=i){this.horiz.scrollLeft=i}if(this.disableHoriz){this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")}};dD.prototype.setScrollTop=function(i){if(this.vert.scrollTop!=i){this.vert.scrollTop=i}if(this.disableVert){this.enableZeroWidthBar(this.vert,this.disableVert,"vert")}};dD.prototype.zeroWidthHack=function(){var i=cj&&!dn?"12px":"18px";this.horiz.style.height=this.vert.style.width=i;this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none";this.disableHoriz=new gY;this.disableVert=new gY};dD.prototype.enableZeroWidthBar=function(g0,i,gZ){g0.style.pointerEvents="auto";function g1(){var g3=g0.getBoundingClientRect();var g2=gZ=="vert"?document.elementFromPoint(g3.right-1,(g3.top+g3.bottom)/2):document.elementFromPoint((g3.right+g3.left)/2,g3.bottom-1);if(g2!=g0){g0.style.pointerEvents="none"}else{i.set(1000,g1)}}i.set(1000,g1)};dD.prototype.clear=function(){var i=this.horiz.parentNode;i.removeChild(this.horiz);i.removeChild(this.vert)};var fz=function(){};fz.prototype.update=function(){return{bottom:0,right:0}};fz.prototype.setScrollLeft=function(){};fz.prototype.setScrollTop=function(){};fz.prototype.clear=function(){};function ft(g1,g3){if(!g3){g3=dR(g1)}var g0=g1.display.barWidth,gZ=g1.display.barHeight;aY(g1,g3);for(var g2=0;g2<4&&g0!=g1.display.barWidth||gZ!=g1.display.barHeight;g2++){if(g0!=g1.display.barWidth&&g1.options.lineWrapping){bd(g1)}aY(g1,dR(g1));g0=g1.display.barWidth;gZ=g1.display.barHeight}}function aY(i,gZ){var g1=i.display;var g0=g1.scrollbars.update(gZ);g1.sizer.style.paddingRight=(g1.barWidth=g0.right)+"px";g1.sizer.style.paddingBottom=(g1.barHeight=g0.bottom)+"px";g1.heightForcer.style.borderBottom=g0.bottom+"px solid transparent";if(g0.right&&g0.bottom){g1.scrollbarFiller.style.display="block";g1.scrollbarFiller.style.height=g0.bottom+"px";g1.scrollbarFiller.style.width=g0.right+"px"}else{g1.scrollbarFiller.style.display=""}if(g0.bottom&&i.options.coverGutterNextToScrollbar&&i.options.fixedGutter){g1.gutterFiller.style.display="block";g1.gutterFiller.style.height=g0.bottom+"px";g1.gutterFiller.style.width=gZ.gutterWidth+"px"}else{g1.gutterFiller.style.display=""}}var br={"native":dD,"null":fz};function aG(i){if(i.display.scrollbars){i.display.scrollbars.clear();if(i.display.scrollbars.addClass){h(i.display.wrapper,i.display.scrollbars.addClass)}}i.display.scrollbars=new br[i.options.scrollbarStyle](function(gZ){i.display.wrapper.insertBefore(gZ,i.display.scrollbarFiller);b8(gZ,"mousedown",function(){if(i.state.focused){setTimeout(function(){return i.display.input.focus()},0)}});gZ.setAttribute("cm-not-content","true")},function(g0,gZ){if(gZ=="horizontal"){bO(i,g0)}else{A(i,g0)}},i);if(i.display.scrollbars.addClass){f7(i.display.wrapper,i.display.scrollbars.addClass)}}var eu=0;function c0(i){i.curOp={cm:i,viewChanged:false,startHeight:i.doc.height,forceUpdate:false,updateInput:null,typing:false,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:false,updateMaxLine:false,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:false,id:++eu};eX(i.curOp)}function ap(i){var gZ=i.curOp;b9(gZ,function(g1){for(var g0=0;g0<g1.ops.length;g0++){g1.ops[g0].cm.curOp=null}c2(g1)})}function c2(g4){var g0=g4.ops;for(var gZ=0;gZ<g0.length;gZ++){ch(g0[gZ])}for(var g5=0;g5<g0.length;g5++){at(g0[g5])}for(var g3=0;g3<g0.length;g3++){cd(g0[g3])}for(var g2=0;g2<g0.length;g2++){ar(g0[g2])}for(var g1=0;g1<g0.length;g1++){fv(g0[g1])}}function ch(g0){var i=g0.cm,gZ=i.display;L(i);if(g0.updateMaxLine){f(i)}g0.mustUpdate=g0.viewChanged||g0.forceUpdate||g0.scrollTop!=null||g0.scrollToPos&&(g0.scrollToPos.from.line<gZ.viewFrom||g0.scrollToPos.to.line>=gZ.viewTo)||gZ.maxLineChanged&&i.options.lineWrapping;g0.update=g0.mustUpdate&&new aM(i,g0.mustUpdate&&{top:g0.scrollTop,ensure:g0.scrollToPos},g0.forceUpdate)}function at(i){i.updatedDisplay=i.mustUpdate&&D(i.cm,i.update)}function cd(g0){var i=g0.cm,gZ=i.display;if(g0.updatedDisplay){bd(i)}g0.barMeasure=dR(i);if(gZ.maxLineChanged&&!i.options.lineWrapping){g0.adjustWidthTo=eC(i,gZ.maxLine,gZ.maxLine.text.length).left+3;i.display.sizerWidth=g0.adjustWidthTo;g0.barMeasure.scrollWidth=Math.max(gZ.scroller.clientWidth,gZ.sizer.offsetLeft+g0.adjustWidthTo+c9(i)+i.display.barWidth);g0.maxScrollLeft=Math.max(0,gZ.sizer.offsetLeft+g0.adjustWidthTo-dE(i))}if(g0.updatedDisplay||g0.selectionChanged){g0.preparedSelection=gZ.input.prepareSelection(g0.focus)}}function ar(g0){var i=g0.cm;if(g0.adjustWidthTo!=null){i.display.sizer.style.minWidth=g0.adjustWidthTo+"px";if(g0.maxScrollLeft<i.doc.scrollLeft){bO(i,Math.min(i.display.scroller.scrollLeft,g0.maxScrollLeft),true)}i.display.maxLineChanged=false}var gZ=g0.focus&&g0.focus==d5()&&(!document.hasFocus||document.hasFocus());if(g0.preparedSelection){i.display.input.showSelection(g0.preparedSelection,gZ)}if(g0.updatedDisplay||g0.startHeight!=i.doc.height){ft(i,g0.barMeasure)}if(g0.updatedDisplay){dQ(i,g0.barMeasure)}if(g0.selectionChanged){p(i)}if(i.state.focused&&g0.updateInput){i.display.input.reset(g0.typing)}if(gZ){s(g0.cm)}}function fv(g2){var g7=g2.cm,g4=g7.display,g6=g7.doc;if(g2.updatedDisplay){cx(g7,g2.update)}if(g4.wheelStartX!=null&&(g2.scrollTop!=null||g2.scrollLeft!=null||g2.scrollToPos)){g4.wheelStartX=g4.wheelStartY=null}if(g2.scrollTop!=null){Q(g7,g2.scrollTop,g2.forceScroll)}if(g2.scrollLeft!=null){bO(g7,g2.scrollLeft,true,true)}if(g2.scrollToPos){var g5=F(g7,gi(g6,g2.scrollToPos.from),gi(g6,g2.scrollToPos.to),g2.scrollToPos.margin);eq(g7,g5)}var g3=g2.maybeHiddenMarkers,gZ=g2.maybeUnhiddenMarkers;if(g3){for(var g1=0;g1<g3.length;++g1){if(!g3[g1].lines.length){aH(g3[g1],"hide")}}}if(gZ){for(var g0=0;g0<gZ.length;++g0){if(gZ[g0].lines.length){aH(gZ[g0],"unhide")}}}if(g4.wrapper.offsetHeight){g6.scrollTop=g7.display.scroller.scrollTop}if(g2.changeObjs){aH(g7,"changes",g7,g2.changeObjs)}if(g2.update){g2.update.finish()}}function c3(i,gZ){if(i.curOp){return gZ()}c0(i);try{return gZ()}finally{ap(i)}}function dh(i,gZ){return function(){if(i.curOp){return gZ.apply(i,arguments)}c0(i);try{return gZ.apply(i,arguments)}finally{ap(i)}}}function dr(i){return function(){if(this.curOp){return i.apply(this,arguments)}c0(this);try{return i.apply(this,arguments)}finally{ap(this)}}}function cU(i){return function(){var gZ=this.cm;if(!gZ||gZ.curOp){return i.apply(this,arguments)}c0(gZ);try{return i.apply(this,arguments)}finally{ap(gZ)}}}function ak(g6,g4,g5,g7){if(g4==null){g4=g6.doc.first}if(g5==null){g5=g6.doc.first+g6.doc.size}if(!g7){g7=0}var g1=g6.display;if(g7&&g5<g1.viewTo&&(g1.updateLineNumbers==null||g1.updateLineNumbers>g4)){g1.updateLineNumbers=g4}g6.curOp.viewChanged=true;if(g4>=g1.viewTo){if(bb&&a0(g6.doc,g4)<g1.viewTo){eV(g6)}}else{if(g5<=g1.viewFrom){if(bb&&en(g6.doc,g5+g7)>g1.viewFrom){eV(g6)}else{g1.viewFrom+=g7;g1.viewTo+=g7}}else{if(g4<=g1.viewFrom&&g5>=g1.viewTo){eV(g6)}else{if(g4<=g1.viewFrom){var g3=dx(g6,g5,g5+g7,1);if(g3){g1.view=g1.view.slice(g3.index);g1.viewFrom=g3.lineN;g1.viewTo+=g7}else{eV(g6)}}else{if(g5>=g1.viewTo){var gZ=dx(g6,g4,g4,-1);if(gZ){g1.view=g1.view.slice(0,gZ.index);g1.viewTo=gZ.lineN}else{eV(g6)}}else{var g2=dx(g6,g4,g4,-1);var g0=dx(g6,g5,g5+g7,1);if(g2&&g0){g1.view=g1.view.slice(0,g2.index).concat(fq(g6,g2.lineN,g0.lineN)).concat(g1.view.slice(g0.index));g1.viewTo+=g7}else{eV(g6)}}}}}}var i=g1.externalMeasured;if(i){if(g5<i.lineN){i.lineN+=g7}else{if(g4<i.lineN+i.size){g1.externalMeasured=null}}}}function T(gZ,g0,g3){gZ.curOp.viewChanged=true;var g4=gZ.display,g2=gZ.display.externalMeasured;if(g2&&g0>=g2.lineN&&g0<g2.lineN+g2.size){g4.externalMeasured=null}if(g0<g4.viewFrom||g0>=g4.viewTo){return}var g1=g4.view[dJ(gZ,g0)];if(g1.node==null){return}var i=g1.changes||(g1.changes=[]);if(dB(i,g3)==-1){i.push(g3)}}function eV(i){i.display.viewFrom=i.display.viewTo=i.doc.first;i.display.view=[];i.display.viewOffset=0}function dx(g7,g1,g3,g0){var g4=dJ(g7,g1),g6,g5=g7.display.view;if(!bb||g3==g7.doc.first+g7.doc.size){return{index:g4,lineN:g3}}var gZ=g7.display.viewFrom;for(var g2=0;g2<g4;g2++){gZ+=g5[g2].size}if(gZ!=g1){if(g0>0){if(g4==g5.length-1){return null}g6=(gZ+g5[g4].size)-g1;g4++}else{g6=gZ-g1}g1+=g6;g3+=g6}while(a0(g7.doc,g3)!=g3){if(g4==(g0<0?0:g5.length-1)){return null}g3+=g0*g5[g4-(g0<0?1:0)].size;g4+=g0}return{index:g4,lineN:g3}}function c8(i,g2,g1){var g0=i.display,gZ=g0.view;if(gZ.length==0||g2>=g0.viewTo||g1<=g0.viewFrom){g0.view=fq(i,g2,g1);g0.viewFrom=g2}else{if(g0.viewFrom>g2){g0.view=fq(i,g2,g0.viewFrom).concat(g0.view)}else{if(g0.viewFrom<g2){g0.view=g0.view.slice(dJ(i,g2))}}g0.viewFrom=g2;if(g0.viewTo<g1){g0.view=g0.view.concat(fq(i,g0.viewTo,g1))}else{if(g0.viewTo>g1){g0.view=g0.view.slice(0,dJ(i,g1))}}}g0.viewTo=g1}function du(gZ){var g0=gZ.display.view,g3=0;for(var g2=0;g2<g0.length;g2++){var g1=g0[g2];if(!g1.hidden&&(!g1.node||g1.changes)){++g3}}return g3}function ez(i,gZ){if(i.doc.mode.startState&&i.doc.frontier<i.display.viewTo){i.state.highlight.set(gZ,cL(c7,i))}}function c7(i){var g2=i.doc;if(g2.frontier<g2.first){g2.frontier=g2.first}if(g2.frontier>=i.display.viewTo){return}var g0=+new Date+i.options.workTime;var g1=cf(g2.mode,dT(i,g2.frontier));var gZ=[];g2.iter(g2.frontier,Math.min(g2.first+g2.size,i.display.viewTo+500),function(g3){if(g2.frontier>=i.display.viewFrom){var g6=g3.styles,ha=g3.text.length>i.options.maxHighlightLength;var g8=f4(i,g3,ha?cf(g2.mode,g1):g1,true);g3.styles=g8.styles;var g5=g3.styleClasses,g7=g8.classes;if(g7){g3.styleClasses=g7}else{if(g5){g3.styleClasses=null}}var g9=!g6||g6.length!=g3.styles.length||g5!=g7&&(!g5||!g7||g5.bgClass!=g7.bgClass||g5.textClass!=g7.textClass);for(var g4=0;!g9&&g4<g6.length;++g4){g9=g6[g4]!=g3.styles[g4]}if(g9){gZ.push(g2.frontier)}g3.stateAfter=ha?g1:cf(g2.mode,g1)}else{if(g3.text.length<=i.options.maxHighlightLength){dP(i,g3.text,g1)}g3.stateAfter=g2.frontier%5==0?cf(g2.mode,g1):null}++g2.frontier;if(+new Date>g0){ez(i,i.options.workDelay);return true}});if(gZ.length){c3(i,function(){for(var g3=0;g3<gZ.length;g3++){T(i,gZ[g3],"text")}})}}var aM=function(gZ,i,g0){var g1=gZ.display;this.viewport=i;this.visible=ci(g1,gZ.doc,i);this.editorIsHidden=!g1.wrapper.offsetWidth;this.wrapperHeight=g1.wrapper.clientHeight;this.wrapperWidth=g1.wrapper.clientWidth;this.oldDisplayWidth=dE(gZ);this.force=g0;this.dims=fI(gZ);this.events=[]};aM.prototype.signal=function(gZ,i){if(fP(gZ,i)){this.events.push(arguments)}};aM.prototype.finish=function(){var g0=this;for(var gZ=0;gZ<this.events.length;gZ++){aH.apply(null,g0.events[gZ])}};function L(i){var gZ=i.display;if(!gZ.scrollbarsClipped&&gZ.scroller.offsetWidth){gZ.nativeBarWidth=gZ.scroller.offsetWidth-gZ.scroller.clientWidth;gZ.heightForcer.style.height=c9(i)+"px";gZ.sizer.style.marginBottom=-gZ.nativeBarWidth+"px";gZ.sizer.style.borderRightWidth=c9(i)+"px";gZ.scrollbarsClipped=true}}function D(g7,g1){var g2=g7.display,g6=g7.doc;if(g1.editorIsHidden){eV(g7);return false}if(!g1.force&&g1.visible.from>=g2.viewFrom&&g1.visible.to<=g2.viewTo&&(g2.updateLineNumbers==null||g2.updateLineNumbers>=g2.viewTo)&&g2.renderedView==g2.view&&du(g7)==0){return false}if(ep(g7)){eV(g7);g1.dims=fI(g7)}var g0=g6.first+g6.size;var g4=Math.max(g1.visible.from-g7.options.viewportMargin,g6.first);var g5=Math.min(g0,g1.visible.to+g7.options.viewportMargin);if(g2.viewFrom<g4&&g4-g2.viewFrom<20){g4=Math.max(g6.first,g2.viewFrom)}if(g2.viewTo>g5&&g2.viewTo-g5<20){g5=Math.min(g0,g2.viewTo)}if(bb){g4=a0(g7.doc,g4);g5=en(g7.doc,g5)}var gZ=g4!=g2.viewFrom||g5!=g2.viewTo||g2.lastWrapHeight!=g1.wrapperHeight||g2.lastWrapWidth!=g1.wrapperWidth;c8(g7,g4,g5);g2.viewOffset=bW(fK(g7.doc,g2.viewFrom));g7.display.mover.style.top=g2.viewOffset+"px";var i=du(g7);if(!gZ&&i==0&&!g1.force&&g2.renderedView==g2.view&&(g2.updateLineNumbers==null||g2.updateLineNumbers>=g2.viewTo)){return false}var g3=d5();if(i>4){g2.lineDiv.style.display="none"}cA(g7,g2.updateLineNumbers,g1.dims);if(i>4){g2.lineDiv.style.display=""}g2.renderedView=g2.view;if(g3&&d5()!=g3&&g3.offsetHeight){g3.focus()}el(g2.cursorDiv);el(g2.selectionDiv);g2.gutters.style.height=g2.sizer.style.minHeight=0;if(gZ){g2.lastWrapHeight=g1.wrapperHeight;g2.lastWrapWidth=g1.wrapperWidth;ez(g7,400)}g2.updateLineNumbers=null;return true}function cx(gZ,g2){var i=g2.viewport;for(var g1=true;;g1=false){if(!g1||!gZ.options.lineWrapping||g2.oldDisplayWidth==dE(gZ)){if(i&&i.top!=null){i={top:Math.min(gZ.doc.height+bS(gZ.display)-db(gZ),i.top)}}g2.visible=ci(gZ.display,gZ.doc,i);if(g2.visible.from>=gZ.display.viewFrom&&g2.visible.to<=gZ.display.viewTo){break}}if(!D(gZ,g2)){break}bd(gZ);var g0=dR(gZ);bM(gZ);ft(gZ,g0);dQ(gZ,g0)}g2.signal(gZ,"update",gZ);if(gZ.display.viewFrom!=gZ.display.reportedViewFrom||gZ.display.viewTo!=gZ.display.reportedViewTo){g2.signal(gZ,"viewportChange",gZ,gZ.display.viewFrom,gZ.display.viewTo);gZ.display.reportedViewFrom=gZ.display.viewFrom;gZ.display.reportedViewTo=gZ.display.viewTo}}function eb(gZ,i){var g1=new aM(gZ,i);if(D(gZ,g1)){bd(gZ);cx(gZ,g1);var g0=dR(gZ);bM(gZ);ft(gZ,g0);dQ(gZ,g0);g1.finish()}}function cA(ha,g1,g9){var g6=ha.display,hc=ha.options.lineNumbers;var gZ=g6.lineDiv,hb=gZ.firstChild;function g5(hd){var i=hd.nextSibling;if(dg&&cj&&ha.display.currentWheelTarget==hd){hd.style.display="none"}else{hd.parentNode.removeChild(hd)}return i}var g7=g6.view,g4=g6.viewFrom;for(var g2=0;g2<g7.length;g2++){var g3=g7[g2];if(g3.hidden){}else{if(!g3.node||g3.node.parentNode!=gZ){var g0=aI(ha,g3,g4,g9);gZ.insertBefore(g0,hb)}else{while(hb!=g3.node){hb=g5(hb)}var g8=hc&&g1!=null&&g1<=g4&&g3.lineNumber;if(g3.changes){if(dB(g3.changes,"gutter")>-1){g8=false}ae(ha,g3,g4,g9)}if(g8){el(g3.lineNumber);g3.lineNumber.appendChild(document.createTextNode(eQ(ha.options,g4)))}hb=g3.node.nextSibling}}g4+=g3.size}while(hb){hb=g5(hb)}}function dk(i){var gZ=i.display.gutters.offsetWidth;i.display.sizer.style.marginLeft=gZ+"px"}function dQ(i,gZ){i.display.sizer.style.minHeight=gZ.docHeight+"px";i.display.heightForcer.style.top=gZ.docHeight+"px";i.display.gutters.style.height=(gZ.docHeight+i.display.barHeight+c9(i))+"px"}function ex(gZ){var g0=gZ.display.gutters,g4=gZ.options.gutters;el(g0);var g1=0;for(;g1<g4.length;++g1){var g2=g4[g1];var g3=g0.appendChild(gG("div",null,"CodeMirror-gutter "+g2));if(g2=="CodeMirror-linenumbers"){gZ.display.lineGutter=g3;g3.style.width=(gZ.display.lineNumWidth||1)+"px"}}g0.style.display=g1?"":"none";dk(gZ)}function cs(i){var gZ=dB(i.gutters,"CodeMirror-linenumbers");if(gZ==-1&&i.lineNumbers){i.gutters=i.gutters.concat(["CodeMirror-linenumbers"])}else{if(gZ>-1&&!i.lineNumbers){i.gutters=i.gutters.slice(0);i.gutters.splice(gZ,1)}}}var fR=0;var cu=null;if(d1){cu=-0.53}else{if(cE){cu=15}else{if(dv){cu=-0.7}else{if(aF){cu=-1/3}}}}function c6(g0){var gZ=g0.wheelDeltaX,i=g0.wheelDeltaY;if(gZ==null&&g0.detail&&g0.axis==g0.HORIZONTAL_AXIS){gZ=g0.detail}if(i==null&&g0.detail&&g0.axis==g0.VERTICAL_AXIS){i=g0.detail}else{if(i==null){i=g0.wheelDelta}}return{x:gZ,y:i}}function aC(i){var gZ=c6(i);gZ.x*=cu;gZ.y*=cu;return gZ}function c(g9,g3){var hb=c6(g3),hd=hb.x,hc=hb.y;var g5=g9.display,g8=g5.scroller;var g2=g8.scrollWidth>g8.clientWidth;var g1=g8.scrollHeight>g8.clientHeight;if(!(hd&&g2||hc&&g1)){return}if(hc&&cj&&dg){outer:for(var ha=g3.target,g7=g5.view;ha!=g8;ha=ha.parentNode){for(var g0=0;g0<g7.length;g0++){if(g7[g0].node==ha){g9.display.currentWheelTarget=ha;break outer}}}}if(hd&&!cE&&!em&&cu!=null){if(hc&&g1){A(g9,Math.max(0,g8.scrollTop+hc*cu))}bO(g9,Math.max(0,g8.scrollLeft+hd*cu));if(!hc||(hc&&g1)){cW(g3)}g5.wheelStartX=null;return}if(hc&&cu!=null){var gZ=hc*cu;var g6=g9.doc.scrollTop,g4=g6+g5.wrapper.clientHeight;if(gZ<0){g6=Math.max(0,g6+gZ-50)}else{g4=Math.min(g9.doc.height,g4+gZ+50)}eb(g9,{top:g6,bottom:g4})}if(fR<20){if(g5.wheelStartX==null){g5.wheelStartX=g8.scrollLeft;g5.wheelStartY=g8.scrollTop;g5.wheelDX=hd;g5.wheelDY=hc;setTimeout(function(){if(g5.wheelStartX==null){return}var i=g8.scrollLeft-g5.wheelStartX;var hf=g8.scrollTop-g5.wheelStartY;var he=(hf&&g5.wheelDY&&hf/g5.wheelDY)||(i&&g5.wheelDX&&i/g5.wheelDX);g5.wheelStartX=g5.wheelStartY=null;if(!he){return}cu=(cu*fR+he)/(fR+1);++fR},200)}else{g5.wheelDX+=hd;g5.wheelDY+=hc}}}var gF=function(i,gZ){this.ranges=i;this.primIndex=gZ};gF.prototype.primary=function(){return this.ranges[this.primIndex]};gF.prototype.equals=function(gZ){var g3=this;if(gZ==this){return true}if(gZ.primIndex!=this.primIndex||gZ.ranges.length!=this.ranges.length){return false}for(var g1=0;g1<this.ranges.length;g1++){var g0=g3.ranges[g1],g2=gZ.ranges[g1];if(!Z(g0.anchor,g2.anchor)||!Z(g0.head,g2.head)){return false}}return true};gF.prototype.deepCopy=function(){var g1=this;var gZ=[];for(var g0=0;g0<this.ranges.length;g0++){gZ[g0]=new ef(cw(g1.ranges[g0].anchor),cw(g1.ranges[g0].head))}return new gF(gZ,this.primIndex)};gF.prototype.somethingSelected=function(){var g0=this;for(var gZ=0;gZ<this.ranges.length;gZ++){if(!g0.ranges[gZ].empty()){return true}}return false};gF.prototype.contains=function(g3,gZ){var g2=this;if(!gZ){gZ=g3}for(var g1=0;g1<this.ranges.length;g1++){var g0=g2.ranges[g1];if(ct(gZ,g0.from())>=0&&ct(g3,g0.to())<=0){return g1}}return -1};var ef=function(i,gZ){this.anchor=i;this.head=gZ};ef.prototype.from=function(){return au(this.anchor,this.head)};ef.prototype.to=function(){return bH(this.anchor,this.head)};ef.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function cM(gZ,g6){var g1=gZ[g6];gZ.sort(function(g8,i){return ct(g8.from(),i.from())});g6=dB(gZ,g1);for(var g3=1;g3<gZ.length;g3++){var g7=gZ[g3],g0=gZ[g3-1];if(ct(g0.to(),g7.from())>=0){var g4=au(g0.from(),g7.from()),g5=bH(g0.to(),g7.to());var g2=g0.empty()?g7.from()==g7.head:g0.from()==g0.head;if(g3<=g6){--g6}gZ.splice(--g3,2,new ef(g2?g5:g4,g2?g4:g5))}}return new gF(gZ,g6)}function fl(i,gZ){return new gF([new ef(i,gZ||i)],0)}function dd(i){if(!i.text){return i.to}return Y(i.from.line+i.text.length-1,gd(i.text).length+(i.text.length==1?i.from.ch:0))}function cb(g1,g0){if(ct(g1,g0.from)<0){return g1}if(ct(g1,g0.to)<=0){return dd(g0)}var i=g1.line+g0.text.length-(g0.to.line-g0.from.line)-1,gZ=g1.ch;if(g1.line==g0.to.line){gZ+=dd(g0).ch-g0.to.ch}return Y(i,gZ)}function fO(g2,g3){var g0=[];for(var g1=0;g1<g2.sel.ranges.length;g1++){var gZ=g2.sel.ranges[g1];g0.push(new ef(cb(gZ.anchor,g3),cb(gZ.head,g3)))}return cM(g0,g2.sel.primIndex)}function bD(g0,gZ,i){if(g0.line==gZ.line){return Y(i.line,g0.ch-gZ.ch+i.ch)}else{return Y(i.line+(g0.line-gZ.line),g0.ch)}}function ai(g9,g6,g0){var g1=[];var gZ=Y(g9.first,0),ha=gZ;for(var g3=0;g3<g6.length;g3++){var g5=g6[g3];var g8=bD(g5.from,gZ,ha);var g7=bD(dd(g5),gZ,ha);gZ=g5.to;ha=g7;if(g0=="around"){var g4=g9.sel.ranges[g3],g2=ct(g4.head,g4.anchor)<0;g1[g3]=new ef(g2?g7:g8,g2?g8:g7)}else{g1[g3]=new ef(g8,g8)}}return new gF(g1,g9.sel.primIndex)}function bA(i){i.doc.mode=f6(i.options,i.doc.modeOption);eI(i)}function eI(i){i.doc.iter(function(gZ){if(gZ.stateAfter){gZ.stateAfter=null}if(gZ.styles){gZ.styles=null}});i.doc.frontier=i.doc.first;ez(i,100);i.state.modeGen++;if(i.curOp){ak(i)}}function ea(i,gZ){return gZ.from.ch==0&&gZ.to.ch==0&&gd(gZ.text)==""&&(!i.cm||i.cm.options.wholeLineUpdateBefore)}function f3(hf,g8,g2,g6){function g1(hg){return g2?g2[hg]:null}function g7(hg,hi,hh){eK(hg,hi,hh,g6);ah(hg,"change",hg,g8)}function hc(hj,hh){var hg=[];for(var hi=hj;hi<hh;++hi){hg.push(new gK(ha[hi],g1(hi),g6))}return hg}var hd=g8.from,gZ=g8.to,ha=g8.text;var g9=fK(hf,hd.line),i=fK(hf,gZ.line);var g0=gd(ha),he=g1(ha.length-1),hb=gZ.line-hd.line;if(g8.full){hf.insert(0,hc(0,ha.length));hf.remove(ha.length,hf.size-ha.length)}else{if(ea(hf,g8)){var g5=hc(0,ha.length-1);g7(i,i.text,he);if(hb){hf.remove(hd.line,hb)}if(g5.length){hf.insert(hd.line,g5)}}else{if(g9==i){if(ha.length==1){g7(g9,g9.text.slice(0,hd.ch)+g0+g9.text.slice(gZ.ch),he)}else{var g4=hc(1,ha.length-1);g4.push(new gK(g0+g9.text.slice(gZ.ch),he,g6));g7(g9,g9.text.slice(0,hd.ch)+ha[0],g1(0));hf.insert(hd.line+1,g4)}}else{if(ha.length==1){g7(g9,g9.text.slice(0,hd.ch)+ha[0]+i.text.slice(gZ.ch),g1(0));hf.remove(hd.line+1,hb)}else{g7(g9,g9.text.slice(0,hd.ch)+ha[0],g1(0));g7(i,g0+i.text.slice(gZ.ch),he);var g3=hc(1,ha.length-1);if(hb>1){hf.remove(hd.line+1,hb-1)}hf.insert(hd.line+1,g3)}}}}ah(hf,"change",hf,g8)}function er(g1,g0,gZ){function i(g7,g5,g3){if(g7.linked){for(var g4=0;g4<g7.linked.length;++g4){var g2=g7.linked[g4];if(g2.doc==g5){continue}var g6=g3&&g2.sharedHist;if(gZ&&!g6){continue}g0(g2.doc,g6);i(g2.doc,g7,g6)}}}i(g1,null,true)}function ew(i,gZ){if(gZ.cm){throw new Error("This document is already in use.")}i.doc=gZ;gZ.cm=i;ab(i);bA(i);C(i);if(!i.options.lineWrapping){f(i)}i.options.mode=gZ.modeOption;ak(i)}function C(i){(i.doc.direction=="rtl"?f7:h)(i.display.lineDiv,"CodeMirror-rtl")}function ei(i){c3(i,function(){C(i);ak(i)})}function gv(i){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOp=this.lastSelOp=null;this.lastOrigin=this.lastSelOrigin=null;this.generation=this.maxGeneration=i||1}function dN(i,g0){var gZ={from:cw(g0.from),to:dd(g0),text:gI(i,g0.from,g0.to)};ca(i,gZ,g0.from.line,g0.to.line+1);er(i,function(g1){return ca(g1,gZ,g0.from.line,g0.to.line+1)},true);return gZ}function f8(gZ){while(gZ.length){var i=gd(gZ);if(i.ranges){gZ.pop()}else{break}}}function fg(gZ,i){if(i){f8(gZ.done);return gd(gZ.done)}else{if(gZ.done.length&&!gd(gZ.done).ranges){return gd(gZ.done)}else{if(gZ.done.length>1&&!gZ.done[gZ.done.length-2].ranges){gZ.done.pop();return gd(gZ.done)}}}}function gk(g4,g2,i,g1){var g0=g4.history;g0.undone.length=0;var gZ=+new Date,g5;var g6;if((g0.lastOp==g1||g0.lastOrigin==g2.origin&&g2.origin&&((g2.origin.charAt(0)=="+"&&g4.cm&&g0.lastModTime>gZ-g4.cm.options.historyEventDelay)||g2.origin.charAt(0)=="*"))&&(g5=fg(g0,g0.lastOp==g1))){g6=gd(g5.changes);if(ct(g2.from,g2.to)==0&&ct(g2.from,g6.to)==0){g6.to=dd(g2)}else{g5.changes.push(dN(g4,g2))}}else{var g3=gd(g0.done);if(!g3||!g3.ranges){c5(g4.sel,g0.done)}g5={changes:[dN(g4,g2)],generation:g0.generation};g0.done.push(g5);while(g0.done.length>g0.undoDepth){g0.done.shift();if(!g0.done[0].ranges){g0.done.shift()}}}g0.done.push(i);g0.generation=++g0.maxGeneration;g0.lastModTime=g0.lastSelTime=gZ;g0.lastOp=g0.lastSelOp=g1;g0.lastOrigin=g0.lastSelOrigin=g2.origin;if(!g6){aH(g4,"historyAdded")}}function bK(g2,i,g0,g1){var gZ=i.charAt(0);return gZ=="*"||gZ=="+"&&g0.ranges.length==g1.ranges.length&&g0.somethingSelected()==g1.somethingSelected()&&new Date-g2.history.lastSelTime<=(g2.cm?g2.cm.options.historyEventDelay:500)}function gS(g3,g1,i,g0){var g2=g3.history,gZ=g0&&g0.origin;if(i==g2.lastSelOp||(gZ&&g2.lastSelOrigin==gZ&&(g2.lastModTime==g2.lastSelTime&&g2.lastOrigin==gZ||bK(g3,gZ,gd(g2.done),g1)))){g2.done[g2.done.length-1]=g1}else{c5(g1,g2.done)}g2.lastSelTime=+new Date;g2.lastSelOrigin=gZ;g2.lastSelOp=i;if(g0&&g0.clearRedo!==false){f8(g2.undone)}}function c5(gZ,i){var g0=gd(i);if(!(g0&&g0.ranges&&g0.equals(gZ))){i.push(gZ)}}function ca(gZ,g3,g2,g1){var i=g3["spans_"+gZ.id],g0=0;gZ.iter(Math.max(gZ.first,g2),Math.min(gZ.first+gZ.size,g1),function(g4){if(g4.markedSpans){(i||(i=g3["spans_"+gZ.id]={}))[g0]=g4.markedSpans}++g0})}function bp(g1){if(!g1){return null}var gZ;for(var g0=0;g0<g1.length;++g0){if(g1[g0].marker.explicitlyCleared){if(!gZ){gZ=g1.slice(0,g0)}}else{if(gZ){gZ.push(g1[g0])}}}return !gZ?g1:gZ.length?gZ:null}function cg(g2,g3){var g1=g3["spans_"+g2.id];if(!g1){return null}var gZ=[];for(var g0=0;g0<g3.text.length;++g0){gZ.push(bp(g1[g0]))}return gZ}function et(g7,g5){var gZ=cg(g7,g5);var g8=eG(g7,g5);if(!gZ){return g8}if(!g8){return gZ}for(var g2=0;g2<gZ.length;++g2){var g3=gZ[g2],g4=g8[g2];if(g3&&g4){spans:for(var g1=0;g1<g4.length;++g1){var g6=g4[g1];for(var g0=0;g0<g3.length;++g0){if(g3[g0].marker==g6.marker){continue spans}}g3.push(g6)}}else{if(g4){gZ[g2]=g4}}}return gZ}function bZ(ha,g2,g9){var g0=[];for(var g5=0;g5<ha.length;++g5){var g1=ha[g5];if(g1.ranges){g0.push(g9?gF.prototype.deepCopy.call(g1):g1);continue}var g7=g1.changes,g8=[];g0.push({changes:g8});for(var g4=0;g4<g7.length;++g4){var g6=g7[g4],g3=(void 0);g8.push({from:g6.from,to:g6.to,text:g6.text});if(g2){for(var gZ in g6){if(g3=gZ.match(/^spans_(\d+)$/)){if(dB(g2,Number(g3[1]))>-1){gd(g8)[gZ]=g6[gZ];delete g6[gZ]}}}}}}return g0}function fZ(g3,gZ,g2,i){if(g3.cm&&g3.cm.display.shift||g3.extend){var g1=gZ.anchor;if(i){var g0=ct(g2,g1)<0;if(g0!=(ct(i,g1)<0)){g1=g2;g2=i}else{if(g0!=(ct(g2,i)<0)){g2=i}}}return new ef(g1,g2)}else{return new ef(i||g2,g2)}}function gA(g1,g0,i,gZ){b5(g1,new gF([fZ(g1,g1.sel.primary(),g0,i)],0),gZ)}function ay(g4,g3,g1){var g0=[];for(var g2=0;g2<g4.sel.ranges.length;g2++){g0[g2]=fZ(g4,g4.sel.ranges[g2],g3[g2],null)}var gZ=cM(g0,g4.sel.primIndex);b5(g4,gZ,g1)}function e(g3,g2,g0,g1){var gZ=g3.sel.ranges.slice(0);gZ[g2]=g0;b5(g3,cM(gZ,g3.sel.primIndex),g1)}function H(g1,gZ,g0,i){b5(g1,fl(gZ,g0),i)}function b(g1,gZ,i){var g0={ranges:gZ.ranges,update:function(g2){var g4=this;this.ranges=[];for(var g3=0;g3<g2.length;g3++){g4.ranges[g3]=new ef(gi(g1,g2[g3].anchor),gi(g1,g2[g3].head))}},origin:i&&i.origin};aH(g1,"beforeSelectionChange",g1,g0);if(g1.cm){aH(g1.cm,"beforeSelectionChange",g1.cm,g0)}if(g0.ranges!=gZ.ranges){return cM(g0.ranges,g0.ranges.length-1)}else{return gZ}}function fD(g2,g1,gZ){var i=g2.history.done,g0=gd(i);if(g0&&g0.ranges){i[i.length-1]=g1;eM(g2,g1,gZ)}else{b5(g2,g1,gZ)}}function b5(g0,gZ,i){eM(g0,gZ,i);gS(g0,g0.sel,g0.cm?g0.cm.curOp.id:NaN,i)}function eM(g1,g0,gZ){if(fP(g1,"beforeSelectionChange")||g1.cm&&fP(g1.cm,"beforeSelectionChange")){g0=b(g1,g0,gZ)}var i=gZ&&gZ.bias||(ct(g0.primary().head,g1.sel.primary().head)<0?-1:1);dq(g1,o(g1,g0,i,true));if(!(gZ&&gZ.scroll===false)&&g1.cm){gc(g1.cm)}}function dq(gZ,i){if(i.equals(gZ.sel)){return}gZ.sel=i;if(gZ.cm){gZ.cm.curOp.updateInput=gZ.cm.curOp.selectionChanged=true;X(gZ.cm)}ah(gZ,"cursorActivity",gZ)}function eW(i){dq(i,o(i,i.sel,null,false),ac)}function o(g8,gZ,g5,g6){var g2;for(var g3=0;g3<gZ.ranges.length;g3++){var g4=gZ.ranges[g3];var g0=gZ.ranges.length==g8.sel.ranges.length&&g8.sel.ranges[g3];var g7=b6(g8,g4.anchor,g0&&g0.anchor,g5,g6);var g1=b6(g8,g4.head,g0&&g0.head,g5,g6);if(g2||g7!=g4.anchor||g1!=g4.head){if(!g2){g2=gZ.ranges.slice(0,g3)}g2[g3]=new ef(g7,g1)}}return g2?cM(g2,gZ.primIndex):gZ}function fb(g9,g7,g2,g1,g5){var ha=fK(g9,g7.line);if(ha.markedSpans){for(var g3=0;g3<ha.markedSpans.length;++g3){var gZ=ha.markedSpans[g3],g0=gZ.marker;if((gZ.from==null||(g0.inclusiveLeft?gZ.from<=g7.ch:gZ.from<g7.ch))&&(gZ.to==null||(g0.inclusiveRight?gZ.to>=g7.ch:gZ.to>g7.ch))){if(g5){aH(g0,"beforeCursorEnter");if(g0.explicitlyCleared){if(!ha.markedSpans){break}else{--g3;continue}}}if(!g0.atomic){continue}if(g2){var g6=g0.find(g1<0?1:-1),g8=(void 0);if(g1<0?g0.inclusiveRight:g0.inclusiveLeft){g6=gV(g9,g6,-g1,g6&&g6.line==g7.line?ha:null)}if(g6&&g6.line==g7.line&&(g8=ct(g6,g2))&&(g1<0?g8<0:g8>0)){return fb(g9,g6,g7,g1,g5)}}var g4=g0.find(g1<0?-1:1);if(g1<0?g0.inclusiveLeft:g0.inclusiveRight){g4=gV(g9,g4,g1,g4.line==g7.line?ha:null)}return g4?fb(g9,g4,g7,g1,g5):null}}}return g7}function b6(g3,g4,g1,gZ,i){var g0=gZ||1;var g2=fb(g3,g4,g1,g0,i)||(!i&&fb(g3,g4,g1,g0,true))||fb(g3,g4,g1,-g0,i)||(!i&&fb(g3,g4,g1,-g0,true));if(!g2){g3.cantEdit=true;return Y(g3.first,0)}return g2}function gV(g0,g1,gZ,i){if(gZ<0&&g1.ch==0){if(g1.line>g0.first){return gi(g0,Y(g1.line-1))}else{return null}}else{if(gZ>0&&g1.ch==(i||fK(g0,g1.line)).text.length){if(g1.line<g0.first+g0.size-1){return Y(g1.line+1,0)}else{return null}}else{return new Y(g1.line,g1.ch+gZ)}}}function ao(i){i.setSelection(Y(i.firstLine(),0),Y(i.lastLine()),ac)}function d8(gZ,g1,g0){var i={canceled:false,from:g1.from,to:g1.to,text:g1.text,origin:g1.origin,cancel:function(){return i.canceled=true}};if(g0){i.update=function(g5,g4,g3,g2){if(g5){i.from=gi(gZ,g5)}if(g4){i.to=gi(gZ,g4)}if(g3){i.text=g3}if(g2!==undefined){i.origin=g2}}}aH(gZ,"beforeChange",gZ,i);if(gZ.cm){aH(gZ.cm,"beforeChange",gZ.cm,i)}if(i.canceled){return null}return{from:i.from,to:i.to,text:i.text,origin:i.origin}}function bk(g2,g3,g1){if(g2.cm){if(!g2.cm.curOp){return dh(g2.cm,bk)(g2,g3,g1)}if(g2.cm.state.suppressEdits){return}}if(fP(g2,"beforeChange")||g2.cm&&fP(g2.cm,"beforeChange")){g3=d8(g2,g3,true);if(!g3){return}}var g0=gT&&!g1&&cZ(g2,g3.from,g3.to);if(g0){for(var gZ=g0.length-1;gZ>=0;--gZ){M(g2,{from:g0[gZ].from,to:g0[gZ].to,text:gZ?[""]:g3.text})}}else{M(g2,g3)}}function M(g0,g1){if(g1.text.length==1&&g1.text[0]==""&&ct(g1.from,g1.to)==0){return}var gZ=fO(g0,g1);gk(g0,g1,gZ,g0.cm?g0.cm.curOp.id:NaN);ey(g0,g1,gZ,eG(g0,g1));var i=[];er(g0,function(g3,g2){if(!g2&&dB(i,g3.history)==-1){dV(g3.history,g1);i.push(g3.history)}ey(g3,g1,null,eG(g3,g1))})}function ck(ha,g9,hc){if(ha.cm&&ha.cm.state.suppressEdits&&!hc){return}var g8=ha.history,g0,g2=ha.sel;var gZ=g9=="undo"?g8.done:g8.undone,hb=g9=="undo"?g8.undone:g8.done;var g5=0;for(;g5<gZ.length;g5++){g0=gZ[g5];if(hc?g0.ranges&&!g0.equals(ha.sel):!g0.ranges){break}}if(g5==gZ.length){return}g8.lastOrigin=g8.lastSelOrigin=null;for(;;){g0=gZ.pop();if(g0.ranges){c5(g0,hb);if(hc&&!g0.equals(ha.sel)){b5(ha,g0,{clearRedo:false});return}g2=g0}else{break}}var g7=[];c5(g2,hb);hb.push({changes:g7,generation:g8.generation});g8.generation=g0.generation||++g8.maxGeneration;var g1=fP(ha,"beforeChange")||ha.cm&&fP(ha.cm,"beforeChange");var g6=function(hd){var hg=g0.changes[hd];hg.origin=g9;if(g1&&!d8(ha,hg,false)){gZ.length=0;return{}}g7.push(dN(ha,hg));var hf=hd?fO(ha,hg):gd(gZ);ey(ha,hg,hf,et(ha,hg));if(!hd&&ha.cm){ha.cm.scrollIntoView({from:hg.from,to:dd(hg)})}var he=[];er(ha,function(hh,i){if(!i&&dB(he,hh.history)==-1){dV(hh.history,hg);he.push(hh.history)}ey(hh,hg,null,et(hh,hg))})};for(var g3=g0.changes.length-1;g3>=0;--g3){var g4=g6(g3);if(g4){return g4.v}}}function fS(gZ,g1){if(g1==0){return}gZ.first+=g1;gZ.sel=new gF(b4(gZ.sel.ranges,function(g2){return new ef(Y(g2.anchor.line+g1,g2.anchor.ch),Y(g2.head.line+g1,g2.head.ch))}),gZ.sel.primIndex);if(gZ.cm){ak(gZ.cm,gZ.first,gZ.first-g1,g1);for(var g0=gZ.cm.display,i=g0.viewFrom;i<g0.viewTo;i++){T(gZ.cm,i,"gutter")}}}function ey(g2,g3,g1,gZ){if(g2.cm&&!g2.cm.curOp){return dh(g2.cm,ey)(g2,g3,g1,gZ)}if(g3.to.line<g2.first){fS(g2,g3.text.length-1-(g3.to.line-g3.from.line));return}if(g3.from.line>g2.lastLine()){return}if(g3.from.line<g2.first){var i=g3.text.length-1-(g2.first-g3.from.line);fS(g2,i);g3={from:Y(g2.first,0),to:Y(g3.to.line+i,g3.to.ch),text:[gd(g3.text)],origin:g3.origin}}var g0=g2.lastLine();if(g3.to.line>g0){g3={from:g3.from,to:Y(g0,fK(g2,g0).text.length),text:[g3.text[0]],origin:g3.origin}}g3.removed=gI(g2,g3.from,g3.to);if(!g1){g1=fO(g2,g3)}if(g2.cm){aL(g2.cm,g3,gZ)}else{f3(g2,g3,gZ)}eM(g2,g1,ac)}function aL(g9,g5,g3){var g8=g9.doc,g4=g9.display,g6=g5.from,g7=g5.to;var i=false,g2=g6.line;if(!g9.options.lineWrapping){g2=bX(y(fK(g8,g6.line)));g8.iter(g2,g7.line+1,function(hb){if(hb==g4.maxLine){i=true;return true}})}if(g8.sel.contains(g5.from,g5.to)>-1){X(g9)}f3(g8,g5,g3,bi(g9));if(!g9.options.lineWrapping){g8.iter(g2,g6.line+g5.text.length,function(hc){var hb=eJ(hc);if(hb>g4.maxLineLength){g4.maxLine=hc;g4.maxLineLength=hb;g4.maxLineChanged=true;i=false}});if(i){g9.curOp.updateMaxLine=true}}g8.frontier=Math.min(g8.frontier,g6.line);ez(g9,400);var ha=g5.text.length-(g7.line-g6.line)-1;if(g5.full){ak(g9)}else{if(g6.line==g7.line&&g5.text.length==1&&!ea(g9.doc,g5)){T(g9,g6.line,"text")}else{ak(g9,g6.line,g7.line+1,ha)}}var g0=fP(g9,"changes"),g1=fP(g9,"change");if(g1||g0){var gZ={from:g6,to:g7,text:g5.text,removed:g5.removed,origin:g5.origin};if(g1){ah(g9,"change",g9,gZ)}if(g0){(g9.curOp.changeObjs||(g9.curOp.changeObjs=[])).push(gZ)}}g9.display.selForContextMenu=null}function a5(g1,g0,g3,g2,i){if(!g2){g2=g3}if(ct(g2,g3)<0){var gZ=g2;g2=g3;g3=gZ}if(typeof g0=="string"){g0=g1.splitLines(g0)}bk(g1,{from:g3,to:g2,text:g0,origin:i})}function K(g1,g0,gZ,i){if(gZ<g1.line){g1.line+=i}else{if(g0<g1.line){g1.line=g0;g1.ch=0}}}function fM(g3,g5,g6,g7){for(var g2=0;g2<g3.length;++g2){var gZ=g3[g2],g4=true;if(gZ.ranges){if(!gZ.copied){gZ=g3[g2]=gZ.deepCopy();gZ.copied=true}for(var g1=0;g1<gZ.ranges.length;g1++){K(gZ.ranges[g1].anchor,g5,g6,g7);K(gZ.ranges[g1].head,g5,g6,g7)}continue}for(var g0=0;g0<gZ.changes.length;++g0){var g8=gZ.changes[g0];if(g6<g8.from.line){g8.from=Y(g8.from.line+g7,g8.from.ch);g8.to=Y(g8.to.line+g7,g8.to.ch)}else{if(g5<=g8.to.line){g4=false;break}}}if(!g4){g3.splice(0,g2+1);g2=0}}}function dV(gZ,g2){var g1=g2.from.line,g0=g2.to.line,i=g2.text.length-(g0-g1)-1;fM(gZ.done,g1,g0,i);fM(gZ.undone,g1,g0,i)}function eY(g1,g0,i,g3){var g2=g0,gZ=g0;if(typeof g0=="number"){gZ=fK(g1,dl(g1,g0))}else{g2=bX(g0)}if(g2==null){return null}if(g3(gZ,g2)&&g1.cm){T(g1.cm,g2,i)}return gZ}var fu=function(g0){var g2=this;this.lines=g0;this.parent=null;var gZ=0;for(var g1=0;g1<g0.length;++g1){g0[g1].parent=g2;gZ+=g0[g1].height}this.height=gZ};fu.prototype.chunkSize=function(){return this.lines.length};fu.prototype.removeInner=function(gZ,g4){var g3=this;for(var g1=gZ,g2=gZ+g4;g1<g2;++g1){var g0=g3.lines[g1];g3.height-=g0.height;bL(g0);ah(g0,"delete")}this.lines.splice(gZ,g4)};fu.prototype.collapse=function(i){i.push.apply(i,this.lines)};fu.prototype.insertInner=function(g0,g1,gZ){var g3=this;this.height+=gZ;this.lines=this.lines.slice(0,g0).concat(g1).concat(this.lines.slice(g0));for(var g2=0;g2<g1.length;++g2){g1[g2].parent=g3}};fu.prototype.iterN=function(i,g2,g1){var g0=this;for(var gZ=i+g2;i<gZ;++i){if(g1(g0.lines[i])){return true}}};var f2=function(g2){var g4=this;this.children=g2;var g1=0,gZ=0;for(var g0=0;g0<g2.length;++g0){var g3=g2[g0];g1+=g3.chunkSize();gZ+=g3.height;g3.parent=g4}this.size=g1;this.height=gZ;this.parent=null};f2.prototype.chunkSize=function(){return this.size};f2.prototype.removeInner=function(g1,g0){var g3=this;this.size-=g0;for(var g2=0;g2<this.children.length;++g2){var gZ=g3.children[g2],g5=gZ.chunkSize();if(g1<g5){var g4=Math.min(g0,g5-g1),g6=gZ.height;gZ.removeInner(g1,g4);g3.height-=g6-gZ.height;if(g5==g4){g3.children.splice(g2--,1);gZ.parent=null}if((g0-=g4)==0){break}g1=0}else{g1-=g5}}if(this.size-g0<25&&(this.children.length>1||!(this.children[0] instanceof fu))){var g7=[];this.collapse(g7);this.children=[new fu(g7)];this.children[0].parent=this}};f2.prototype.collapse=function(gZ){var g1=this;for(var g0=0;g0<this.children.length;++g0){g1.children[g0].collapse(gZ)}};f2.prototype.insertInner=function(g0,g8,g7){var g3=this;this.size+=g8.length;this.height+=g7;for(var g2=0;g2<this.children.length;++g2){var gZ=g3.children[g2],g5=gZ.chunkSize();if(g0<=g5){gZ.insertInner(g0,g8,g7);if(gZ.lines&&gZ.lines.length>50){var g1=gZ.lines.length%25+25;for(var g6=g1;g6<gZ.lines.length;){var g4=new fu(gZ.lines.slice(g6,g6+=25));gZ.height-=g4.height;g3.children.splice(++g2,0,g4);g4.parent=g3}gZ.lines=gZ.lines.slice(0,g1);g3.maybeSpill()}break}g0-=g5}};f2.prototype.maybeSpill=function(){if(this.children.length<=10){return}var g1=this;do{var gZ=g1.children.splice(g1.children.length-5,5);var g0=new f2(gZ);if(!g1.parent){var g2=new f2(g1.children);g2.parent=g1;g1.children=[g2,g0];g1=g2}else{g1.size-=g0.size;g1.height-=g0.height;var i=dB(g1.parent.children,g1);g1.parent.children.splice(i+1,0,g0)}g0.parent=g1.parent}while(g1.children.length>10);g1.parent.maybeSpill()};f2.prototype.iterN=function(gZ,g6,g5){var g4=this;for(var g0=0;g0<this.children.length;++g0){var g3=g4.children[g0],g2=g3.chunkSize();if(gZ<g2){var g1=Math.min(g6,g2-gZ);if(g3.iterN(gZ,g1,g5)){return true}if((g6-=g1)==0){break}gZ=0}else{gZ-=g2}}};var dS=function(g1,g0,i){var g2=this;if(i){for(var gZ in i){if(i.hasOwnProperty(gZ)){g2[gZ]=i[gZ]}}}this.doc=g1;this.node=g0};dS.prototype.clear=function(){var g5=this;var g0=this.doc.cm,g2=this.line.widgets,g1=this.line,g4=bX(g1);if(g4==null||!g2){return}for(var g3=0;g3<g2.length;++g3){if(g2[g3]==g5){g2.splice(g3--,1)}}if(!g2.length){g1.widgets=null}var gZ=de(this);gL(g1,Math.max(0,g1.height-gZ));if(g0){c3(g0,function(){eh(g0,g1,-gZ);T(g0,g4,"widget")});ah(g0,"lineWidgetCleared",g0,this,g4)}};dS.prototype.changed=function(){var g2=this;var gZ=this.height,i=this.doc.cm,g0=this.line;this.height=null;var g1=de(this)-gZ;if(!g1){return}gL(g0,g0.height+g1);if(i){c3(i,function(){i.curOp.forceUpdate=true;eh(i,g0,g1);ah(i,"lineWidgetChanged",i,g2,bX(g0))})}};bJ(dS);function eh(i,gZ,g0){if(bW(gZ)<((i.curOp&&i.curOp.scrollTop)||i.doc.scrollTop)){cY(i,g0)}}function bQ(g3,g2,g0,gZ){var g1=new dS(g3,g0,gZ);var i=g3.cm;if(i&&g1.noHScroll){i.display.alignWidgets=true}eY(g3,g2,"widget",function(g5){var g6=g5.widgets||(g5.widgets=[]);if(g1.insertAt==null){g6.push(g1)}else{g6.splice(Math.min(g6.length-1,Math.max(0,g1.insertAt)),0,g1)}g1.line=g5;if(i&&!f0(g3,g5)){var g4=bW(g5)<g3.scrollTop;gL(g5,g5.height+de(g1));if(g4){cY(i,g1.height)}i.curOp.forceUpdate=true}return true});ah(i,"lineWidgetAdded",i,g1,typeof g2=="number"?g2:bX(g2));return g1}var a8=0;var S=function(gZ,i){this.lines=[];this.type=i;this.doc=gZ;this.id=++a8};S.prototype.clear=function(){var g4=this;if(this.explicitlyCleared){return}var g8=this.doc.cm,g1=g8&&!g8.curOp;if(g1){c0(g8)}if(fP(this,"clear")){var g9=this.find();if(g9){ah(this,"clear",g9.from,g9.to)}}var g2=null,g6=null;for(var g3=0;g3<this.lines.length;++g3){var ha=g4.lines[g3];var g7=fF(ha.markedSpans,g4);if(g8&&!g4.collapsed){T(g8,bX(ha),"text")}else{if(g8){if(g7.to!=null){g6=bX(ha)}if(g7.from!=null){g2=bX(ha)}}}ha.markedSpans=e9(ha.markedSpans,g7);if(g7.from==null&&g4.collapsed&&!f0(g4.doc,ha)&&g8){gL(ha,a2(g8.display))}}if(g8&&this.collapsed&&!g8.options.lineWrapping){for(var g0=0;g0<this.lines.length;++g0){var gZ=y(g4.lines[g0]),g5=eJ(gZ);if(g5>g8.display.maxLineLength){g8.display.maxLine=gZ;g8.display.maxLineLength=g5;g8.display.maxLineChanged=true}}}if(g2!=null&&g8&&this.collapsed){ak(g8,g2,g6+1)}this.lines.length=0;this.explicitlyCleared=true;if(this.atomic&&this.doc.cantEdit){this.doc.cantEdit=false;if(g8){eW(g8.doc)}}if(g8){ah(g8,"markerCleared",g8,this,g2,g6)}if(g1){ap(g8)}if(this.parent){this.parent.clear()}};S.prototype.find=function(g2,g0){var g6=this;if(g2==null&&this.type=="bookmark"){g2=1}var g5,g4;for(var g1=0;g1<this.lines.length;++g1){var gZ=g6.lines[g1];var g3=fF(gZ.markedSpans,g6);if(g3.from!=null){g5=Y(g0?gZ:bX(gZ),g3.from);if(g2==-1){return g5}}if(g3.to!=null){g4=Y(g0?gZ:bX(gZ),g3.to);if(g2==1){return g4}}}return g5&&{from:g5,to:g4}};S.prototype.changed=function(){var g1=this;var g0=this.find(-1,true),gZ=this,i=this.doc.cm;if(!g0||!i){return}c3(i,function(){var g3=g0.line,g4=bX(g0.line);var g2=fH(i,g4);if(g2){ax(g2);i.curOp.selectionChanged=i.curOp.forceUpdate=true}i.curOp.updateMaxLine=true;if(!f0(gZ.doc,g3)&&gZ.height!=null){var g6=gZ.height;gZ.height=null;var g5=de(gZ)-g6;if(g5){gL(g3,g3.height+g5)}}ah(i,"markerChanged",i,g1)})};S.prototype.attachLine=function(i){if(!this.lines.length&&this.doc.cm){var gZ=this.doc.cm.curOp;if(!gZ.maybeHiddenMarkers||dB(gZ.maybeHiddenMarkers,this)==-1){(gZ.maybeUnhiddenMarkers||(gZ.maybeUnhiddenMarkers=[])).push(this)}}this.lines.push(i)};S.prototype.detachLine=function(i){this.lines.splice(dB(this.lines,i),1);if(!this.lines.length&&this.doc.cm){var gZ=this.doc.cm.curOp;(gZ.maybeHiddenMarkers||(gZ.maybeHiddenMarkers=[])).push(this)}};bJ(S);function e6(g7,g5,g6,g9,g3){if(g9&&g9.shared){return P(g7,g5,g6,g9,g3)}if(g7.cm&&!g7.cm.curOp){return dh(g7.cm,e6)(g7,g5,g6,g9,g3)}var g2=new S(g7,g3),g8=ct(g5,g6);if(g9){aR(g9,g2,false)}if(g8>0||g8==0&&g2.clearWhenEmpty!==false){return g2}if(g2.replacedWith){g2.collapsed=true;g2.widgetNode=gM("span",[g2.replacedWith],"CodeMirror-widget");if(!g9.handleMouseEvents){g2.widgetNode.setAttribute("cm-ignore-events","true")}if(g9.insertLeft){g2.widgetNode.insertLeft=true}}if(g2.collapsed){if(z(g7,g5.line,g5,g6,g2)||g5.line!=g6.line&&z(g7,g6.line,g5,g6,g2)){throw new Error("Inserting collapsed marker partially overlapping an existing one")}bG()}if(g2.addToHistory){gk(g7,{from:g5,to:g6,origin:"markText"},g7.sel,NaN)}var g0=g5.line,g4=g7.cm,gZ;g7.iter(g0,g6.line+1,function(i){if(g4&&g2.collapsed&&!g4.options.lineWrapping&&y(i)==g4.display.maxLine){gZ=true}if(g2.collapsed&&g0!=g5.line){gL(i,0)}cr(i,new eE(g2,g0==g5.line?g5.ch:null,g0==g6.line?g6.ch:null));++g0});if(g2.collapsed){g7.iter(g5.line,g6.line+1,function(i){if(f0(g7,i)){gL(i,0)}})}if(g2.clearOnEnter){b8(g2,"beforeCursorEnter",function(){return g2.clear()})}if(g2.readOnly){f5();if(g7.history.done.length||g7.history.undone.length){g7.clearHistory()}}if(g2.collapsed){g2.id=++a8;g2.atomic=true}if(g4){if(gZ){g4.curOp.updateMaxLine=true}if(g2.collapsed){ak(g4,g5.line,g6.line+1)}else{if(g2.className||g2.title||g2.startStyle||g2.endStyle||g2.css){for(var g1=g5.line;g1<=g6.line;g1++){T(g4,g1,"text")}}}if(g2.atomic){eW(g4.doc)}ah(g4,"markerAdded",g4,g2)}return g2}var x=function(g1,g0){var g2=this;this.markers=g1;this.primary=g0;for(var gZ=0;gZ<g1.length;++gZ){g1[gZ].parent=g2}};x.prototype.clear=function(){var g0=this;if(this.explicitlyCleared){return}this.explicitlyCleared=true;for(var gZ=0;gZ<this.markers.length;++gZ){g0.markers[gZ].clear()}ah(this,"clear")};x.prototype.find=function(gZ,i){return this.primary.find(gZ,i)};bJ(x);function P(g2,g5,g4,i,g0){i=aR(i);i.shared=false;var g3=[e6(g2,g5,g4,i,g0)],gZ=g3[0];var g1=i.widgetNode;er(g2,function(g7){if(g1){i.widgetNode=g1.cloneNode(true)}g3.push(e6(g7,gi(g7,g5),gi(g7,g4),i,g0));for(var g6=0;g6<g7.linked.length;++g6){if(g7.linked[g6].isParent){return}}gZ=gd(g3)});return new x(g3,gZ)}function fi(i){return i.findMarks(Y(i.first,0),i.clipPos(Y(i.lastLine())),function(gZ){return gZ.parent})}function dW(g4,g5){for(var g2=0;g2<g5.length;g2++){var g0=g5[g2],g6=g0.find();var gZ=g4.clipPos(g6.from),g3=g4.clipPos(g6.to);if(ct(gZ,g3)){var g1=e6(g4,gZ,g3,g0.primary,g0.primary.type);g0.markers.push(g1);g1.parent=g0}}}function eL(g1){var gZ=function(g4){var g2=g1[g4],g6=[g2.primary.doc];er(g2.primary.doc,function(i){return g6.push(i)});for(var g3=0;g3<g2.markers.length;g3++){var g5=g2.markers[g3];if(dB(g6,g5.doc)==-1){g5.parent=null;g2.markers.splice(g3--,1)}}};for(var g0=0;g0<g1.length;g0++){gZ(g0)}}var cH=0;var aw=function(g2,g1,i,g0,gZ){if(!(this instanceof aw)){return new aw(g2,g1,i,g0,gZ)}if(i==null){i=0}f2.call(this,[new fu([new gK("",null)])]);this.first=i;this.scrollTop=this.scrollLeft=0;this.cantEdit=false;this.cleanGeneration=1;this.frontier=i;var g3=Y(i,0);this.sel=fl(g3);this.history=new gv(null);this.id=++cH;this.modeOption=g1;this.lineSep=g0;this.direction=(gZ=="rtl")?"rtl":"ltr";this.extend=false;if(typeof g2=="string"){g2=this.splitLines(g2)}f3(this,{from:g3,to:g3,text:g2});b5(this,fl(g3),ac)};aw.prototype=cz(f2.prototype,{constructor:aw,iter:function(g0,gZ,i){if(i){this.iterN(g0-this.first,gZ-g0,i)}else{this.iterN(this.first,this.first+this.size,g0)}},insert:function(g0,g1){var gZ=0;for(var g2=0;g2<g1.length;++g2){gZ+=g1[g2].height}this.insertInner(g0-this.first,g1,gZ)},remove:function(i,gZ){this.removeInner(i-this.first,gZ)},getValue:function(gZ){var i=a6(this,this.first,this.first+this.size);if(gZ===false){return i}return i.join(gZ||this.lineSeparator())},setValue:cU(function(gZ){var g0=Y(this.first,0),i=this.first+this.size-1;bk(this,{from:g0,to:Y(i,fK(this,i).text.length),text:this.splitLines(gZ),origin:"setValue",full:true},true);if(this.cm){ff(this.cm,0,0)}b5(this,fl(g0),ac)}),replaceRange:function(gZ,g1,g0,i){g1=gi(this,g1);g0=g0?gi(this,g0):g1;a5(this,gZ,g1,g0,i)},getRange:function(g1,g0,gZ){var i=gI(this,gi(this,g1),gi(this,g0));if(gZ===false){return i}return i.join(gZ||this.lineSeparator())},getLine:function(gZ){var i=this.getLineHandle(gZ);return i&&i.text},getLineHandle:function(i){if(cl(this,i)){return fK(this,i)}},getLineNumber:function(i){return bX(i)},getLineHandleVisualStart:function(i){if(typeof i=="number"){i=fK(this,i)}return y(i)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(i){return gi(this,i)},getCursor:function(g0){var i=this.sel.primary(),gZ;if(g0==null||g0=="head"){gZ=i.head}else{if(g0=="anchor"){gZ=i.anchor}else{if(g0=="end"||g0=="to"||g0===false){gZ=i.to()}else{gZ=i.from()}}}return gZ},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:cU(function(i,g0,gZ){H(this,gi(this,typeof i=="number"?Y(i,g0||0):i),null,gZ)}),setSelection:cU(function(gZ,g0,i){H(this,gi(this,gZ),gi(this,g0||gZ),i)}),extendSelection:cU(function(g0,i,gZ){gA(this,gi(this,g0),i&&gi(this,i),gZ)}),extendSelections:cU(function(gZ,i){ay(this,ej(this,gZ),i)}),extendSelectionsBy:cU(function(g0,i){var gZ=b4(this.sel.ranges,g0);ay(this,ej(this,gZ),i)}),setSelections:cU(function(gZ,g3,g1){var g4=this;if(!gZ.length){return}var g0=[];for(var g2=0;g2<gZ.length;g2++){g0[g2]=new ef(gi(g4,gZ[g2].anchor),gi(g4,gZ[g2].head))}if(g3==null){g3=Math.min(gZ.length-1,this.sel.primIndex)}b5(this,cM(g0,g3),g1)}),addSelection:cU(function(g0,g1,gZ){var i=this.sel.ranges.slice(0);i.push(new ef(gi(this,g0),gi(this,g1||g0)));b5(this,cM(i,i.length-1),gZ)}),getSelection:function(g3){var g4=this;var g0=this.sel.ranges,gZ;for(var g1=0;g1<g0.length;g1++){var g2=gI(g4,g0[g1].from(),g0[g1].to());gZ=gZ?gZ.concat(g2):g2}if(g3===false){return gZ}else{return gZ.join(g3||this.lineSeparator())}},getSelections:function(g3){var g4=this;var g2=[],gZ=this.sel.ranges;for(var g0=0;g0<gZ.length;g0++){var g1=gI(g4,gZ[g0].from(),gZ[g0].to());if(g3!==false){g1=g1.join(g3||g4.lineSeparator())}g2[g0]=g1}return g2},replaceSelection:function(g1,g3,gZ){var g2=[];for(var g0=0;g0<this.sel.ranges.length;g0++){g2[g0]=g1}this.replaceSelections(g2,g3,gZ||"+input")},replaceSelections:cU(function(g0,g6,g8){var g4=this;var g7=[],g2=this.sel;for(var g3=0;g3<g2.ranges.length;g3++){var g5=g2.ranges[g3];g7[g3]={from:g5.from(),to:g5.to(),text:g4.splitLines(g0[g3]),origin:g8}}var gZ=g6&&g6!="end"&&ai(this,g7,g6);for(var g1=g7.length-1;g1>=0;g1--){bk(g4,g7[g1])}if(gZ){fD(this,gZ)}else{if(this.cm){gc(this.cm)}}}),undo:cU(function(){ck(this,"undo")}),redo:cU(function(){ck(this,"redo")}),undoSelection:cU(function(){ck(this,"undo",true)}),redoSelection:cU(function(){ck(this,"redo",true)}),setExtending:function(i){this.extend=i},getExtending:function(){return this.extend},historySize:function(){var g2=this.history,gZ=0,g1=0;for(var g0=0;g0<g2.done.length;g0++){if(!g2.done[g0].ranges){++gZ}}for(var g3=0;g3<g2.undone.length;g3++){if(!g2.undone[g3].ranges){++g1}}return{undo:gZ,redo:g1}},clearHistory:function(){this.history=new gv(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(true)},changeGeneration:function(i){if(i){this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null}return this.history.generation},isClean:function(i){return this.history.generation==(i||this.cleanGeneration)},getHistory:function(){return{done:bZ(this.history.done),undone:bZ(this.history.undone)}},setHistory:function(gZ){var i=this.history=new gv(this.history.maxGeneration);i.done=bZ(gZ.done.slice(0),null,true);i.undone=bZ(gZ.undone.slice(0),null,true)},setGutterMarker:cU(function(i,gZ,g0){return eY(this,i,"gutter",function(g1){var g2=g1.gutterMarkers||(g1.gutterMarkers={});g2[gZ]=g0;if(!g0&&fp(g2)){g1.gutterMarkers=null}return true})}),clearGutter:cU(function(i){var gZ=this;this.iter(function(g0){if(g0.gutterMarkers&&g0.gutterMarkers[i]){eY(gZ,g0,"gutter",function(){g0.gutterMarkers[i]=null;if(fp(g0.gutterMarkers)){g0.gutterMarkers=null}return true})}})}),lineInfo:function(i){var gZ;if(typeof i=="number"){if(!cl(this,i)){return null}gZ=i;i=fK(this,i);if(!i){return null}}else{gZ=bX(i);if(gZ==null){return null}}return{line:gZ,handle:i,text:i.text,gutterMarkers:i.gutterMarkers,textClass:i.textClass,bgClass:i.bgClass,wrapClass:i.wrapClass,widgets:i.widgets}},addLineClass:cU(function(g0,gZ,i){return eY(this,g0,gZ=="gutter"?"gutter":"class",function(g1){var g2=gZ=="text"?"textClass":gZ=="background"?"bgClass":gZ=="gutter"?"gutterClass":"wrapClass";if(!g1[g2]){g1[g2]=i}else{if(U(i).test(g1[g2])){return false}else{g1[g2]+=" "+i}}return true})}),removeLineClass:cU(function(g0,gZ,i){return eY(this,g0,gZ=="gutter"?"gutter":"class",function(g2){var g5=gZ=="text"?"textClass":gZ=="background"?"bgClass":gZ=="gutter"?"gutterClass":"wrapClass";var g4=g2[g5];if(!g4){return false}else{if(i==null){g2[g5]=null}else{var g3=g4.match(U(i));if(!g3){return false}var g1=g3.index+g3[0].length;g2[g5]=g4.slice(0,g3.index)+(!g3.index||g1==g4.length?"":" ")+g4.slice(g1)||null}}return true})}),addLineWidget:cU(function(g0,gZ,i){return bQ(this,g0,gZ,i)}),removeLineWidget:function(i){i.clear()},markText:function(g0,gZ,i){return e6(this,gi(this,g0),gi(this,gZ),i,i&&i.type||"range")},setBookmark:function(g0,i){var gZ={replacedWith:i&&(i.nodeType==null?i.widget:i),insertLeft:i&&i.insertLeft,clearWhenEmpty:false,shared:i&&i.shared,handleMouseEvents:i&&i.handleMouseEvents};g0=gi(this,g0);return e6(this,g0,g0,gZ,"bookmark")},findMarksAt:function(g3){g3=gi(this,g3);var g2=[],g0=fK(this,g3.line).markedSpans;if(g0){for(var gZ=0;gZ<g0.length;++gZ){var g1=g0[gZ];if((g1.from==null||g1.from<=g3.ch)&&(g1.to==null||g1.to>=g3.ch)){g2.push(g1.marker.parent||g1.marker)}}}return g2},findMarks:function(g2,g1,i){g2=gi(this,g2);g1=gi(this,g1);var gZ=[],g0=g2.line;this.iter(g2.line,g1.line+1,function(g3){var g5=g3.markedSpans;if(g5){for(var g4=0;g4<g5.length;g4++){var g6=g5[g4];if(!(g6.to!=null&&g0==g2.line&&g2.ch>=g6.to||g6.from==null&&g0!=g2.line||g6.from!=null&&g0==g1.line&&g6.from>=g1.ch)&&(!i||i(g6.marker))){gZ.push(g6.marker.parent||g6.marker)}}}++g0});return gZ},getAllMarks:function(){var i=[];this.iter(function(g0){var gZ=g0.markedSpans;if(gZ){for(var g1=0;g1<gZ.length;++g1){if(gZ[g1].from!=null){i.push(gZ[g1].marker)}}}});return i},posFromIndex:function(g0){var i,g1=this.first,gZ=this.lineSeparator().length;this.iter(function(g2){var g3=g2.text.length+gZ;if(g3>g0){i=g0;return true}g0-=g3;++g1});return gi(this,Y(g1,i))},indexFromPos:function(g0){g0=gi(this,g0);var i=g0.ch;if(g0.line<this.first||g0.ch<0){return 0}var gZ=this.lineSeparator().length;this.iter(this.first,g0.line,function(g1){i+=g1.text.length+gZ});return i},copy:function(i){var gZ=new aw(a6(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);gZ.scrollTop=this.scrollTop;gZ.scrollLeft=this.scrollLeft;gZ.sel=this.sel;gZ.extend=false;if(i){gZ.history.undoDepth=this.history.undoDepth;gZ.setHistory(this.getHistory())}return gZ},linkedDoc:function(i){if(!i){i={}}var g1=this.first,g0=this.first+this.size;if(i.from!=null&&i.from>g1){g1=i.from}if(i.to!=null&&i.to<g0){g0=i.to}var gZ=new aw(a6(this,g1,g0),i.mode||this.modeOption,g1,this.lineSep,this.direction);if(i.sharedHist){gZ.history=this.history}(this.linked||(this.linked=[])).push({doc:gZ,sharedHist:i.sharedHist});gZ.linked=[{doc:this,isParent:true,sharedHist:i.sharedHist}];dW(gZ,fi(this));return gZ},unlinkDoc:function(g0){var g3=this;if(g0 instanceof I){g0=g0.doc}if(this.linked){for(var g1=0;g1<this.linked.length;++g1){var g2=g3.linked[g1];if(g2.doc!=g0){continue}g3.linked.splice(g1,1);g0.unlinkDoc(g3);eL(fi(g3));break}}if(g0.history==this.history){var gZ=[g0.id];er(g0,function(i){return gZ.push(i.id)},true);g0.history=new gv(null);g0.history.done=bZ(this.history.done,gZ);g0.history.undone=bZ(this.history.undone,gZ)}},iterLinkedDocs:function(i){er(this,i)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(i){if(this.lineSep){return i.split(this.lineSep)}return gs(i)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:cU(function(i){if(i!="rtl"){i="ltr"}if(i==this.direction){return}this.direction=i;this.iter(function(gZ){return gZ.order=null});if(this.cm){ei(this.cm)}})});aw.prototype.eachLine=aw.prototype.iter;var aj=0;function bo(g7){var g9=this;dt(g9);if(aV(g9,g7)||bf(g9.display,g7)){return}cW(g7);if(d1){aj=+new Date}var g8=cD(g9,g7,true),g0=g7.dataTransfer.files;if(!g8||g9.isReadOnly()){return}if(g0&&g0.length&&window.FileReader&&window.File){var g3=g0.length,ha=Array(g3),g1=0;var g5=function(hd,hc){if(g9.options.allowDropFileTypes&&dB(g9.options.allowDropFileTypes,hd.type)==-1){return}var hb=new FileReader;hb.onload=dh(g9,function(){var i=hb.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(i)){i=""}ha[hc]=i;if(++g1==g3){g8=gi(g9.doc,g8);var he={from:g8,to:g8,text:g9.doc.splitLines(ha.join(g9.doc.lineSeparator())),origin:"paste"};bk(g9.doc,he);fD(g9.doc,fl(g8,dd(he)))}});hb.readAsText(hd)};for(var g6=0;g6<g3;++g6){g5(g0[g6],g6)}}else{if(g9.state.draggingText&&g9.doc.sel.contains(g8)>-1){g9.state.draggingText(g7);setTimeout(function(){return g9.display.input.focus()},20);return}try{var gZ=g7.dataTransfer.getData("Text");if(gZ){var g4;if(g9.state.draggingText&&!g9.state.draggingText.copy){g4=g9.listSelections()}eM(g9.doc,fl(g8,g8));if(g4){for(var g2=0;g2<g4.length;++g2){a5(g9.doc,"",g4[g2].anchor,g4[g2].head,"drag")}}g9.replaceSelection(gZ,"around","paste");g9.display.input.focus()}}catch(g7){}}}function R(i,g0){if(d1&&(!i.state.draggingText||+new Date-aj<100)){eO(g0);return}if(aV(i,g0)||bf(i.display,g0)){return}g0.dataTransfer.setData("Text",i.getSelection());g0.dataTransfer.effectAllowed="copyMove";if(g0.dataTransfer.setDragImage&&!aF){var gZ=gG("img",null,null,"position: fixed; left: 0; top: 0;");gZ.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";if(em){gZ.width=gZ.height=1;i.display.wrapper.appendChild(gZ);gZ._top=gZ.offsetTop}g0.dataTransfer.setDragImage(gZ,0,0);if(em){gZ.parentNode.removeChild(gZ)}}}function gW(i,gZ){var g1=cD(i,gZ);if(!g1){return}var g0=document.createDocumentFragment();B(i,g1,g0);if(!i.display.dragCursor){i.display.dragCursor=gG("div",null,"CodeMirror-cursors CodeMirror-dragcursors");i.display.lineSpace.insertBefore(i.display.dragCursor,i.display.cursorDiv)}b3(i.display.dragCursor,g0)}function dt(i){if(i.display.dragCursor){i.display.lineSpace.removeChild(i.display.dragCursor);i.display.dragCursor=null}}function aD(g2){if(!document.body.getElementsByClassName){return}var g1=document.body.getElementsByClassName("CodeMirror");for(var g0=0;g0<g1.length;g0++){var gZ=g1[g0].CodeMirror;if(gZ){g2(gZ)}}}var cT=false;function bn(){if(cT){return}gb();cT=true}function gb(){var i;b8(window,"resize",function(){if(i==null){i=setTimeout(function(){i=null;aD(aX)},100)}});b8(window,"blur",function(){return aD(aZ)})}function aX(i){var gZ=i.display;if(gZ.lastWrapHeight==gZ.wrapper.clientHeight&&gZ.lastWrapWidth==gZ.wrapper.clientWidth){return}gZ.cachedCharWidth=gZ.cachedTextHeight=gZ.cachedPaddingH=null;gZ.scrollbarsClipped=false;i.setSize()}var fL={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};for(var f1=0;f1<10;f1++){fL[f1+48]=fL[f1+96]=String(f1)}for(var gu=65;gu<=90;gu++){fL[gu]=String.fromCharCode(gu)}for(var gt=1;gt<=12;gt++){fL[gt+111]=fL[gt+63235]="F"+gt}var fG={};fG.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"};fG.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};fG.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"};fG.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]};fG["default"]=cj?fG.macDefault:fG.pcDefault;function dL(g0){var g6=g0.split(/-(?!$)/);g0=g6[g6.length-1];var g5,g4,gZ,g3;for(var g2=0;g2<g6.length-1;g2++){var g1=g6[g2];if(/^(cmd|meta|m)$/i.test(g1)){g3=true}else{if(/^a(lt)?$/i.test(g1)){g5=true}else{if(/^(c|ctrl|control)$/i.test(g1)){g4=true}else{if(/^s(hift)?$/i.test(g1)){gZ=true}else{throw new Error("Unrecognized modifier name: "+g1)}}}}}if(g5){g0="Alt-"+g0}if(g4){g0="Ctrl-"+g0}if(g3){g0="Cmd-"+g0}if(gZ){g0="Shift-"+g0}return g0}function cX(g6){var g0={};for(var g5 in g6){if(g6.hasOwnProperty(g5)){var g7=g6[g5];if(/^(name|fallthrough|(de|at)tach)$/.test(g5)){continue}if(g7=="..."){delete g6[g5];continue}var g8=b4(g5.split(" "),dL);for(var g4=0;g4<g8.length;g4++){var g2=(void 0),g1=(void 0);if(g4==g8.length-1){g1=g8.join(" ");g2=g7}else{g1=g8.slice(0,g4+1).join(" ");g2="..."}var g3=g0[g1];if(!g3){g0[g1]=g2}else{if(g3!=g2){throw new Error("Inconsistent bindings for "+g1)}}}delete g6[g5]}}for(var gZ in g0){g6[gZ]=g0[gZ]}return g6}function j(g2,g5,g4,g1){g5=gz(g5);var g3=g5.call?g5.call(g2,g1):g5[g2];if(g3===false){return"nothing"}if(g3==="..."){return"multi"}if(g3!=null&&g4(g3)){return"handled"}if(g5.fallthrough){if(Object.prototype.toString.call(g5.fallthrough)!="[object Array]"){return j(g2,g5.fallthrough,g4,g1)}for(var g0=0;g0<g5.fallthrough.length;g0++){var gZ=j(g2,g5.fallthrough[g0],g4,g1);if(gZ){return gZ}}}}function e0(gZ){var i=typeof gZ=="string"?gZ:fL[gZ.keyCode];return i=="Ctrl"||i=="Alt"||i=="Shift"||i=="Mod"}function fV(gZ,g1){if(em&&gZ.keyCode==34&&gZ["char"]){return false}var g0=fL[gZ.keyCode],i=g0;if(i==null||gZ.altGraphKey){return false}if(gZ.altKey&&g0!="Alt"){i="Alt-"+i}if((b1?gZ.metaKey:gZ.ctrlKey)&&g0!="Ctrl"){i="Ctrl-"+i}if((b1?gZ.ctrlKey:gZ.metaKey)&&g0!="Cmd"){i="Cmd-"+i}if(!g1&&gZ.shiftKey&&g0!="Shift"){i="Shift-"+i}return i}function gz(i){return typeof i=="string"?fG[i]:i}function fs(gZ,g5){var g0=gZ.doc.sel.ranges,g3=[];for(var g2=0;g2<g0.length;g2++){var g1=g5(g0[g2]);while(g3.length&&ct(g1.from,gd(g3).to)<=0){var g4=g3.pop();if(ct(g4.from,g1.from)<0){g1.from=g4.from;break}}g3.push(g1)}c3(gZ,function(){for(var g6=g3.length-1;g6>=0;g6--){a5(gZ.doc,"",g3[g6].from,g3[g6].to,"+delete")}gc(gZ)})}var e3={selectAll:ao,singleSelection:function(i){return i.setSelection(i.getCursor("anchor"),i.getCursor("head"),ac)},killLine:function(i){return fs(i,function(g0){if(g0.empty()){var gZ=fK(i.doc,g0.head.line).text.length;if(g0.head.ch==gZ&&g0.head.line<i.lastLine()){return{from:g0.head,to:Y(g0.head.line+1,0)}}else{return{from:g0.head,to:Y(g0.head.line,gZ)}}}else{return{from:g0.from(),to:g0.to()}}})},deleteLine:function(i){return fs(i,function(gZ){return({from:Y(gZ.from().line,0),to:gi(i.doc,Y(gZ.to().line+1,0))})})},delLineLeft:function(i){return fs(i,function(gZ){return({from:Y(gZ.from().line,0),to:gZ.from()})})},delWrappedLineLeft:function(i){return fs(i,function(gZ){var g1=i.charCoords(gZ.head,"div").top+5;var g0=i.coordsChar({left:0,top:g1},"div");return{from:g0,to:gZ.from()}})},delWrappedLineRight:function(i){return fs(i,function(gZ){var g1=i.charCoords(gZ.head,"div").top+5;var g0=i.coordsChar({left:i.display.lineDiv.offsetWidth+100,top:g1},"div");return{from:gZ.from(),to:g0}})},undo:function(i){return i.undo()},redo:function(i){return i.redo()},undoSelection:function(i){return i.undoSelection()},redoSelection:function(i){return i.redoSelection()},goDocStart:function(i){return i.extendSelection(Y(i.firstLine(),0))},goDocEnd:function(i){return i.extendSelection(Y(i.lastLine()))},goLineStart:function(i){return i.extendSelectionsBy(function(gZ){return bC(i,gZ.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(i){return i.extendSelectionsBy(function(gZ){return dZ(i,gZ.head)},{origin:"+move",bias:1})},goLineEnd:function(i){return i.extendSelectionsBy(function(gZ){return d7(i,gZ.head.line)},{origin:"+move",bias:-1})},goLineRight:function(i){return i.extendSelectionsBy(function(gZ){var g0=i.charCoords(gZ.head,"div").top+5;return i.coordsChar({left:i.display.lineDiv.offsetWidth+100,top:g0},"div")},dc)},goLineLeft:function(i){return i.extendSelectionsBy(function(gZ){var g0=i.charCoords(gZ.head,"div").top+5;return i.coordsChar({left:0,top:g0},"div")},dc)},goLineLeftSmart:function(i){return i.extendSelectionsBy(function(gZ){var g0=i.charCoords(gZ.head,"div").top+5;var g1=i.coordsChar({left:0,top:g0},"div");if(g1.ch<i.getLine(g1.line).search(/\S/)){return dZ(i,gZ.head)}return g1},dc)},goLineUp:function(i){return i.moveV(-1,"line")},goLineDown:function(i){return i.moveV(1,"line")},goPageUp:function(i){return i.moveV(-1,"page")},goPageDown:function(i){return i.moveV(1,"page")},goCharLeft:function(i){return i.moveH(-1,"char")},goCharRight:function(i){return i.moveH(1,"char")},goColumnLeft:function(i){return i.moveH(-1,"column")},goColumnRight:function(i){return i.moveH(1,"column")},goWordLeft:function(i){return i.moveH(-1,"word")},goGroupRight:function(i){return i.moveH(1,"group")},goGroupLeft:function(i){return i.moveH(-1,"group")},goWordRight:function(i){return i.moveH(1,"word")},delCharBefore:function(i){return i.deleteH(-1,"char")},delCharAfter:function(i){return i.deleteH(1,"char")},delWordBefore:function(i){return i.deleteH(-1,"word")},delWordAfter:function(i){return i.deleteH(1,"word")},delGroupBefore:function(i){return i.deleteH(-1,"group")},delGroupAfter:function(i){return i.deleteH(1,"group")},indentAuto:function(i){return i.indentSelection("smart")},indentMore:function(i){return i.indentSelection("add")},indentLess:function(i){return i.indentSelection("subtract")},insertTab:function(i){return i.replaceSelection("\t")},insertSoftTab:function(gZ){var g1=[],g0=gZ.listSelections(),g4=gZ.options.tabSize;for(var g3=0;g3<g0.length;g3++){var g5=g0[g3].from();var g2=b2(gZ.getLine(g5.line),g5.ch,g4);g1.push(cF(g4-g2%g4))}gZ.replaceSelections(g1)},defaultTab:function(i){if(i.somethingSelected()){i.indentSelection("add")}else{i.execCommand("insertTab")}},transposeChars:function(i){return c3(i,function(){var g1=i.listSelections(),g0=[];for(var g2=0;g2<g1.length;g2++){if(!g1[g2].empty()){continue}var g4=g1[g2].head,gZ=fK(i.doc,g4.line).text;if(gZ){if(g4.ch==gZ.length){g4=new Y(g4.line,g4.ch-1)}if(g4.ch>0){g4=new Y(g4.line,g4.ch+1);i.replaceRange(gZ.charAt(g4.ch-1)+gZ.charAt(g4.ch-2),Y(g4.line,g4.ch-2),g4,"+transpose")}else{if(g4.line>i.doc.first){var g3=fK(i.doc,g4.line-1).text;if(g3){g4=new Y(g4.line,1);i.replaceRange(gZ.charAt(0)+i.doc.lineSeparator()+g3.charAt(g3.length-1),Y(g4.line-1,g3.length-1),g4,"+transpose")}}}}g0.push(new ef(g4,g4))}i.setSelections(g0)})},newlineAndIndent:function(i){return c3(i,function(){var gZ=i.listSelections();for(var g0=gZ.length-1;g0>=0;g0--){i.replaceRange(i.doc.lineSeparator(),gZ[g0].anchor,gZ[g0].head,"+input")}gZ=i.listSelections();for(var g1=0;g1<gZ.length;g1++){i.indentLine(gZ[g1].from().line,null,true)}gc(i)})},openLine:function(i){return i.replaceSelection("\n","start")},toggleOverwrite:function(i){return i.toggleOverwrite()}};function bC(i,g0){var gZ=fK(i.doc,g0);var g1=y(gZ);if(g1!=gZ){g0=bX(g1)}return eZ(true,i,g1,g0,1)}function d7(i,g0){var gZ=fK(i.doc,g0);var g1=cy(gZ);if(g1!=gZ){g0=bX(g1)}return eZ(true,i,gZ,g0,-1)}function dZ(gZ,g4){var g3=bC(gZ,g4.line);var g0=fK(gZ.doc,g3.line);var i=a(g0,gZ.doc.direction);if(!i||i[0].level==0){var g2=Math.max(0,g0.text.search(/\S/));var g1=g4.line==g3.line&&g4.ch<=g2&&g4.ch;return Y(g3.line,g1?0:g2,g3.sticky)}return g3}function gr(gZ,g2,i){if(typeof g2=="string"){g2=e3[g2];if(!g2){return false}}gZ.display.input.ensurePolled();var g1=gZ.display.shift,g0=false;try{if(gZ.isReadOnly()){gZ.state.suppressEdits=true}if(i){gZ.display.shift=false}g0=g2(gZ)!=co}finally{gZ.display.shift=g1;gZ.state.suppressEdits=false}return g0}function es(g0,g1,g3){for(var g2=0;g2<g0.state.keyMaps.length;g2++){var gZ=j(g1,g0.state.keyMaps[g2],g3,g0);if(gZ){return gZ}}return(g0.options.extraKeys&&j(g1,g0.options.extraKeys,g3,g0))||j(g1,g0.options.keyMap,g3,g0)}var d3=new gY;function bh(gZ,g1,g3,g2){var g0=gZ.state.keySeq;if(g0){if(e0(g1)){return"handled"}d3.set(50,function(){if(gZ.state.keySeq==g0){gZ.state.keySeq=null;gZ.display.input.reset()}});g1=g0+" "+g1}var i=es(gZ,g1,g2);if(i=="multi"){gZ.state.keySeq=g1}if(i=="handled"){ah(gZ,"keyHandled",gZ,g1,g3)}if(i=="handled"||i=="multi"){cW(g3);p(gZ)}if(g0&&!i&&/\'$/.test(g1)){cW(g3);return true}return !!i}function fN(i,g0){var gZ=fV(g0,true);if(!gZ){return false}if(g0.shiftKey&&!i.state.keySeq){return bh(i,"Shift-"+gZ,g0,function(g1){return gr(i,g1,true)})||bh(i,gZ,g0,function(g1){if(typeof g1=="string"?/^go[A-Z]/.test(g1):g1.motion){return gr(i,g1)}})}else{return bh(i,gZ,g0,function(g1){return gr(i,g1)})}}function eD(i,g0,gZ){return bh(i,"'"+gZ+"'",g0,function(g1){return gr(i,g1,true)})}var dG=null;function q(g1){var i=this;i.curOp.focus=d5();if(aV(i,g1)){return}if(d1&&l<11&&g1.keyCode==27){g1.returnValue=false}var gZ=g1.keyCode;i.display.shift=gZ==16||g1.shiftKey;var g0=fN(i,g1);if(em){dG=g0?gZ:null;if(!g0&&gZ==88&&!ds&&(cj?g1.metaKey:g1.ctrlKey)){i.replaceSelection("",null,"cut")}}if(gZ==18&&!/\bCodeMirror-crosshair\b/.test(i.display.lineDiv.className)){av(i)}}function av(gZ){var g0=gZ.display.lineDiv;f7(g0,"CodeMirror-crosshair");function i(g1){if(g1.keyCode==18||!g1.altKey){h(g0,"CodeMirror-crosshair");eA(document,"keyup",i);eA(document,"mouseover",i)}}b8(document,"keyup",i);b8(document,"mouseover",i)}function bl(i){if(i.keyCode==16){this.doc.sel.shift=false}aV(this,i)}function cN(g2){var i=this;if(bf(i.display,g2)||aV(i,g2)||g2.ctrlKey&&!g2.altKey||cj&&g2.metaKey){return}var g1=g2.keyCode,gZ=g2.charCode;if(em&&g1==dG){dG=null;cW(g2);return}if((em&&(!g2.which||g2.which<10))&&fN(i,g2)){return}var g0=String.fromCharCode(gZ==null?g1:gZ);if(g0=="\x08"){return}if(eD(i,g2,g0)){return}i.display.input.onKeyPress(g2)}function eS(g0){var i=this,gZ=i.display;if(aV(i,g0)||gZ.activeTouch&&gZ.input.supportsTouch()){return}gZ.input.ensurePolled();gZ.shift=g0.shiftKey;if(bf(gZ,g0)){if(!dg){gZ.scroller.draggable=false;setTimeout(function(){return gZ.scroller.draggable=true},100)}return}if(m(i,g0)){return}var g1=cD(i,g0);window.focus();switch(gn(g0)){case 1:if(i.state.selectingText){i.state.selectingText(g0)}else{if(g1){az(i,g0,g1)}else{if(N(g0)==gZ.scroller){cW(g0)}}}break;case 2:if(dg){i.state.lastMiddleDown=+new Date}if(g1){gA(i.doc,g1)}setTimeout(function(){return gZ.input.focus()},20);cW(g0);break;case 3:if(gP){aA(i,g0)}else{an(i)}break}}var dF;var dw;function az(gZ,g4,g5){if(d1){setTimeout(cL(s,gZ),0)}else{gZ.curOp.focus=d5()}var g0=+new Date,g2;if(dw&&dw.time>g0-400&&ct(dw.pos,g5)==0){g2="triple"}else{if(dF&&dF.time>g0-400&&ct(dF.pos,g5)==0){g2="double";dw={time:g0,pos:g5}}else{g2="single";dF={time:g0,pos:g5}}}var g3=gZ.doc.sel,i=cj?g4.metaKey:g4.ctrlKey,g1;if(gZ.options.dragDrop&&fe&&!gZ.isReadOnly()&&g2=="single"&&(g1=g3.contains(g5))>-1&&(ct((g1=g3.ranges[g1]).from(),g5)<0||g5.xRel>0)&&(ct(g1.to(),g5)>0||g5.xRel<0)){a7(gZ,g4,g5,i)}else{n(gZ,g4,g5,g2,i)}}function a7(g5,g1,i,g0){var g2=g5.display,g3=false;var gZ=dh(g5,function(g7){if(dg){g2.scroller.draggable=false}g5.state.draggingText=false;eA(document,"mouseup",gZ);eA(document,"mousemove",g6);eA(g2.scroller,"dragstart",g4);eA(g2.scroller,"drop",gZ);if(!g3){cW(g7);if(!g0){gA(g5.doc,i)}if(dg||d1&&l==9){setTimeout(function(){document.body.focus();g2.input.focus()},20)}else{g2.input.focus()}}});var g6=function(g7){g3=g3||Math.abs(g1.clientX-g7.clientX)+Math.abs(g1.clientY-g7.clientY)>=10};var g4=function(){return g3=true};if(dg){g2.scroller.draggable=true}g5.state.draggingText=gZ;gZ.copy=cj?g1.altKey:g1.ctrlKey;if(g2.scroller.dragDrop){g2.scroller.dragDrop()}b8(document,"mouseup",gZ);b8(document,"mousemove",g6);b8(g2.scroller,"dragstart",g4);b8(g2.scroller,"drop",gZ);an(g5);setTimeout(function(){return g2.input.focus()},20)}function n(g2,hg,g1,gZ,g4){var hd=g2.display,hi=g2.doc;cW(hg);var g0,hh,g3=hi.sel,i=g3.ranges;if(g4&&!hg.shiftKey){hh=hi.sel.contains(g1);if(hh>-1){g0=i[hh]}else{g0=new ef(g1,g1)}}else{g0=hi.sel.primary();hh=hi.sel.primIndex}if(gh?hg.shiftKey&&hg.metaKey:hg.altKey){gZ="rect";if(!g4){g0=new ef(g1,g1)}g1=cD(g2,hg,true,true);hh=-1}else{if(gZ=="double"){var he=g2.findWordAt(g1);if(g2.display.shift||hi.extend){g0=fZ(hi,g0,he.anchor,he.head)}else{g0=he}}else{if(gZ=="triple"){var g7=new ef(Y(g1.line,0),gi(hi,Y(g1.line+1,0)));if(g2.display.shift||hi.extend){g0=fZ(hi,g0,g7.anchor,g7.head)}else{g0=g7}}else{g0=fZ(hi,g0,g1)}}}if(!g4){hh=0;b5(hi,new gF([g0],0),O);g3=hi.sel}else{if(hh==-1){hh=i.length;b5(hi,cM(i.concat([g0]),hh),{scroll:false,origin:"*mouse"})}else{if(i.length>1&&i[hh].empty()&&gZ=="single"&&!hg.shiftKey){b5(hi,cM(i.slice(0,hh).concat(i.slice(hh+1)),0),{scroll:false,origin:"*mouse"});g3=hi.sel}else{e(hi,hh,g0,O)}}}var hc=g1;function hb(hu){if(ct(hc,hu)==0){return}hc=hu;if(gZ=="rect"){var hl=[],hr=g2.options.tabSize;var hk=b2(fK(hi,g1.line).text,g1.ch,hr);var hx=b2(fK(hi,hu.line).text,hu.ch,hr);var hm=Math.min(hk,hx),hv=Math.max(hk,hx);for(var hy=Math.min(g1.line,hu.line),ho=Math.min(g2.lastLine(),Math.max(g1.line,hu.line));hy<=ho;hy++){var hw=fK(hi,hy).text,hn=eN(hw,hm,hr);if(hm==hv){hl.push(new ef(Y(hy,hn),Y(hy,hn)))}else{if(hw.length>hn){hl.push(new ef(Y(hy,hn),Y(hy,eN(hw,hv,hr))))}}}if(!hl.length){hl.push(new ef(g1,g1))}b5(hi,cM(g3.ranges.slice(0,hh).concat(hl),hh),{origin:"*mouse",scroll:false});g2.scrollIntoView(hu)}else{var hs=g0;var hp=hs.anchor,ht=hu;if(gZ!="single"){var hq;if(gZ=="double"){hq=g2.findWordAt(hu)}else{hq=new ef(Y(hu.line,0),gi(hi,Y(hu.line+1,0)))}if(ct(hq.anchor,hp)>0){ht=hq.head;hp=au(hs.from(),hq.anchor)}else{ht=hq.anchor;hp=bH(hs.to(),hq.head)}}var hj=g3.ranges.slice(0);hj[hh]=new ef(gi(hi,hp),ht);b5(hi,cM(hj,hh),O)}}var g9=hd.wrapper.getBoundingClientRect();var g5=0;function hf(hl){var hj=++g5;var hn=cD(g2,hl,true,gZ=="rect");if(!hn){return}if(ct(hn,hc)!=0){g2.curOp.focus=d5();hb(hn);var hm=ci(hd,hi);if(hn.line>=hm.to||hn.line<hm.from){setTimeout(dh(g2,function(){if(g5==hj){hf(hl)}}),150)}}else{var hk=hl.clientY<g9.top?-20:hl.clientY>g9.bottom?20:0;if(hk){setTimeout(dh(g2,function(){if(g5!=hj){return}hd.scroller.scrollTop+=hk;hf(hl)}),50)}}}function g8(hj){g2.state.selectingText=false;g5=Infinity;cW(hj);hd.input.focus();eA(document,"mousemove",ha);eA(document,"mouseup",g6);hi.history.lastSelOrigin=null}var ha=dh(g2,function(hj){if(!gn(hj)){g8(hj)}else{hf(hj)}});var g6=dh(g2,g8);g2.state.selectingText=g6;b8(document,"mousemove",ha);b8(document,"mouseup",g6)}function gX(g9,g5,g7,g8){var g0,gZ;try{g0=g5.clientX;gZ=g5.clientY}catch(g5){return false}if(g0>=Math.floor(g9.display.gutters.getBoundingClientRect().right)){return false}if(g8){cW(g5)}var g6=g9.display;var g4=g6.lineDiv.getBoundingClientRect();if(gZ>g4.bottom||!fP(g9,g7)){return bV(g5)}gZ-=g4.top-g6.viewOffset;for(var g2=0;g2<g9.options.gutters.length;++g2){var g3=g6.gutters.childNodes[g2];if(g3&&g3.getBoundingClientRect().right>=g0){var ha=bR(g9.doc,gZ);var g1=g9.options.gutters[g2];aH(g9,g7,g9,ha,g1,g5);return bV(g5)}}}function m(i,gZ){return gX(i,gZ,"gutterClick",true)}function aA(i,gZ){if(bf(i.display,gZ)||dz(i,gZ)){return}if(aV(i,gZ,"contextmenu")){return}i.display.input.onContextMenu(gZ)}function dz(i,gZ){if(!fP(i,"gutterContextMenu")){return false}return gX(i,gZ,"gutterContextMenu",false)}function c4(i){i.display.wrapper.className=i.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+i.options.theme.replace(/(^|\s)\s*/g," cm-s-");am(i)}var cp={toString:function(){return"CodeMirror.Init"}};var fx={};var bj={};function e8(i){var g0=i.optionHandlers;function gZ(g1,g4,g3,g2){i.defaults[g1]=g4;if(g3){g0[g1]=g2?function(g5,g7,g6){if(g6!=cp){g3(g5,g7,g6)}}:g3}}i.defineOption=gZ;i.Init=cp;gZ("value","",function(g1,g2){return g1.setValue(g2)},true);gZ("mode",null,function(g1,g2){g1.doc.modeOption=g2;bA(g1)},true);gZ("indentUnit",2,bA,true);gZ("indentWithTabs",false);gZ("smartIndent",true);gZ("tabSize",4,function(g1){eI(g1);am(g1);ak(g1)},true);gZ("lineSeparator",null,function(g1,g4){g1.doc.lineSep=g4;if(!g4){return}var g3=[],g5=g1.doc.first;g1.doc.iter(function(g6){for(var g8=0;;){var g7=g6.text.indexOf(g4,g8);if(g7==-1){break}g8=g7+g4.length;g3.push(Y(g5,g7))}g5++});for(var g2=g3.length-1;g2>=0;g2--){a5(g1.doc,g4,g3[g2],Y(g3[g2].line,g3[g2].ch+g4.length))}});gZ("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(g1,g3,g2){g1.state.specialChars=new RegExp(g3.source+(g3.test("\t")?"":"|\t"),"g");if(g2!=cp){g1.refresh()}});gZ("specialCharPlaceholder",fJ,function(g1){return g1.refresh()},true);gZ("electricChars",true);gZ("inputStyle",eB?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},true);gZ("spellcheck",false,function(g1,g2){return g1.getInputField().spellcheck=g2},true);gZ("rtlMoveVisually",!aT);gZ("wholeLineUpdateBefore",true);gZ("theme","default",function(g1){c4(g1);dO(g1)},true);gZ("keyMap","default",function(g1,g5,g2){var g3=gz(g5);var g4=g2!=cp&&gz(g2);if(g4&&g4.detach){g4.detach(g1,g3)}if(g3.attach){g3.attach(g1,g4||null)}});gZ("extraKeys",null);gZ("lineWrapping",false,e7,true);gZ("gutters",[],function(g1){cs(g1.options);dO(g1)},true);gZ("fixedGutter",true,function(g1,g2){g1.display.gutters.style.left=g2?eg(g1.display)+"px":"0";g1.refresh()},true);gZ("coverGutterNextToScrollbar",false,function(g1){return ft(g1)},true);gZ("scrollbarStyle","native",function(g1){aG(g1);ft(g1);g1.display.scrollbars.setScrollTop(g1.doc.scrollTop);g1.display.scrollbars.setScrollLeft(g1.doc.scrollLeft)},true);gZ("lineNumbers",false,function(g1){cs(g1.options);dO(g1)},true);gZ("firstLineNumber",1,dO,true);gZ("lineNumberFormatter",function(g1){return g1},dO,true);gZ("showCursorWhenSelecting",false,bM,true);gZ("resetSelectionOnContextMenu",true);gZ("lineWiseCopyCut",true);gZ("readOnly",false,function(g1,g2){if(g2=="nocursor"){aZ(g1);g1.display.input.blur();g1.display.disabled=true}else{g1.display.disabled=false}g1.display.input.readOnlyChanged(g2)});gZ("disableInput",false,function(g1,g2){if(!g2){g1.display.input.reset()}},true);gZ("dragDrop",true,gD);gZ("allowDropFileTypes",null);gZ("cursorBlinkRate",530);gZ("cursorScrollMargin",0);gZ("cursorHeight",1,bM,true);gZ("singleCursorHeightPerLine",true,bM,true);gZ("workTime",100);gZ("workDelay",100);gZ("flattenSpans",true,eI,true);gZ("addModeClass",false,eI,true);gZ("pollInterval",100);gZ("undoDepth",200,function(g1,g2){return g1.doc.history.undoDepth=g2});gZ("historyEventDelay",1250);gZ("viewportMargin",10,function(g1){return g1.refresh()},true);gZ("maxHighlightLength",10000,eI,true);gZ("moveInputWithCursor",true,function(g1,g2){if(!g2){g1.display.input.resetPosition()}});gZ("tabindex",null,function(g1,g2){return g1.display.input.getField().tabIndex=g2||""});gZ("autofocus",null);gZ("direction","ltr",function(g1,g2){return g1.doc.setDirection(g2)},true)}function dO(i){ex(i);ak(i);e5(i)}function gD(gZ,g2,g0){var g3=g0&&g0!=cp;if(!g2!=!g3){var g1=gZ.display.dragFunctions;var i=g2?b8:eA;i(gZ.display.scroller,"dragstart",g1.start);i(gZ.display.scroller,"dragenter",g1.enter);i(gZ.display.scroller,"dragover",g1.over);i(gZ.display.scroller,"dragleave",g1.leave);i(gZ.display.scroller,"drop",g1.drop)}}function e7(i){if(i.options.lineWrapping){f7(i.display.wrapper,"CodeMirror-wrap");i.display.sizer.style.minWidth="";i.display.sizerWidth=null}else{h(i.display.wrapper,"CodeMirror-wrap");f(i)}ab(i);ak(i);am(i);setTimeout(function(){return ft(i)},100)}function I(gZ,g1){var g6=this;if(!(this instanceof I)){return new I(gZ,g1)}this.options=g1=g1?aR(g1):{};aR(fx,g1,false);cs(g1);var g5=g1.value;if(typeof g5=="string"){g5=new aw(g5,g1.mode,null,g1.lineSeparator,g1.direction)}this.doc=g5;var g0=new I.inputStyles[g1.inputStyle](this);var g4=this.display=new fa(gZ,g5,g0);g4.wrapper.CodeMirror=this;ex(this);c4(this);if(g1.lineWrapping){this.display.wrapper.className+=" CodeMirror-wrap"}aG(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:false,delayingBlurEvent:false,focused:false,suppressEdits:false,pasteIncoming:false,cutIncoming:false,selectingText:false,draggingText:false,highlight:new gY(),keySeq:null,specialChars:null};if(g1.autofocus&&!eB){g4.input.focus()}if(d1&&l<11){setTimeout(function(){return g6.display.input.reset(true)},20)}gq(this);bn();c0(this);this.curOp.forceUpdate=true;ew(this,g5);if((g1.autofocus&&!eB)||this.hasFocus()){setTimeout(cL(cR,this),20)}else{aZ(this)}for(var g3 in bj){if(bj.hasOwnProperty(g3)){bj[g3](g6,g1[g3],cp)}}ep(this);if(g1.finishInit){g1.finishInit(this)}for(var g2=0;g2<bc.length;++g2){bc[g2](g6)}ap(this);if(dg&&g1.lineWrapping&&getComputedStyle(g4.lineDiv).textRendering=="optimizelegibility"){g4.lineDiv.style.textRendering="auto"}}I.defaults=fx;I.optionHandlers=bj;function gq(gZ){var g3=gZ.display;b8(g3.scroller,"mousedown",dh(gZ,eS));if(d1&&l<11){b8(g3.scroller,"dblclick",dh(gZ,function(g7){if(aV(gZ,g7)){return}var g8=cD(gZ,g7);if(!g8||m(gZ,g7)||bf(gZ.display,g7)){return}cW(g7);var g6=gZ.findWordAt(g8);gA(gZ.doc,g6.anchor,g6.head)}))}else{b8(g3.scroller,"dblclick",function(g6){return aV(gZ,g6)||cW(g6)})}if(!gP){b8(g3.scroller,"contextmenu",function(g6){return aA(gZ,g6)})}var g5,i={end:0};function g4(){if(g3.activeTouch){g5=setTimeout(function(){return g3.activeTouch=null},1000);i=g3.activeTouch;i.end=+new Date}}function g1(g6){if(g6.touches.length!=1){return false}var g7=g6.touches[0];return g7.radiusX<=1&&g7.radiusY<=1}function g0(g9,g6){if(g6.left==null){return true}var g8=g6.left-g9.left,g7=g6.top-g9.top;return g8*g8+g7*g7>20*20}b8(g3.scroller,"touchstart",function(g7){if(!aV(gZ,g7)&&!g1(g7)){g3.input.ensurePolled();clearTimeout(g5);var g6=+new Date;g3.activeTouch={start:g6,moved:false,prev:g6-i.end<=300?i:null};if(g7.touches.length==1){g3.activeTouch.left=g7.touches[0].pageX;g3.activeTouch.top=g7.touches[0].pageY}}});b8(g3.scroller,"touchmove",function(){if(g3.activeTouch){g3.activeTouch.moved=true}});b8(g3.scroller,"touchend",function(g7){var g9=g3.activeTouch;if(g9&&!bf(g3,g7)&&g9.left!=null&&!g9.moved&&new Date-g9.start<300){var g8=gZ.coordsChar(g3.activeTouch,"page"),g6;if(!g9.prev||g0(g9,g9.prev)){g6=new ef(g8,g8)}else{if(!g9.prev.prev||g0(g9,g9.prev.prev)){g6=gZ.findWordAt(g8)}else{g6=new ef(Y(g8.line,0),gi(gZ.doc,Y(g8.line+1,0)))}}gZ.setSelection(g6.anchor,g6.head);gZ.focus();cW(g7)}g4()});b8(g3.scroller,"touchcancel",g4);b8(g3.scroller,"scroll",function(){if(g3.scroller.clientHeight){A(gZ,g3.scroller.scrollTop);bO(gZ,g3.scroller.scrollLeft,true);aH(gZ,"scroll",gZ)}});b8(g3.scroller,"mousewheel",function(g6){return c(gZ,g6)});b8(g3.scroller,"DOMMouseScroll",function(g6){return c(gZ,g6)});b8(g3.wrapper,"scroll",function(){return g3.wrapper.scrollTop=g3.wrapper.scrollLeft=0});g3.dragFunctions={enter:function(g6){if(!aV(gZ,g6)){eO(g6)}},over:function(g6){if(!aV(gZ,g6)){gW(gZ,g6);eO(g6)}},start:function(g6){return R(gZ,g6)},drop:dh(gZ,bo),leave:function(g6){if(!aV(gZ,g6)){dt(gZ)}}};var g2=g3.input.getField();b8(g2,"keyup",function(g6){return bl.call(gZ,g6)});b8(g2,"keydown",dh(gZ,q));b8(g2,"keypress",dh(gZ,cN));b8(g2,"focus",function(g6){return cR(gZ,g6)});b8(g2,"blur",function(g6){return aZ(gZ,g6)})}var bc=[];I.defineInitHook=function(i){return bc.push(i)};function af(he,g3,hd,g1){var hc=he.doc,g0;if(hd==null){hd="add"}if(hd=="smart"){if(!hc.mode.indent){hd="prev"}else{g0=dT(he,g3)}}var g7=he.options.tabSize;var hf=fK(hc,g3),g6=b2(hf.text,null,g7);if(hf.stateAfter){hf.stateAfter=null}var gZ=hf.text.match(/^\s*/)[0],ha;if(!g1&&!/\S/.test(hf.text)){ha=0;hd="not"}else{if(hd=="smart"){ha=hc.mode.indent(g0,hf.text.slice(gZ.length),hf.text);if(ha==co||ha>150){if(!g1){return}hd="prev"}}}if(hd=="prev"){if(g3>hc.first){ha=b2(fK(hc,g3-1).text,null,g7)}else{ha=0}}else{if(hd=="add"){ha=g6+he.options.indentUnit}else{if(hd=="subtract"){ha=g6-he.options.indentUnit}else{if(typeof hd=="number"){ha=g6+hd}}}}ha=Math.max(0,ha);var hb="",g9=0;if(he.options.indentWithTabs){for(var g4=Math.floor(ha/g7);g4;--g4){g9+=g7;hb+="\t"}}if(g9<ha){hb+=cF(ha-g9)}if(hb!=gZ){a5(hc,hb,Y(g3,0),Y(g3,gZ.length),"+input");hf.stateAfter=null;return true}else{for(var g2=0;g2<hc.sel.ranges.length;g2++){var g5=hc.sel.ranges[g2];if(g5.head.line==g3&&g5.head.ch<gZ.length){var g8=Y(g3,gZ.length);e(hc,g2,new ef(g8,g8));break}}}}var bq=null;function dm(i){bq=i}function gB(he,g4,g2,g1,hd){var hc=he.doc;he.display.shift=false;if(!g1){g1=hc.sel}var g3=he.state.pasteIncoming||hd=="paste";var g7=gs(g4),gZ=null;if(g3&&g1.ranges.length>1){if(bq&&bq.text.join("\n")==g4){if(g1.ranges.length%bq.text.length==0){gZ=[];for(var g5=0;g5<bq.text.length;g5++){gZ.push(hc.splitLines(bq.text[g5]))}}}else{if(g7.length==g1.ranges.length){gZ=b4(g7,function(i){return[i]})}}}var g8;for(var g0=g1.ranges.length-1;g0>=0;g0--){var g6=g1.ranges[g0];var hb=g6.from(),ha=g6.to();if(g6.empty()){if(g2&&g2>0){hb=Y(hb.line,hb.ch-g2)}else{if(he.state.overwrite&&!g3){ha=Y(ha.line,Math.min(fK(hc,ha.line).text.length,ha.ch+gd(g7).length))}else{if(bq&&bq.lineWise&&bq.text.join("\n")==g4){hb=ha=Y(hb.line,0)}}}}g8=he.curOp.updateInput;var g9={from:hb,to:ha,text:gZ?gZ[g0%gZ.length]:g7,origin:hd||(g3?"paste":he.state.cutIncoming?"cut":"+input")};bk(he.doc,g9);ah(he,"inputRead",he,g9)}if(g4&&!g3){gy(he,g4)}gc(he);he.curOp.updateInput=g8;he.curOp.typing=true;he.state.pasteIncoming=he.state.cutIncoming=false}function be(g0,i){var gZ=g0.clipboardData&&g0.clipboardData.getData("Text");if(gZ){g0.preventDefault();if(!i.isReadOnly()&&!i.options.disableInput){c3(i,function(){return gB(i,gZ,0,null,"paste")})}return true}}function gy(gZ,g3){if(!gZ.options.electricChars||!gZ.options.smartIndent){return}var g4=gZ.doc.sel;for(var g2=g4.ranges.length-1;g2>=0;g2--){var g0=g4.ranges[g2];if(g0.head.ch>100||(g2&&g4.ranges[g2-1].head.line==g0.head.line)){continue}var g5=gZ.getModeAt(g0.head);var g6=false;if(g5.electricChars){for(var g1=0;g1<g5.electricChars.length;g1++){if(g3.indexOf(g5.electricChars.charAt(g1))>-1){g6=af(gZ,g0.head.line,"smart");break}}}else{if(g5.electricInput){if(g5.electricInput.test(fK(gZ.doc,g0.head.line).text.slice(0,g0.head.ch))){g6=af(gZ,g0.head.line,"smart")}}}if(g6){ah(gZ,"electricInput",gZ,g0.head.line)}}}function dA(gZ){var g4=[],g1=[];for(var g2=0;g2<gZ.doc.sel.ranges.length;g2++){var g0=gZ.doc.sel.ranges[g2].head.line;var g3={anchor:Y(g0,0),head:Y(g0+1,0)};g1.push(g3);g4.push(gZ.getRange(g3.anchor,g3.head))}return{text:g4,ranges:g1}}function go(gZ,i){gZ.setAttribute("autocorrect","off");gZ.setAttribute("autocapitalize","off");gZ.setAttribute("spellcheck",!!i)}function a1(){var i=gG("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none");var gZ=gG("div",[i],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");if(dg){i.style.width="1000px"}else{i.setAttribute("wrap","off")}if(fw){i.style.border="1px solid black"}go(i);return gZ}function d6(i){var gZ=i.optionHandlers;var g0=i.helpers={};i.prototype={constructor:i,focus:function(){window.focus();this.display.input.focus()},setOption:function(g3,g4){var g2=this.options,g1=g2[g3];if(g2[g3]==g4&&g3!="mode"){return}g2[g3]=g4;if(gZ.hasOwnProperty(g3)){dh(this,gZ[g3])(this,g4,g1)}aH(this,"optionChange",this,g3)},getOption:function(g1){return this.options[g1]},getDoc:function(){return this.doc},addKeyMap:function(g2,g1){this.state.keyMaps[g1?"push":"unshift"](gz(g2))},removeKeyMap:function(g2){var g3=this.state.keyMaps;for(var g1=0;g1<g3.length;++g1){if(g3[g1]==g2||g3[g1].name==g2){g3.splice(g1,1);return true}}},addOverlay:dr(function(g1,g2){var g3=g1.token?g1:i.getMode(this.options,g1);if(g3.startState){throw new Error("Overlays may not be stateful.")}cm(this.state.overlays,{mode:g3,modeSpec:g1,opaque:g2&&g2.opaque,priority:(g2&&g2.priority)||0},function(g4){return g4.priority});this.state.modeGen++;ak(this)}),removeOverlay:dr(function(g1){var g5=this;var g3=this.state.overlays;for(var g2=0;g2<g3.length;++g2){var g4=g3[g2].modeSpec;if(g4==g1||typeof g1=="string"&&g4.name==g1){g3.splice(g2,1);g5.state.modeGen++;ak(g5);return}}}),indentLine:dr(function(g3,g1,g2){if(typeof g1!="string"&&typeof g1!="number"){if(g1==null){g1=this.options.smartIndent?"smart":"prev"}else{g1=g1?"add":"subtract"}}if(cl(this.doc,g3)){af(this,g3,g1,g2)}}),indentSelection:dr(function(hb){var g7=this;var g1=this.doc.sel.ranges,g4=-1;for(var g6=0;g6<g1.length;g6++){var g8=g1[g6];if(!g8.empty()){var g9=g8.from(),ha=g8.to();var g2=Math.max(g4,g9.line);g4=Math.min(g7.lastLine(),ha.line-(ha.ch?0:1))+1;for(var g5=g2;g5<g4;++g5){af(g7,g5,hb)}var g3=g7.doc.sel.ranges;if(g9.ch==0&&g1.length==g3.length&&g3[g6].from().ch>0){e(g7.doc,g6,new ef(g9,g3[g6].to()),ac)}}else{if(g8.head.line>g4){af(g7,g8.head.line,hb,true);g4=g8.head.line;if(g6==g7.doc.sel.primIndex){gc(g7)}}}}}),getTokenAt:function(g2,g1){return cG(this,g2,g1)},getLineTokens:function(g2,g1){return cG(this,Y(g2),g1,true)},getTokenTypeAt:function(g8){g8=gi(this.doc,g8);var g4=dp(this,fK(this.doc,g8.line));var g6=0,g7=(g4.length-1)/2,g3=g8.ch;var g2;if(g3==0){g2=g4[2]}else{for(;;){var g1=(g6+g7)>>1;if((g1?g4[g1*2-1]:0)>=g3){g7=g1}else{if(g4[g1*2+1]<g3){g6=g1+1}else{g2=g4[g1*2+2];break}}}}var g5=g2?g2.indexOf("overlay "):-1;return g5<0?g2:g5==0?null:g2.slice(0,g5-1)},getModeAt:function(g2){var g1=this.doc.mode;if(!g1.innerMode){return g1}return i.innerMode(g1,this.getTokenAt(g2).state).mode},getHelper:function(g2,g1){return this.getHelpers(g2,g1)[0]},getHelpers:function(g8,g7){var g5=this;var ha=[];if(!g0.hasOwnProperty(g7)){return ha}var g3=g0[g7],g6=this.getModeAt(g8);if(typeof g6[g7]=="string"){if(g3[g6[g7]]){ha.push(g3[g6[g7]])}}else{if(g6[g7]){for(var g4=0;g4<g6[g7].length;g4++){var g2=g3[g6[g7][g4]];if(g2){ha.push(g2)}}}else{if(g6.helperType&&g3[g6.helperType]){ha.push(g3[g6.helperType])}else{if(g3[g6.name]){ha.push(g3[g6.name])}}}}for(var g1=0;g1<g3._global.length;g1++){var g9=g3._global[g1];if(g9.pred(g6,g5)&&dB(ha,g9.val)==-1){ha.push(g9.val)}}return ha},getStateAfter:function(g2,g1){var g3=this.doc;g2=dl(g3,g2==null?g3.first+g3.size-1:g2);return dT(this,g2+1,g1)},cursorCoords:function(g4,g2){var g3,g1=this.doc.sel.primary();if(g4==null){g3=g1.head}else{if(typeof g4=="object"){g3=gi(this.doc,g4)}else{g3=g4?g1.from():g1.to()}}return ec(this,g3,g2||"page")},charCoords:function(g2,g1){return c1(this,gi(this.doc,g2),g1||"page")},coordsChar:function(g1,g2){g1=gU(this,g1,g2||"page");return gp(this,g1.left,g1.top)},lineAtHeight:function(g1,g2){g1=gU(this,{top:g1,left:0},g2||"page").top;return bR(this.doc,g1+this.display.viewOffset)},heightAtLine:function(g2,g6,g5){var g1=false,g3;if(typeof g2=="number"){var g4=this.doc.first+this.doc.size-1;if(g2<this.doc.first){g2=this.doc.first}else{if(g2>g4){g2=g4;g1=true}}g3=fK(this.doc,g2)}else{g3=g2}return fk(this,g3,{top:0,left:0},g6||"page",g5||g1).top+(g1?this.doc.height-bW(g3):0)},defaultTextHeight:function(){return a2(this.display)},defaultCharWidth:function(){return dU(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(g6,g3,g8,g4,ha){var g5=this.display;g6=ec(this,gi(this.doc,g6));var g7=g6.bottom,g2=g6.left;g3.style.position="absolute";g3.setAttribute("cm-ignore-events","true");this.display.input.setUneditable(g3);g5.sizer.appendChild(g3);if(g4=="over"){g7=g6.top}else{if(g4=="above"||g4=="near"){var g1=Math.max(g5.wrapper.clientHeight,this.doc.height),g9=Math.max(g5.sizer.clientWidth,g5.lineSpace.clientWidth);if((g4=="above"||g6.bottom+g3.offsetHeight>g1)&&g6.top>g3.offsetHeight){g7=g6.top-g3.offsetHeight}else{if(g6.bottom+g3.offsetHeight<=g1){g7=g6.bottom}}if(g2+g3.offsetWidth>g9){g2=g9-g3.offsetWidth}}}g3.style.top=g7+"px";g3.style.left=g3.style.right="";if(ha=="right"){g2=g5.sizer.clientWidth-g3.offsetWidth;g3.style.right="0px"}else{if(ha=="left"){g2=0}else{if(ha=="middle"){g2=(g5.sizer.clientWidth-g3.offsetWidth)/2}}g3.style.left=g2+"px"}if(g8){G(this,{left:g2,top:g7,right:g2+g3.offsetWidth,bottom:g7+g3.offsetHeight})}},triggerOnKeyDown:dr(q),triggerOnKeyPress:dr(cN),triggerOnKeyUp:bl,execCommand:function(g1){if(e3.hasOwnProperty(g1)){return e3[g1].call(null,this)}},triggerElectric:dr(function(g1){gy(this,g1)}),findPosH:function(g8,g4,g5,g2){var g7=this;var g1=1;if(g4<0){g1=-1;g4=-g4}var g6=gi(this.doc,g8);for(var g3=0;g3<g4;++g3){g6=bF(g7.doc,g6,g1,g5,g2);if(g6.hitSide){break}}return g6},moveH:dr(function(g1,g2){var g3=this;this.extendSelectionsBy(function(g4){if(g3.display.shift||g3.doc.extend||g4.empty()){return bF(g3.doc,g4.head,g1,g2,g3.options.rtlMoveVisually)}else{return g1<0?g4.from():g4.to()}},dc)}),deleteH:dr(function(g1,g2){var g3=this.doc.sel,g4=this.doc;if(g3.somethingSelected()){g4.replaceSelection("",null,"+delete")}else{fs(this,function(g6){var g5=bF(g4,g6.head,g1,g2,false);return g1<0?{from:g5,to:g6.head}:{from:g6.head,to:g5}})}}),findPosV:function(g7,g4,g8,ha){var g3=this;var g1=1,g6=ha;if(g4<0){g1=-1;g4=-g4}var g9=gi(this.doc,g7);for(var g2=0;g2<g4;++g2){var g5=ec(g3,g9,"div");if(g6==null){g6=g5.left}else{g5.left=g6}g9=bz(g3,g5,g1,g8);if(g9.hitSide){break}}return g9},moveV:dr(function(g1,g3){var g7=this;var g5=this.doc,g4=[];var g6=!this.display.shift&&!g5.extend&&g5.sel.somethingSelected();g5.extendSelectionsBy(function(g8){if(g6){return g1<0?g8.from():g8.to()}var ha=ec(g7,g8.head,"div");if(g8.goalColumn!=null){ha.left=g8.goalColumn}g4.push(ha.left);var g9=bz(g7,ha,g1,g3);if(g3=="page"&&g8==g5.sel.primary()){cY(g7,c1(g7,g9,"div").top-ha.top)}return g9},dc);if(g4.length){for(var g2=0;g2<g5.sel.ranges.length;g2++){g5.sel.ranges[g2].goalColumn=g4[g2]}}}),findWordAt:function(g8){var g6=this.doc,g4=fK(g6,g8.line).text;var g7=g8.ch,g3=g8.ch;if(g4){var g5=this.getHelper(g8,"wordChars");if((g8.sticky=="before"||g3==g4.length)&&g7){--g7}else{++g3}var g2=g4.charAt(g7);var g1=cQ(g2,g5)?function(g9){return cQ(g9,g5)}:/\s/.test(g2)?function(g9){return/\s/.test(g9)}:function(g9){return(!/\s/.test(g9)&&!cQ(g9))};while(g7>0&&g1(g4.charAt(g7-1))){--g7}while(g3<g4.length&&g1(g4.charAt(g3))){++g3}}return new ef(Y(g8.line,g7),Y(g8.line,g3))},toggleOverwrite:function(g1){if(g1!=null&&g1==this.state.overwrite){return}if(this.state.overwrite=!this.state.overwrite){f7(this.display.cursorDiv,"CodeMirror-overwrite")}else{h(this.display.cursorDiv,"CodeMirror-overwrite")}aH(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return this.display.input.getField()==d5()},isReadOnly:function(){return !!(this.options.readOnly||this.doc.cantEdit)},scrollTo:dr(function(g1,g2){ff(this,g1,g2)}),getScrollInfo:function(){var g1=this.display.scroller;return{left:g1.scrollLeft,top:g1.scrollTop,height:g1.scrollHeight-c9(this)-this.display.barHeight,width:g1.scrollWidth-c9(this)-this.display.barWidth,clientHeight:db(this),clientWidth:dE(this)}},scrollIntoView:dr(function(g1,g2){if(g1==null){g1={from:this.doc.sel.primary().head,to:null};if(g2==null){g2=this.options.cursorScrollMargin}}else{if(typeof g1=="number"){g1={from:Y(g1,0),to:null}}else{if(g1.from==null){g1={from:g1,to:null}}}}if(!g1.to){g1.to=g1.from}g1.margin=g2||0;if(g1.from.line!=null){cq(this,g1)}else{b0(this,g1.from,g1.to,g1.margin)}}),setSize:dr(function(g3,g1){var g5=this;var g2=function(g6){return typeof g6=="number"||/^\d+$/.test(String(g6))?g6+"px":g6};if(g3!=null){this.display.wrapper.style.width=g2(g3)}if(g1!=null){this.display.wrapper.style.height=g2(g1)}if(this.options.lineWrapping){aS(this)}var g4=this.display.viewFrom;this.doc.iter(g4,this.display.viewTo,function(g6){if(g6.widgets){for(var g7=0;g7<g6.widgets.length;g7++){if(g6.widgets[g7].noHScroll){T(g5,g4,"widget");break}}}++g4});this.curOp.forceUpdate=true;aH(this,"refresh",this)}),operation:function(g1){return c3(this,g1)},refresh:dr(function(){var g1=this.display.cachedTextHeight;ak(this);this.curOp.forceUpdate=true;am(this);ff(this,this.doc.scrollLeft,this.doc.scrollTop);dk(this);if(g1==null||Math.abs(g1-a2(this.display))>0.5){ab(this)}aH(this,"refresh",this)}),swapDoc:dr(function(g2){var g1=this.doc;g1.cm=null;ew(this,g2);am(this);this.display.input.reset();ff(this,g2.scrollLeft,g2.scrollTop);this.curOp.forceScroll=true;ah(this,"swapDoc",this,g1);return g1}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};bJ(i);i.registerHelper=function(g2,g1,g3){if(!g0.hasOwnProperty(g2)){g0[g2]=i[g2]={_global:[]}}g0[g2][g1]=g3};i.registerGlobalHelper=function(g3,g2,g1,g4){i.registerHelper(g3,g2,g4);g0[g3]._global.push({pred:g1,val:g4})}}function bF(ha,g9,g1,hb,gZ){var g2=g9;var g6=g1;var g5=fK(ha,g9.line);function i(){var hf=g9.line+g1;if(hf<ha.first||hf>=ha.first+ha.size){return false}g9=new Y(hf,g9.ch,g9.sticky);return g5=fK(ha,hf)}function g3(hg){var hf;if(gZ){hf=u(ha.cm,g5,g9,g1)}else{hf=al(g5,g9,g1)}if(hf==null){if(!hg&&i()){g9=eZ(gZ,ha.cm,g5,g9.line,g1)}else{return false}}else{g9=hf}return true}if(hb=="char"){g3()}else{if(hb=="column"){g3(true)}else{if(hb=="word"||hb=="group"){var g8=null,hd=hb=="group";var g0=ha.cm&&ha.cm.getHelper(g9,"wordChars");for(var g4=true;;g4=false){if(g1<0&&!g3(!g4)){break}var hc=g5.text.charAt(g9.ch)||"\n";var g7=cQ(hc,g0)?"w":hd&&hc=="\n"?"n":!hd||/\s/.test(hc)?null:"p";if(hd&&!g4&&!g7){g7="s"}if(g8&&g8!=g7){if(g1<0){g1=1;g3();g9.sticky="after"}break}if(g7){g8=g7}if(g1>0&&!g3(!g4)){break}}}}}var he=b6(ha,g9,g2,g6,true);if(Z(g2,he)){he.hitSide=true}return he}function bz(g7,g2,gZ,g6){var g5=g7.doc,g4=g2.left,g3;if(g6=="page"){var g1=Math.min(g7.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);var i=Math.max(g1-0.5*a2(g7.display),3);g3=(gZ>0?g2.bottom:g2.top)+gZ*i}else{if(g6=="line"){g3=gZ>0?g2.bottom+3:g2.top-3}}var g0;for(;;){g0=gp(g7,g4,g3);if(!g0.outside){break}if(gZ<0?g3<=0:g3>=g5.height){g0.hitSide=true;break}g3+=gZ*5}return g0}var dM=function(i){this.cm=i;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new gY();this.composing=null;this.gracePeriod=false;this.readDOMTimeout=null};dM.prototype.init=function(g1){var g3=this;var g0=this,i=g0.cm;var g2=g0.div=g1.lineDiv;go(g2,i.options.spellcheck);b8(g2,"paste",function(g4){if(aV(i,g4)||be(g4,i)){return}if(l<=11){setTimeout(dh(i,function(){return g3.updateFromDOM()}),20)}});b8(g2,"compositionstart",function(g4){g3.composing={data:g4.data,done:false}});b8(g2,"compositionupdate",function(g4){if(!g3.composing){g3.composing={data:g4.data,done:false}}});b8(g2,"compositionend",function(g4){if(g3.composing){if(g4.data!=g3.composing.data){g3.readFromDOMSoon()}g3.composing.done=true}});b8(g2,"touchstart",function(){return g0.forceCompositionEnd()});b8(g2,"input",function(){if(!g3.composing){g3.readFromDOMSoon()}});function gZ(g8){if(aV(i,g8)){return}if(i.somethingSelected()){dm({lineWise:false,text:i.getSelections()});if(g8.type=="cut"){i.replaceSelection("",null,"cut")}}else{if(!i.options.lineWiseCopyCut){return}else{var g5=dA(i);dm({lineWise:true,text:g5.text});if(g8.type=="cut"){i.operation(function(){i.setSelections(g5.ranges,0,ac);i.replaceSelection("",null,"cut")})}}}if(g8.clipboardData){g8.clipboardData.clearData();var g7=bq.text.join("\n");g8.clipboardData.setData("Text",g7);if(g8.clipboardData.getData("Text")==g7){g8.preventDefault();return}}var g6=a1(),g9=g6.firstChild;i.display.lineSpace.insertBefore(g6,i.display.lineSpace.firstChild);g9.value=bq.text.join("\n");var g4=document.activeElement;d2(g9);setTimeout(function(){i.display.lineSpace.removeChild(g6);g4.focus();if(g4==g2){g0.showPrimarySelection()}},50)}b8(g2,"copy",gZ);b8(g2,"cut",gZ)};dM.prototype.prepareSelection=function(){var i=gg(this.cm,false);i.focus=this.cm.state.focused;return i};dM.prototype.showSelection=function(gZ,i){if(!gZ||!this.cm.display.view.length){return}if(gZ.focus||i){this.showPrimarySelection()}this.showMultipleSelections(gZ)};dM.prototype.showPrimarySelection=function(){var g2=window.getSelection(),hc=this.cm,g5=hc.doc.sel.primary();var ha=g5.from(),hb=g5.to();if(hc.display.viewTo==hc.display.viewFrom||ha.line>=hc.display.viewTo||hb.line<hc.display.viewFrom){g2.removeAllRanges();return}var g3=aB(hc,g2.anchorNode,g2.anchorOffset);var g7=aB(hc,g2.focusNode,g2.focusOffset);if(g3&&!g3.bad&&g7&&!g7.bad&&ct(au(g3,g7),ha)==0&&ct(bH(g3,g7),hb)==0){return}var g9=hc.display.view;var g1=(ha.line>=hc.display.viewFrom&&cP(hc,ha))||{node:g9[0].measure.map[2],offset:0};var g6=hb.line<hc.display.viewTo&&cP(hc,hb);if(!g6){var g0=g9[g9.length-1].measure;var gZ=g0.maps?g0.maps[g0.maps.length-1]:g0.map;g6={node:gZ[gZ.length-1],offset:gZ[gZ.length-2]-gZ[gZ.length-3]}}if(!g1||!g6){g2.removeAllRanges();return}var g4=g2.rangeCount&&g2.getRangeAt(0),i;try{i=cB(g1.node,g1.offset,g6.offset,g6.node)}catch(g8){}if(i){if(!cE&&hc.state.focused){g2.collapse(g1.node,g1.offset);if(!i.collapsed){g2.removeAllRanges();g2.addRange(i)}}else{g2.removeAllRanges();g2.addRange(i)}if(g4&&g2.anchorNode==null){g2.addRange(g4)}else{if(cE){this.startGracePeriod()}}}this.rememberSelection()};dM.prototype.startGracePeriod=function(){var i=this;clearTimeout(this.gracePeriod);this.gracePeriod=setTimeout(function(){i.gracePeriod=false;if(i.selectionChanged()){i.cm.operation(function(){return i.cm.curOp.selectionChanged=true})}},20)};dM.prototype.showMultipleSelections=function(i){b3(this.cm.display.cursorDiv,i.cursors);b3(this.cm.display.selectionDiv,i.selection)};dM.prototype.rememberSelection=function(){var i=window.getSelection();this.lastAnchorNode=i.anchorNode;this.lastAnchorOffset=i.anchorOffset;this.lastFocusNode=i.focusNode;this.lastFocusOffset=i.focusOffset};dM.prototype.selectionInEditor=function(){var gZ=window.getSelection();if(!gZ.rangeCount){return false}var i=gZ.getRangeAt(0).commonAncestorContainer;return gQ(this.div,i)};dM.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"){if(!this.selectionInEditor()){this.showSelection(this.prepareSelection(),true)}this.div.focus()}};dM.prototype.blur=function(){this.div.blur()};dM.prototype.getField=function(){return this.div};dM.prototype.supportsTouch=function(){return true};dM.prototype.receivedFocus=function(){var i=this;if(this.selectionInEditor()){this.pollSelection()}else{c3(this.cm,function(){return i.cm.curOp.selectionChanged=true})}function gZ(){if(i.cm.state.focused){i.pollSelection();i.polling.set(i.cm.options.pollInterval,gZ)}}this.polling.set(this.cm.options.pollInterval,gZ)};dM.prototype.selectionChanged=function(){var i=window.getSelection();return i.anchorNode!=this.lastAnchorNode||i.anchorOffset!=this.lastAnchorOffset||i.focusNode!=this.lastFocusNode||i.focusOffset!=this.lastFocusOffset};dM.prototype.pollSelection=function(){if(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged()){return}var g1=window.getSelection(),i=this.cm;if(aQ&&dv&&this.cm.options.gutters.length&&gH(g1.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs});this.blur();this.focus();return}if(this.composing){return}this.rememberSelection();var gZ=aB(i,g1.anchorNode,g1.anchorOffset);var g0=aB(i,g1.focusNode,g1.focusOffset);if(gZ&&g0){c3(i,function(){b5(i.doc,fl(gZ,g0),ac);if(gZ.bad||g0.bad){i.curOp.selectionChanged=true}})}};dM.prototype.pollContent=function(){if(this.readDOMTimeout!=null){clearTimeout(this.readDOMTimeout);this.readDOMTimeout=null}var g8=this.cm,hi=g8.display,hg=g8.doc.sel.primary();var hh=hg.from(),g2=hg.to();if(hh.ch==0&&hh.line>g8.firstLine()){hh=Y(hh.line-1,fK(g8.doc,hh.line-1).length)}if(g2.ch==fK(g8.doc,g2.line).text.length&&g2.line<g8.lastLine()){g2=Y(g2.line+1,0)}if(hh.line<hi.viewFrom||g2.line>hi.viewTo-1){return false}var g5,g3,g7;if(hh.line==hi.viewFrom||(g5=dJ(g8,hh.line))==0){g3=bX(hi.view[0].line);g7=hi.view[0].node}else{g3=bX(hi.view[g5].line);g7=hi.view[g5-1].node.nextSibling}var hf=dJ(g8,g2.line);var ha,hd;if(hf==hi.view.length-1){ha=hi.viewTo-1;hd=hi.lineDiv.lastChild}else{ha=bX(hi.view[hf+1].line)-1;hd=hi.view[hf+1].node.previousSibling}if(!g7){return false}var hj=g8.doc.splitLines(gC(g8,g7,hd,g3,ha));var hc=gI(g8.doc,Y(g3,0),Y(ha,fK(g8.doc,ha).text.length));while(hj.length>1&&hc.length>1){if(gd(hj)==gd(hc)){hj.pop();hc.pop();ha--}else{if(hj[0]==hc[0]){hj.shift();hc.shift();g3++}else{break}}}var he=0,g0=0;var g9=hj[0],gZ=hc[0],i=Math.min(g9.length,gZ.length);while(he<i&&g9.charCodeAt(he)==gZ.charCodeAt(he)){++he}var g6=gd(hj),hk=gd(hc);var g1=Math.min(g6.length-(hj.length==1?he:0),hk.length-(hc.length==1?he:0));while(g0<g1&&g6.charCodeAt(g6.length-g0-1)==hk.charCodeAt(hk.length-g0-1)){++g0}if(hj.length==1&&hc.length==1&&g3==hh.line){while(he&&he>hh.ch&&g6.charCodeAt(g6.length-g0-1)==hk.charCodeAt(hk.length-g0-1)){he--;g0++}}hj[hj.length-1]=g6.slice(0,g6.length-g0).replace(/^\u200b+/,"");hj[0]=hj[0].slice(he).replace(/\u200b+$/,"");var g4=Y(g3,he);var hb=Y(ha,hc.length?gd(hc).length-g0:0);if(hj.length>1||hj[0]||ct(g4,hb)){a5(g8.doc,hj,g4,hb,"+input");return true}};dM.prototype.ensurePolled=function(){this.forceCompositionEnd()};dM.prototype.reset=function(){this.forceCompositionEnd()};dM.prototype.forceCompositionEnd=function(){if(!this.composing){return}clearTimeout(this.readDOMTimeout);this.composing=null;this.updateFromDOM();this.div.blur();this.div.focus()};dM.prototype.readFromDOMSoon=function(){var i=this;if(this.readDOMTimeout!=null){return}this.readDOMTimeout=setTimeout(function(){i.readDOMTimeout=null;if(i.composing){if(i.composing.done){i.composing=null}else{return}}i.updateFromDOM()},80)};dM.prototype.updateFromDOM=function(){var i=this;if(this.cm.isReadOnly()||!this.pollContent()){c3(this.cm,function(){return ak(i.cm)})}};dM.prototype.setUneditable=function(i){i.contentEditable="false"};dM.prototype.onKeyPress=function(i){if(i.charCode==0){return}i.preventDefault();if(!this.cm.isReadOnly()){dh(this.cm,gB)(this.cm,String.fromCharCode(i.charCode==null?i.keyCode:i.charCode),0)}};dM.prototype.readOnlyChanged=function(i){this.div.contentEditable=String(i!="nocursor")};dM.prototype.onContextMenu=function(){};dM.prototype.resetPosition=function(){};dM.prototype.needsContentAttribute=true;function cP(g4,g2){var g3=fH(g4,g2.line);if(!g3||g3.hidden){return null}var g6=fK(g4.doc,g2.line);var gZ=cJ(g3,g6,g2.line);var g0=a(g6,g4.doc.direction),g1="left";if(g0){var i=aK(g0,g2.ch);g1=i%2?"right":"left"}var g5=aN(gZ.map,g2.ch,g1);g5.offset=g5.collapse=="right"?g5.end:g5.start;return g5}function gH(gZ){for(var i=gZ;i;i=i.parentNode){if(/CodeMirror-gutter-wrapper/.test(i.className)){return true}}return false}function eP(gZ,i){if(i){gZ.bad=true}return gZ}function gC(g6,g4,g5,g1,gZ){var g8="",g0=false,i=g6.doc.lineSeparator();function g2(ha){return function(hb){return hb.id==ha}}function g9(){if(g0){g8+=i;g0=false}}function g7(ha){if(ha){g9();g8+=ha}}function g3(hf){if(hf.nodeType==1){var hc=hf.getAttribute("cm-text");if(hc!=null){g7(hc||hf.textContent.replace(/\u200b/g,""));return}var he=hf.getAttribute("cm-marker"),hb;if(he){var hg=g6.findMarks(Y(g1,0),Y(gZ+1,0),g2(+he));if(hg.length&&(hb=hg[0].find())){g7(gI(g6.doc,hb.from,hb.to).join(i))}return}if(hf.getAttribute("contenteditable")=="false"){return}var ha=/^(pre|div|p)$/i.test(hf.nodeName);if(ha){g9()}for(var hd=0;hd<hf.childNodes.length;hd++){g3(hf.childNodes[hd])}if(ha){g0=true}}else{if(hf.nodeType==3){g7(hf.nodeValue)}}}for(;;){g3(g4);if(g4==g5){break}g4=g4.nextSibling}return g8}function aB(gZ,g2,g4){var g3;if(g2==gZ.display.lineDiv){g3=gZ.display.lineDiv.childNodes[g4];if(!g3){return eP(gZ.clipPos(Y(gZ.display.viewTo-1)),true)}g2=null;g4=0}else{for(g3=g2;;g3=g3.parentNode){if(!g3||g3==gZ.display.lineDiv){return null}if(g3.parentNode&&g3.parentNode==gZ.display.lineDiv){break}}}for(var g1=0;g1<gZ.display.view.length;g1++){var g0=gZ.display.view[g1];if(g0.node==g3){return ad(g0,g2,g4)}}}function ad(g7,g3,g5){var g0=g7.text.firstChild,g2=false;if(!g3||!gQ(g0,g3)){return eP(Y(bX(g7.line),0),true)}if(g3==g0){g2=true;g3=g0.childNodes[g5];g5=0;if(!g3){var hd=g7.rest?gd(g7.rest):g7.line;return eP(Y(bX(hd),hd.text.length),g2)}}var g4=g3.nodeType==3?g3:null,hb=g3;if(!g4&&g3.childNodes.length==1&&g3.firstChild.nodeType==3){g4=g3.firstChild;if(g5){g5=g4.nodeValue.length}}while(hb.parentNode!=g0){hb=hb.parentNode}var gZ=g7.measure,g9=gZ.maps;function g6(hg,hl,hi){for(var hk=-1;hk<(g9?g9.length:0);hk++){var hf=hk<0?gZ.map:g9[hk];for(var hj=0;hj<hf.length;hj+=3){var hh=hf[hj+2];if(hh==hg||hh==hl){var hm=bX(hk<0?g7.line:g7.rest[hk]);var he=hf[hj]+hi;if(hi<0||hh!=hg){he=hf[hj+(hi?1:0)]}return Y(hm,he)}}}}var hc=g6(g4,hb,g5);if(hc){return eP(hc,g2)}for(var i=hb.nextSibling,g8=g4?g4.nodeValue.length-g5:0;i;i=i.nextSibling){hc=g6(i,i.firstChild,0);if(hc){return eP(Y(hc.line,hc.ch-g8),g2)}else{g8+=i.textContent.length}}for(var ha=hb.previousSibling,g1=g5;ha;ha=ha.previousSibling){hc=g6(ha,ha.firstChild,-1);if(hc){return eP(Y(hc.line,hc.ch+g1),g2)}else{g1+=ha.textContent.length}}}var aa=function(i){this.cm=i;this.prevInput="";this.pollingFast=false;this.polling=new gY();this.inaccurateSelection=false;this.hasSelection=false;this.composing=null};aa.prototype.init=function(g0){var g4=this;var gZ=this,i=this.cm;var g3=this.wrapper=a1();var g1=this.textarea=g3.firstChild;g0.wrapper.insertBefore(g3,g0.wrapper.firstChild);if(fw){g1.style.width="0px"}b8(g1,"input",function(){if(d1&&l>=9&&g4.hasSelection){g4.hasSelection=null}gZ.poll()});b8(g1,"paste",function(g5){if(aV(i,g5)||be(g5,i)){return}i.state.pasteIncoming=true;gZ.fastPoll()});function g2(g6){if(aV(i,g6)){return}if(i.somethingSelected()){dm({lineWise:false,text:i.getSelections()});if(gZ.inaccurateSelection){gZ.prevInput="";gZ.inaccurateSelection=false;g1.value=bq.text.join("\n");d2(g1)}}else{if(!i.options.lineWiseCopyCut){return}else{var g5=dA(i);dm({lineWise:true,text:g5.text});if(g6.type=="cut"){i.setSelections(g5.ranges,null,ac)}else{gZ.prevInput="";g1.value=g5.text.join("\n");d2(g1)}}}if(g6.type=="cut"){i.state.cutIncoming=true}}b8(g1,"cut",g2);b8(g1,"copy",g2);b8(g0.scroller,"paste",function(g5){if(bf(g0,g5)||aV(i,g5)){return}i.state.pasteIncoming=true;gZ.focus()});b8(g0.lineSpace,"selectstart",function(g5){if(!bf(g0,g5)){cW(g5)}});b8(g1,"compositionstart",function(){var g5=i.getCursor("from");if(gZ.composing){gZ.composing.range.clear()}gZ.composing={start:g5,range:i.markText(g5,i.getCursor("to"),{className:"CodeMirror-composing"})}});b8(g1,"compositionend",function(){if(gZ.composing){gZ.poll();gZ.composing.range.clear();gZ.composing=null}})};aa.prototype.prepareSelection=function(){var gZ=this.cm,g3=gZ.display,g2=gZ.doc;var i=gg(gZ);if(gZ.options.moveInputWithCursor){var g4=ec(gZ,g2.sel.primary().head,"div");var g0=g3.wrapper.getBoundingClientRect(),g1=g3.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(g3.wrapper.clientHeight-10,g4.top+g1.top-g0.top));i.teLeft=Math.max(0,Math.min(g3.wrapper.clientWidth-10,g4.left+g1.left-g0.left))}return i};aa.prototype.showSelection=function(g0){var i=this.cm,gZ=i.display;b3(gZ.cursorDiv,g0.cursors);b3(gZ.selectionDiv,g0.selection);if(g0.teTop!=null){this.wrapper.style.top=g0.teTop+"px";this.wrapper.style.left=g0.teLeft+"px"}};aa.prototype.reset=function(g2){if(this.contextMenuPending){return}var gZ,g1,i=this.cm,g4=i.doc;if(i.somethingSelected()){this.prevInput="";var g0=g4.sel.primary();gZ=ds&&(g0.to().line-g0.from().line>100||(g1=i.getSelection()).length>1000);var g3=gZ?"-":g1||i.getSelection();this.textarea.value=g3;if(i.state.focused){d2(this.textarea)}if(d1&&l>=9){this.hasSelection=g3}}else{if(!g2){this.prevInput=this.textarea.value="";if(d1&&l>=9){this.hasSelection=null}}}this.inaccurateSelection=gZ};aa.prototype.getField=function(){return this.textarea};aa.prototype.supportsTouch=function(){return false};aa.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!eB||d5()!=this.textarea)){try{this.textarea.focus()}catch(i){}}};aa.prototype.blur=function(){this.textarea.blur()};aa.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0};aa.prototype.receivedFocus=function(){this.slowPoll()};aa.prototype.slowPoll=function(){var i=this;if(this.pollingFast){return}this.polling.set(this.cm.options.pollInterval,function(){i.poll();if(i.cm.state.focused){i.slowPoll()}})};aa.prototype.fastPoll=function(){var gZ=false,i=this;i.pollingFast=true;function g0(){var g1=i.poll();if(!g1&&!gZ){gZ=true;i.polling.set(60,g0)}else{i.pollingFast=false;i.slowPoll()}}i.polling.set(20,g0)};aa.prototype.poll=function(){var g5=this;var i=this.cm,g0=this.textarea,g1=this.prevInput;if(this.contextMenuPending||!i.state.focused||(bB(g0)&&!g1&&!this.composing)||i.isReadOnly()||i.options.disableInput||i.state.keySeq){return false}var g3=g0.value;if(g3==g1&&!i.somethingSelected()){return false}if(d1&&l>=9&&this.hasSelection===g3||cj&&/[\uf700-\uf7ff]/.test(g3)){i.display.input.reset();return false}if(i.doc.sel==i.display.selForContextMenu){var g2=g3.charCodeAt(0);if(g2==8203&&!g1){g1="\u200b"}if(g2==8666){this.reset();return this.cm.execCommand("undo")}}var g4=0,gZ=Math.min(g1.length,g3.length);while(g4<gZ&&g1.charCodeAt(g4)==g3.charCodeAt(g4)){++g4}c3(i,function(){gB(i,g3.slice(g4),g1.length-g4,null,g5.composing?"*compose":null);if(g3.length>1000||g3.indexOf("\n")>-1){g0.value=g5.prevInput=""}else{g5.prevInput=g3}if(g5.composing){g5.composing.range.clear();g5.composing.range=i.markText(g5.composing.start,i.getCursor("to"),{className:"CodeMirror-composing"})}});return true};aa.prototype.ensurePolled=function(){if(this.pollingFast&&this.poll()){this.pollingFast=false}};aa.prototype.onKeyPress=function(){if(d1&&l>=9){this.hasSelection=null}this.fastPoll()};aa.prototype.onContextMenu=function(g3){var g8=this,g9=g8.cm,g5=g9.display,gZ=g8.textarea;var g7=cD(g9,g3),i=g5.scroller.scrollTop;if(!g7||em){return}var g2=g9.options.resetSelectionOnContextMenu;if(g2&&g9.doc.sel.contains(g7)==-1){dh(g9,b5)(g9.doc,fl(g7),ac)}var g4=gZ.style.cssText,hc=g8.wrapper.style.cssText;g8.wrapper.style.cssText="position: absolute";var hb=g8.wrapper.getBoundingClientRect();gZ.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(g3.clientY-hb.top-5)+"px; left: "+(g3.clientX-hb.left-5)+"px;\n      z-index: 1000; background: "+(d1?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";var ha;if(dg){ha=window.scrollY}g5.input.focus();if(dg){window.scrollTo(null,ha)}g5.input.reset();if(!g9.somethingSelected()){gZ.value=g8.prevInput=" "}g8.contextMenuPending=true;g5.selForContextMenu=g9.doc.sel;clearTimeout(g5.detectingSelectAll);function g1(){if(gZ.selectionStart!=null){var hd=g9.somethingSelected();var he="\u200b"+(hd?gZ.value:"");gZ.value="\u21da";gZ.value=he;g8.prevInput=hd?"":"\u200b";gZ.selectionStart=1;gZ.selectionEnd=he.length;g5.selForContextMenu=g9.doc.sel}}function g6(){g8.contextMenuPending=false;g8.wrapper.style.cssText=hc;gZ.style.cssText=g4;if(d1&&l<9){g5.scrollbars.setScrollTop(g5.scroller.scrollTop=i)}if(gZ.selectionStart!=null){if(!d1||(d1&&l<9)){g1()}var hd=0,he=function(){if(g5.selForContextMenu==g9.doc.sel&&gZ.selectionStart==0&&gZ.selectionEnd>0&&g8.prevInput=="\u200b"){dh(g9,ao)(g9)}else{if(hd++<10){g5.detectingSelectAll=setTimeout(he,500)}else{g5.selForContextMenu=null;g5.input.reset()}}};g5.detectingSelectAll=setTimeout(he,200)}}if(d1&&l>=9){g1()}if(gP){eO(g3);var g0=function(){eA(window,"mouseup",g0);setTimeout(g6,20)};b8(window,"mouseup",g0)}else{setTimeout(g6,50)}};aa.prototype.readOnlyChanged=function(i){if(!i){this.reset()}};aa.prototype.setUneditable=function(){};aa.prototype.needsContentAttribute=false;function ge(g5,g6){g6=g6?aR(g6):{};g6.value=g5.value;if(!g6.tabindex&&g5.tabIndex){g6.tabindex=g5.tabIndex}if(!g6.placeholder&&g5.placeholder){g6.placeholder=g5.placeholder}if(g6.autofocus==null){var i=d5();g6.autofocus=i==g5||g5.getAttribute("autofocus")!=null&&i==document.body}function g2(){g5.value=g4.getValue()}var g3;if(g5.form){b8(g5.form,"submit",g2);if(!g6.leaveSubmitMethodAlone){var gZ=g5.form;g3=gZ.submit;try{var g1=gZ.submit=function(){g2();gZ.submit=g3;gZ.submit();gZ.submit=g1}}catch(g0){}}}g6.finishInit=function(g7){g7.save=g2;g7.getTextArea=function(){return g5};g7.toTextArea=function(){g7.toTextArea=isNaN;g2();g5.parentNode.removeChild(g7.getWrapperElement());g5.style.display="";if(g5.form){eA(g5.form,"submit",g2);if(typeof g5.form.submit=="function"){g5.form.submit=g3}}}};g5.style.display="none";var g4=I(function(g7){return g5.parentNode.insertBefore(g7,g5.nextSibling)},g6);return g4}function gj(i){i.off=eA;i.on=b8;i.wheelEventPixels=aC;i.Doc=aw;i.splitLines=gs;i.countColumn=b2;i.findColumn=eN;i.isWordChar=ga;i.Pass=co;i.signal=aH;i.Line=gK;i.changeEnd=dd;i.scrollbarModel=br;i.Pos=Y;i.cmpPos=ct;i.modes=dK;i.mimeModes=aW;i.resolveMode=gR;i.getMode=f6;i.modeExtensions=dH;i.extendMode=e4;i.copyState=cf;i.startState=cc;i.innerMode=gN;i.commands=e3;i.keyMap=fG;i.keyName=fV;i.isModifierKey=e0;i.lookupKey=j;i.normalizeKeyMap=cX;i.StringStream=fo;i.SharedTextMarker=x;i.TextMarker=S;i.LineWidget=dS;i.e_preventDefault=cW;i.e_stopPropagation=dI;i.e_stop=eO;i.addClass=f7;i.contains=gQ;i.rmClass=h;i.keyNames=fL}e8(I);d6(I);var d="iter insert remove copy getEditor constructor".split(" ");for(var bU in aw.prototype){if(aw.prototype.hasOwnProperty(bU)&&dB(d,bU)<0){I.prototype[bU]=(function(i){return function(){return i.apply(this.doc,arguments)}})(aw.prototype[bU])}}bJ(aw);I.inputStyles={textarea:aa,contenteditable:dM};I.defineMode=function(i){if(!I.defaults.mode&&i!="null"){I.defaults.mode=i}eR.apply(this,arguments)};I.defineMIME=bu;I.defineMode("null",function(){return({token:function(i){return i.skipToEnd()}})});I.defineMIME("text/plain","null");I.defineExtension=function(i,gZ){I.prototype[i]=gZ};I.defineDocExtension=function(i,gZ){aw.prototype[i]=gZ};I.fromTextArea=ge;gj(I);I.version="5.25.3";return I})));
